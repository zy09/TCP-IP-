# TCP/IP   指南

[TOC]

------

## **前言**

​        《The TCP/IP Guide》是一本非常好的计算机网络书籍，无论是初学者还是当作手册都是极佳的，该书有1600多页页。作者Charles M. Kozierok 为撰写这本书花费了大量的时间，我觉得这本书覆盖范围的广度和深度在任何其他单一 TCP/IP 资源中都是无与伦比的，并且作者的描述易于理解和幽默，原文有6个大的章节，在整理时合并为三个章节，前四个章节为第一节。

​            本书主要描述TCP/IP 技术历史、原理及其细节参数。并不指导现实世界中的技术使用和规范，在阅读本书对于协议和原理的描述如果没有实际的数据报文参考有时并不好理解，我整理了一些网站进行辅助请查看参考部分。

​                                                                                                                                                                             **道阻且长，行则将至**

**参考:**

- 数据包示例: https://wiki.wireshark.org/SampleCaptures
- HTTPS 网站检测:https://myssl.com/
- 协议海报: https://www.subnetonline.com/pages/downloads.php (末尾5个)
- 数据报文分析:https://www.firewall.cx/networking-topics/protocols.html
- DNS: https://bind9.readthedocs.io/en/latest/chapter1.html

## 第一节、网络基础

在本节中，我提供了几个小节来介绍网络并讨论其一些最重要的基本概念。首先，我以非常广泛的术语介绍网络，讨论它是什么以及它为什么重要。然后，我将描述您需要了解各种网络技术的网络的几个基本特征。我讨论了网络的不同类型和规模以及它们是如何区分的。然后，我将讨论与网络性能相关的许多不同问题。我解释了网络标准和标准组织的重要性。最后，我提供了一个背景部分，描述了数据如何在计算机中存储和操作的基础知识；如果您不熟悉计算，您可能会在阅读本指南的某些部分时发现这些信息很有用。

### 第一章、 网络简介

在这个时代，网络无处不在。互联网不仅彻底改变了计算机世界，而且以各种方式改变了数百万人的生活，甚至在“现实世界”中也是如此。我们倾向于认为计算机应该连接在一起是理所当然的。

鉴于网络无处不在，很难相信该领域仍然是一个相对年轻的领域，尤其是在连接诸如 PC 之类的小型计算机时。在进行任何关于网络的讨论时，退后一步从高层次上看待网络是非常有用的。它究竟是什么，为什么现在认为它如此重要，以至于假设大多数 PC 和其他设备都应该联网？网络是一项技术，他改变了原有人类生活方式，嵌入到生活各方面。对于咨询、交流、娱乐、商务给予了强大的动力，比石油都重要了吧。

在本节中，我将简要介绍网络，并笼统地讨论网络的全部内容。我首先用最一般的术语定义网络。然后，我通过描述网络的一些优点和好处，以及它的一些缺点和成本，将网络置于一个整体的背景下。

#### 1.1 什么是网络？

对于这样一个涉及面广、涉及面广的学科，涉及到这么多不同的技术、硬件设备和协议，网络的定义其实很简单。网络只是计算机或其他硬件设备的集合，它们使用特殊的硬件和软件在物理上或逻辑上连接在一起，以允许它们交换信息和协作。**网络是描述设计、实施、升级、管理和以其他方式使用网络和网络技术的过程的术语。**

网络用于令人难以置信的各种不同目的。事实上，上述定义之所以如此简单，是因为网络可以如此广泛地使用，并且可以完成如此广泛的任务。虽然大多数学习网络的人都关注 PC 和其他“真正的”计算机的互连，但您每天都使用各种类型的网络。每次您拿起电话、在商店使用信用卡、从 ATM 机取现金，甚至插入电器时，您都在使用某种类型的网络。

事实上，这个定义甚至可以完全扩展到技术领域之外：我相信你已经听说过“网络”这个词，用来描述通过与朋友和同事交谈来寻找雇主或雇员的过程。在这种情况下，想法也是独立的单元连接在一起以共享信息和合作。社交网络、情报网络、贩毒网络.........

个人计算机的广泛联网是一个相对较新的现象。在它们存在的最初十年左右，PC 非常“自成一体”，很少连接在一起。在 1990 年代初期，随着企业意识到网络可以提供的优势，PC 网络开始流行起来。到 1990 年代后期，拥有两台或多台 PC 的家庭网络也开始真正起飞。

这种1.2 **网络的优势（好处）**小型设备的互连在某种程度上代表了对大型计算机“过去的美好时光”的回归。在计算机小型化和个人化之前，它们是大型集中式机器，由许多操作远程终端的用户共享。虽然将所有计算机功能集中在一个地方有许多缺点，但其中一个好处是所有用户都可以连接，因为他们共享中央计算机。

性化的 PC 带走了这一优势，取而代之的是独立性的好处。网络尝试将计算转移到中间地带，为 PC 用户提供两全其美的优势：个人计算机的独立性和灵活性，以及大型机的连接性和资源共享。事实上，网络今天被认为是如此重要，以至于很难想象一个拥有两台或多台计算机的组织不想将它们连接在一起！

#### 1.2 **网络的优势（好处）**

您无疑听说过“整体大于部分之和”。这句话很好地描述了网络，并解释了为什么它变得如此流行。网络不仅仅是一堆计算机，它们之间有电线。如果实施得当，网络是一个系统，它为用户提供独特的能力，超出了单个机器及其软件应用程序所能提供的能力。

网络的大部分好处可以分为两大类：连接性和共享性。网络允许计算机以及它们的用户连接在一起。它们还允许轻松共享信息和资源，以及设备之间以其他方式进行合作。由于现代企业在很大程度上依赖于信息的智能流动和管理，这会告诉您很多关于网络为何如此有价值的信息。

以下是通常与网络相关的一些特定优势，排名不分先后：

- 连接和通信：网络连接计算机和这些计算机的用户。建筑物或工作组中的个人可以连接到局域网 (LAN)；位于较远位置的 LAN 可以互连成更大的广域网 (WAN)。一旦连接，网络用户就可以使用电子邮件等技术相互通信。与没有网络的情况相比，这使得业务（或非业务）信息的传输更容易、更有效且成本更低。

- 数据共享：网络最重要的用途之一是允许共享数据。在网络普及之前，想要为经理准备报告的会计员工必须在他的 PC 上生成报告，将其放在软盘上，然后交给经理，经理会将数据传输到她的 PC硬盘。 （这种“基于软盘的网络”有时被讽刺地称为“sneakernet”。） 真正的网络允许成千上万的员工比这更容易、更快速地共享数据。更重要的是，它使依赖于许多人访问和共享相同数据的能力的应用程序成为可能，例如数据库、组软件开发等等。 Intranet 和 Extranet 可用于在站点之间和向业务合作伙伴分发公司信息。

- 硬件共享：网络促进硬件设备的共享。例如，与其给一个部门的 10 名员工每人一台昂贵的彩色打印机（或再次求助于“sneakernet”），不如将一台打印机放在网络上供所有人共享。

- Internet 访问：Internet 本身就是一个巨大的网络，因此，无论何时访问 Internet，您都在使用网络。互联网对现代社会的重要性不言而喻，尤其是对于我们这些技术领域的人来说。

- Internet 访问共享：小型计算机网络允许多个用户共享一个 Internet 连接。特殊的硬件设备使连接的带宽可以根据需要轻松分配给不同的个人，并允许组织购买一个高速连接而不是许多较慢的连接。

- 数据安全和管理：在商业环境中，网络允许管理员更好地管理公司的关键数据。与其让这些数据在用户创建时以随意的方式分布在数十台甚至数百台小型计算机上，不如将数据集中在共享服务器上。这使每个人都可以轻松找到数据，使管理员可以确保定期备份数据，还可以实施安全措施来控制谁可以读取或更改各种关键信息。

- 性能增强和平衡：在某些情况下，可以使用网络通过将计算任务分配给网络上的各种计算机来增强某些应用程序的整体性能。

- 娱乐：网络促进了许多类型的游戏和娱乐。当然，互联网本身提供了许多娱乐来源。此外，存在许多在局域网上运行的多人游戏。很多家庭网络都是为此而建立的，跨广域网（包括互联网）的游戏也变得相当流行。当然，如果您正在经营一家企业并且拥有容易逗乐的员工，您可能会坚持认为这确实是网络的劣势而不是优势！

好吧，如果这份清单不足以让你相信网络是值得的，那么……我不知道你用你的电脑做什么！ J 无论如何，很可能上述项目中只有一些符合您的特定情况，但至少有一项肯定适用于几乎所有情况，假设您拥有或管理多台计算机。

#### 1.3 网络的缺点（成本）

既然我已经描述了网络的巨大价值和许多有用的好处，我必须带着你回到现实世界的老对手："世界上没有免费的午餐"。尽管网络确实代表了一个“大于其部分之和的整体”，但它确实存在一些与之相关的实际且显着的成本和缺点。

以下是一些相对于网络优势对应的项。

- 网络硬件、软件和维护成本：当然，计算机不仅仅是神奇地联网。建立网络需要对硬件和软件进行投资，以及用于规划、设计和实施网络的资金。对于拥有两台或三台 PC 的小型网络的家庭来说，这相对便宜，在当今网络硬件和已经为网络设计的操作系统价格低廉的情况下，可能不到一百美元。对于一家大公司来说，成本很容易达到数万美元甚至更多。
- 硬件和软件管理和管理成本：除了最小的实施之外，网络的持续维护和管理需要 IT 专业人员的关心和关注。在已经有系统管理员的较小组织中，网络可能属于此人的工作职责，但它会占用其他任务的时间。在更大的组织中，可能需要聘请网络管理员，而在大公司中，可能需要一个部门。
- 不受欢迎的分享：好事来了，坏事也来了；虽然网络可以轻松共享有用的信息，但也可以共享不需要的数据。在这方面，一个重要的“共享问题”与病毒有关，病毒很容易在网络和互联网上传播。减轻这些影响需要更多的时间、金钱和管理工作。
- 非法或不良行为：与上述类似，网络促进了有用的连接和通信，但也带来了困难。典型的问题包括滥用公司资源、降低生产力的干扰、下载非法或违法材料，甚至软件盗版。在大型组织中，必须通过明确的策略和监控来管理这些问题，这又进一步增加了管理成本。
- 数据安全问题：如果网络实施得当，可以大大提高重要数据的安全性。相比之下，安全性差的网络会使关键数据面临风险，使其面临与黑客、未经授权的访问甚至破坏相关的潜在问题。

这些成本和潜在问题中的大部分是可以管理的；这是那些建立和运行网络的人工作的重要组成部分。最后，与任何其他决定一样，是否建立网络是权衡利弊的问题。当然，今天几乎每个人都认为网络是值得的。

### 第二章、网络基本特征

有许多不同种类的网络，以及用于创建它们的网络技术。网络方法的激增通常有一个很好的理由：不同的需求需要不同的解决方案。这样做的缺点是有太多不同类型的协议和技术供网络学生理解！在真正比较这些方法之前，您需要了解使网络成为现实的一些基本特征。虽然网络类型可能非常不同，但它们经常被描述甚至基于许多共同属性进行对比。

在本节中，我将介绍和讨论一些描述和区分不同类型的网络和网络技术的关键网络概念。我还介绍并定义了一些术语和“流行语”，如果您要学习网络，就无法避免这些术语和“流行语”。这里的主题包括对协议、交换方法、网络消息类型、消息格式和消息寻址方式的解释。我还讨论了客户端-服务器和对等网络之间的区别。

#### 2.1 网络层、模型和架构

许多人发现网络难以学习的原因之一是它可能是一个非常复杂的主题。这种复杂性的主要原因之一是网络由如此多的硬件和软件元素组成。虽然网络用户可能只感知到他或她正在使用一个计算机程序（如 Web 浏览器）和一个硬件（如 PC），但这些只是更大难题的一部分。为了在网络上完成最简单的任务，数十个不同的组件必须协作，传递控制信息和数据以完成网络通信的总体目标。

理解任何复杂系统的最佳方法是将其分解为多个部分，然后分析它们的作用以及它们之间的交互方式。最合乎逻辑的方法是将整个功能集划分为模块化组件，每个组件负责一个特定的功能。同时，我们还需要定义这些组件之间的接口，描述它们如何组合在一起。这使我们能够通过以可理解的模块来处理网络来简化网络的复杂性。

##### 2.1.1 Networking Layers

网络技术最常见的方式是将其功能分为几层，每层都包含硬件和/或软件元素，从而进行划分。每一层负责执行特定类型的任务，并与上面和下面的层进行互动。各层在概念上被安排成一个垂直堆栈。低层负责更具体的任务，如硬件信号和低级别的通信；它们向高层提供服务。高层反过来使用这些服务来实现更抽象的功能，如实现用户应用。

以这种方式将网络划分为层有点像制造设施中的分工，并产生类似的好处。每个硬件设备或软件程序都可以专门用于执行该层所需的功能，就像装配线上训练有素的专家一样。不同的模块可以根据需要以不同的方式组合。通过这种方式，也可以更轻松地了解网络的整体运作方式。

##### 2.1.2 Networking Models

分层的另一个重要好处是，它使不同团体所定义的技术有可能相互操作。为了实现这一点，每个人都有必要就如何定义和使用分层达成一致。为此目的，最常见的工具是网络模型。该模型描述了网络中的不同层是什么，每个层负责做什么，以及它们如何互动。一个普遍接受的模型可以确保每个人在创建硬件和软件时都在同一起跑线上。

今天最常见的通用模型是开放系统互连（OSI）参考模型，它的概念是七个堆叠的层。这些层的范围从底部的物理层（第一层）到顶部的应用层（第七层），后者负责低级别的信令，是应用软件的实施地。理解OSI模型对于理解整个网络是至关重要的。我将更详细地解释模型和层，并在其专门的章节中提供OSI参考模型的完整描述。

##### 2.1.3 Networking Architectures

与模型的概念密切相关的是架构的概念。架构本质上是一套规则，它描述了构成层栈的硬件和软件的某些部分的功能。这种规则集通常采取规范或标准的形式，描述使用该技术的设备和程序必须如何行事。一个网络架构的设计是为了实现与OSI参考模型的特定连续层组相关的功能，可以是正式的也可以是非正式的。

在本指南中，我们当然对运行互联网的TCP/IP协议套件感兴趣，它是一套复杂的技术，跨越了OSI模型的许多层。通过研究TCP/IP的各种组件以及它们如何实现OSI模型的不同层次，我们才能真正了解TCP/IP的工作原理。首先，该套件的名称TCP/IP来自传输控制协议（TCP），它在OSI模型的第四层运行，而互联网协议（IP）则在OSI模型的第三层运行。IP向第四层提供服务，并使用它下面第二层的服务。TCP使用IP的功能，并向它上面的各层提供功能。对TCP/IP的完整考察始于对其结构和第二个特殊模型的考察，该模型是专门为了解TCP/IP而开发的。

#### 2.2  协议是什么？

如果您在阅读本指南时会习惯于看到很多词，那就是这个词：协议。您将看到对网络协议、互联网络协议、高级协议、低级协议、协议栈、协议套件、子协议等的参考。显然，协议很重要，但许多参考著作和标准一遍又一遍地使用该术语，而从未对其进行解释。造成这种情况的一个原因可能是因为该术语有些模糊并且可以具有多种含义，这可能使其难以掌握。

##### 2.2.1 **“协议”一词的含义**

在某些情况下，如果我们回头看看该术语在简单英语中的使用方式，理解一个技术术语会更容易。在现实世界中，协议通常是指行为准则或外交官遵守的一种礼仪形式。这些人必须遵守一定的仪式和形式规则，以确保他们有效地沟通，而不会发生冲突。他们还必须了解在与其他国家的代表互动时对他们的期望，以确保他们不会因不熟悉当地习俗而冒犯他人。即使是我们“普通人”也遵循各种协议，这是一种“不成文的社会规则”。

这似乎与网络无关，但实际上，这是对网络协议的一个很好的高级描述。它们定义了一种语言和一组规则和程序，使设备和系统能够进行通信。显然，计算机没有“当地习俗”，它们几乎不用担心会犯下可能导致另一台计算机冒犯的“失礼”。网络协议关心的是确保网络或互联网上的所有设备都同意在整个通信过程中必须如何执行各种操作。

因此，协议基本上是一种确保设备能够有效地相互通信的方式。在大多数情况下，单独的协议描述了如何在两个或多个设备中的一个特定软件或硬件元素之间完成通信。在 OSI 参考模型的上下文中，协议被正式定义为一组规则，用于管理同一参考模型层实体之间的通信。例如，传输控制协议 (TCP) 负责 TCP/IP 网络上的一组特定功能。 TCP/IP 网络上的每个主机都有一个 TCP 实现，它们都在 OSI 模型的第四层进行逻辑通信。

虽然 OSI 参考模型定义有时在本质上过于理论化，但这个特定的定义在评估现实世界网络中的协议时相当准确。如果某些东西没有指定通信方式，那么它可以说不是协议。

关键概念：网络协议定义了一组规则、算法、消息和其他机制，使网络设备中的软件和硬件能够有效地通信。协议通常描述了在两个或多个设备中的同一 OSI 参考模型层的相应实体之间进行通信的手段。

##### 2.2.2 **“协议”一词的不同用法**

尽管有严格的 OSI 定义，但术语“协议”通常通俗地用于指代网络中的许多不同概念。该词的一些更常见的“替代”用法包括以下内容：

- 协议套件：经常听到“协议”这个词用来指代更恰当地称为协议套件（或堆栈，参考一堆层）的协议集。例如，当 TCP/IP 实际上是一组（大）协议时，它通常被称为“协议”。 有时，技术本身的名称会导致这种混乱。例如，点对点协议 (PPP) 不是一种协议。它包含许多单独的协议，这些协议服务于不同的功能，甚至具有不同的消息格式。因此，PPP 确实是一个协议套件，或者可以将其视为具有“子协议”的协议。

- 其他技术：有时根本不是协议的技术被称为协议，要么不合常规，要么可能是因为人们认为它听起来不错。例如，TCP/IP 远程网络监控 (RMON) 通常被称为协议，而它实际上只是对简单网络管理协议 (SNMP) 的增强——它是一种协议！

那么，协议是否是“真正的”协议真的很重要吗？好吧，网络硬件设备和软件程序肯定不在乎。 J 但是希望在阅读了该术语及其含义后，当您在学习中遇到该词时，您将能够更好地理解该词-尤其是在可能并不总是以完全符合其正式定义的方式使用该词的地方.

#### 2.3 **电路交换和分组交换网络**

在我对网络的“全面概述”中，我将网络描述为使用特殊硬件和软件连接在一起的设备，以允许它们交换信息。这句话中最重要的词是最后一个词：信息。正如您在探索本指南时将看到的，有许多方法可以在联网设备之间交换信息。还有许多分类和描述这些方法以及使用它们的网络类型的方法。

区分网络技术的一种基本方法是基于它们用来确定设备之间信息流动路径的方法。在高度简化的术语中，有两种方法：可以在设备之间预先设置路径，或者可以通过可变路径将数据作为单独的数据元素发送。

电路交换:https://zh.wikipedia.org/wiki/%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2

分组交换:https://zh.wikipedia.org/wiki/%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2

##### 2.3.1 **电路交换**

在这种网络方法中，在两个设备之间建立了一个称为电路的连接，用于整个通信。关于电路的性质的信息由网络来维护。电路可以是一个固定的、始终存在的电路，也可以是一个根据需要建立的电路。即使在通信的两个设备之间可能存在许多通过中间设备的潜在路径，但在任何给定的对话中，只有一个会被使用。这在图1中有所说明。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\funcircuitswitching.png)

​                                                                                                **图 1：电路开关**

在电路交换网络中，在两个设备之间进行通信之前，它们之间要建立一个电路。一旦建立起来，这些设备之间的所有通信都是通过这个电路进行的，即使在它们之间的设备网络上还有其他可能的方式来传递数据。将此图与图2进行对比。

电路交换网络的典型例子是电话系统。当你打电话给某人并且他们接听时，你建立了一个电路连接，并且可以在你之间传递数据，如果需要，可以以稳定的流。无论使用多少中间设备来传输您的声音，该电路的功能都是相同的。只要您需要它就可以使用它，然后终止电路。下次你打电话时，你会得到一个新的电路，它可能（可能会）使用与第一个电路不同的硬件，这取决于当时网络中可用的硬件。

##### 2.3.2  **分组交换**

在这种网络类型中，数据传输不使用特定路径。相反，数据被切成称为数据包的小块，并通过网络发送。数据包可以根据需要进行路由、组合或分片，以使其到达最终目的地。在接收端，这个过程是相反的--数据被从数据包中读取并重新组合成原始数据的形式。分组交换网络更类似于邮政系统，而不是电话系统（尽管这种比较并不完美）。 图2是一个例子。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\funpacketswitching.png)

​                                                                                        **图 2：分组交换**

在分组交换网络中，在设备之间发送数据之前没有设置电路。数据块，即使来自同一个文件或通信，在从一个设备到另一个设备的过程中，也可能采取任何数量的路径。与图1相比

关键概念：网络技术分类的一种方式是基于用于在设备之间传输数据的路径。在电路交换中，首先建立一个电路，然后用于在设备之间传输所有数据。在分组交换中，在通信的设备之间没有创建固定路径；它被分解成数据包，每个数据包都可能采用从发送者到接收者的单独路径。

##### 2.3.3 电路交换和分组交换的比较

在考虑诸如此类的选择时，一个常见的诱惑是问哪个 "更好"--通常情况下，答案是 "都不是"。在有些地方，一种比另一种更适合，但如果一种明显优于另一种，两种方法就不会被使用。

选择交换方法的一个重要问题是网络介质是共享还是专用。你的电话线可以用来建立一个电路，因为你是唯一可以使用它的人--假设你能让那个讨厌的妻子/丈夫/孩子/妹妹/兄弟/父亲/母亲不接电话。

然而，这在局域网中并不奏效，因为局域网通常使用单一的共享介质和基带信令。如果两个设备要建立连接，它们会在很长一段时间内 "锁定 "所有其他设备。把数据切成小块，一次一个地发送，更有意义。然后，如果其他两个设备想进行通信，他们的数据包可以穿插进行，每个人都可以共享网络。

能够让许多设备同时进行通信，而不需要专用的数据路径，这是分组交换在今天成为主流的原因之一。然而，与电路交换相比，分组交换也有一些缺点。其一是由于所有的数据在设备之间并不采取相同的、可预测的路径，一些数据有可能在传输中丢失，或者以不正确的顺序出现。在某些情况下，这并不重要，而在其他情况下，这确实非常重要。

虽然电路交换和分组交换之间的理论区别非常明显，但理解它们的使用方式就比较复杂了。其中一个主要问题是，在现代网络中，它们经常被结合起来。例如，假设你使用拨号调制解调器连接到互联网。你将使用IP数据报（包）来传输高层数据，但它将通过电路交换电话网络。然而，数据可能是以数字包的形式通过电话系统发送的。因此在某些方面，电路交换和分组交换都在同时使用。

另一个问题是电路交换和分组交换之间的关系，以及一项技术是面向连接还是无连接。这两个概念是相关的，但不一样；下一个话题将更详细地讨论这个问题。

注意：请注意，“数据包”一词只是用于指代通过网络发送的消息的几个术语之一。您将遇到的其他术语包括帧、数据报、单元和段。

#### 2.4 **面向连接和无连接协议**

在上一个主题中，我根据网络技术是否使用用于发送数据的专用路径或电路来描述和对比网络技术。区分技术和协议的另一种方式与它们是否使用设备之间的连接有关。这个问题与分组与电路交换的问题密切相关。

##### 2.4.1 **将协议划分为与连接相关的类别**

协议根据其对连接的使用分为两类：

- 面向连接的协议：这些协议要求在传输数据之前在两个设备之间建立逻辑连接。这通常是通过遵循一组特定的规则来完成的，这些规则指定应该如何启动、协商、管理和最终终止连接。通常一个设备首先发送一个打开连接的请求，然后另一个设备做出响应。它们传递控制信息以确定是否以及如何建立连接。如果这成功，则在设备之间发送数据。完成后，连接断开。

- 无连接协议：这些协议不在设备之间建立连接。一旦一个设备有数据要发送给另一个设备，它就会发送它。

##### 2.4.2  **连接方向与电路的关系**

你可能马上就能看出电路和连接这两个概念之间的关系。很明显，为了在两个设备之间建立一个电路，它们也必须被连接。由于这个原因，电路交换网络本质上是基于连接的。这就导致了 "电路交换 "和 "面向连接 "这两个词被交替使用。

然而，这是由于一个常见的逻辑谬误而导致的过度简化--人们错误地认为，如果A意味着B，那么B就意味着A，这就好比说，既然所有的苹果都是水果，那么所有的水果都是苹果。电路需要连接，但电路不是连接的先决条件。因此，有一些协议是面向连接的，而根本不以使用基于电路的网络为前提。

这些面向连接的协议是很重要的，因为它们能够通过没有内在连接意识的分组交换网络实现需要连接的应用。例如，为了使用TCP/IP文件传输协议，你希望能够连接到一个服务器，输入一个登录名和密码，然后执行命令，改变目录，发送或检索文件，等等。这需要建立一个连接，在这个连接上可以传递命令、回复和数据。同样，Telnet协议显然也涉及建立连接--它让你远程使用另一台机器。然而，这两种协议都是在IP协议上（间接地）工作，而IP协议是通过分层的原则，以使用数据包为基础。

为了理解这种工作方式，人们必须对现代网络结构的分层性质有一个基本的了解（正如我在谈到OSI参考模型的章节中详细讨论的那样）。即使数据包可以在低层用于发送数据的机械操作，但高层协议可以通过使用这些数据包中发送的消息来创建逻辑连接。

关键概念：电路交换网络技术本质上是面向连接的，但并非所有面向连接的技术都使用电路交换。面向逻辑连接的协议实际上可以在分组交换网络之上实现，以向需要连接的应用程序提供更高层的服务。

2.4.3  **TCP/IP 中的面向连接和无连接协议**

再来看看TCP/IP，它有两个主要的协议，在OSI参考模型的传输层运行。一个是传输控制协议（TCP），它是面向连接的；另一个是用户数据报协议（UDP），是无连接的。TCP用于需要建立连接的应用（以及TCP的其他服务功能），如FTP；它使用一套规则工作，如前所述，在发送数据之前要协商一个逻辑连接。UDP被其他不需要连接或其他功能的应用所使用，但确实需要UDP在发送数据前不需要进行这种连接所能提供的更快性能。

有些人认为这就像在更高的网络层 "模拟 "电路交换；这也许是一个有点可疑的比喻。即使TCP连接可以用来在设备之间来回发送数据，但所有这些数据确实仍然是以数据包的形式发送的；设备之间并没有真正的电路。这意味着TCP必须处理数据包交换通信的所有潜在隐患，如潜在的数据丢失或以错误的顺序接收数据块。当然，像TCP这样面向连接的协议的存在并不排除对电路交换技术的需要，尽管你也会得到一些关于这个问题的争论。

分层原则还意味着，在互联网的不同层次上，还有其他方式可以将面向连接和无连接协议结合起来。正如一个面向连接的协议可以在一个固有的无连接协议上实现一样，反之亦然：一个无连接协议可以在一个较低层次的面向连接协议上实现。在前面的一个例子中，我谈到了Telnet（需要连接）在IP（无连接）上运行。反过来，IP可以在ATM这样的面向连接的协议上运行。

#### 2.5 消息:包、帧、数据报和信元

许多网络技术都是基于分组交换，它涉及到创建小块的数据，通过网络发送。尽管 "包 "这个词出现在这种方法的名称中，但在联网设备之间发送的数据项目最普遍地被称为消息。"数据包 "是各种类似的词语之一，在不同的情况下用来指从一个设备发送到另一个设备的消息。

在某些情况下，这些不同的术语可能非常有用；仅仅是用于消息的名称类型就可以告诉你关于消息包含的内容。特别是，不同的消息名称通常与在OSI参考模型的特定层运行的协议和技术相关。因此，使用这些不同的名称可以帮助澄清涉及在不同层运作的多个协议的讨论。

不幸的是，这些术语也会引起混乱，因为它们并不总是以一种普遍的甚至一致的方式应用。有些人严格要求只在通常使用的适当技术中应用特定的消息指定，而其他人则完全可以互换地使用不同的术语。这意味着，你应该熟悉不同的消息类型以及它们通常的使用方式，但也要为意外情况做好准备。

##### 2.5.1 **消息的通用名称**

用于消息的最常用术语如下：

- 数据包：这个术语被许多人认为最正确地指的是由在 OSI 参考模型的网络层运行的协议发送的消息。因此，您通常会看到人们提到“IP 数据包”。但是，正如我在本主题开头提到的那样，该术语通常也用于泛指任何类型的消息。

- 数据报：这个术语基本上是“数据包”的同义词，也用于指代网络层技术。它还经常用于指代在 OSI 参考模型的更高级别发送的消息（比“数据包”更常见）。

- 帧：该术语最常与在 OSI 参考模型的低层传播的消息相关联。特别是，它最常用于参考数据链路层消息。当消息格式化由第一层技术执行时，它有时也用于指代物理层消息。帧的名称源于它是通过获取更高级别的数据包或数据报并使用较低级别所需的附加标头信息“构建”它们而创建的。

- 信元：一般来说，帧和数据包可以是可变长度的，这取决于它们的内容；相反，单元格通常是大小固定的消息。例如，以异步传输模式 (ATM) 发送的固定长度的 53 字节消息称为信元。与帧一样，单元通常由在 OSI 模型的较低层运行的技术使用。
- 协议数据单元 (PDU) 和服务数据单元 (SDU)：这些是 OSI 参考中用于描述协议消息的正式术语。第 N 层的 PDU 是第 N 层协议之间发送的消息。它由第 N 层头信息和来自第 N+1 层的封装消息组成，称为第 N 层 SDU 和第 N+1 层 PDU。在您停止摸不着头脑之后，请参阅 OSI 模型数据封装主题，以讨论这可能实际上是有意义的。

我还应该指出，有些协议使用不寻常的名称来引用它们的消息，这些协议在网络世界的其他地方没有使用。一个突出的例子是传输控制协议 (TCP)，它调用它的消息段。

关键概念：分组交换网络上的设备之间的通信基于通常称为消息的项目。这些信息也有其他名称，例如数据包、数据报、帧和信元，它们通常对应于 OSI 参考模型特定层的协议。消息的正式 OSI 术语是协议数据单元 (PDU) 和服务数据单元 (SDU)。

至于本指南及其对这些术语的使用，我已做出特别努力，不会仅根据消息使用的名称来暗示消息的性质，但我确实尝试遵循用于特定技术的最常用名称.例如，通过以太网发送的消息几乎总是被称为以太网帧——例如，它们通常不被称为以太网数据报。但是，我不会组织讨论，以便消息使用的名称类型是确定消息类型的唯一方法。

#### 2.6  消息格式: 报文头部、有效负载、报文尾部

息是用于在网络上发送信息的结构。它们在不同的协议或技术中的使用方式大不相同，正如我在上一主题中所描述的，它们也有许多不同的名字。然而，莎士比亚对名字有正确的看法。信息最重要的不同之处不在于它们被称为什么，而在于它们的内容。

每个协议都使用一种特殊的格式化方法，决定了它所采用的消息的结构。很明显，一个用于连接Web服务器和Web浏览器的消息与一个连接两个以太网卡的低级消息会有很大的不同。这就是为什么我在本指南的不同部分分别描述了几十种不同协议消息的格式。

##### 2.6.1 基本的消息元素

虽然特定消息类型的格式完全取决于使用它的技术的性质，但总体而言，消息往往遵循一个相当统一的整体结构。一般来说，每条消息都包含以下三个基本要素（见图3）。

- 报文头部: 放在实际数据之前的信息。报头通常包含少量的控制信息字节，用于传达有关信息所含数据的重要事实以及如何解释和使用这些数据。它作为不同设备上的协议元素之间的通信和控制环节。
- 数据(载荷)：要传输的实际数据，通常被称为消息的有效载荷（隐喻地借用了航天工业的一个术语！）大多数消息包含某种形式的一些数据，但有些实际上不包含任何数据：它们只用于控制和通信目的。例如，这些可能被用来在发送数据之前建立或终止一个逻辑连接。
- 报文尾部:放在数据之后的信息。页眉和页脚之间没有真正的区别，因为两者一般都包含控制字段。有时也使用这一术语。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\funformatting.png)

​                                                                图3：网络消息的格式

在最一般的情况下，一个消息包括一个要交流的数据有效载荷，由一组页眉和页脚字段括起来。在网络协议中发送的任何特定消息的数据本身将包含一个封装的上层消息，其中包含一个页眉、数据和页脚。这种 "嵌套 "可以在数据沿着协议栈向下传递时多次发生。报头在大多数协议消息中都可以找到，而页脚只在某些消息中。

由于页眉和页脚都可以包含控制字段和信息字段，你可能有理由怀疑有一个单独的页脚有什么意义。一个原因是，某些类型的控制信息是用数据本身的值来计算的。在某些情况下，在发送数据有效载荷时进行计算，然后在页脚的有效载荷之后发送结果，这样做更有效率。一个经常出现在页脚的字段的好例子是冗余数据，如CRC码，可用于接收设备的错误检测。页脚最常与低层协议相关，特别是在OSI参考模型的数据链路层。

**关键概念：**网络信息的一般格式包括一个页眉，然后是信息的数据或有效载荷，后面可以选择一个页脚。除了在消息中的位置外，报头和页脚信息在功能上是相同的；页脚字段只是有时使用，特别是在字段中的数据是根据传输的数据值计算的情况下。

##### 2.6.2 信息元素的解释

一般来说，任何特定的协议都只关心它自己的页眉（和页脚，如果存在的话）。它不太关心消息的数据部分是什么，就像一个送货员只担心驾驶卡车，而不太关心它包含什么。在这些数据的开头，通常是协议堆栈中较高位置使用的其他协议的标头；这也显示在图3中。在OSI参考模型中，一个由特定协议处理的消息被称为其协议数据单元或PDU；其有效载荷中携带的数据是其服务数据单元或SDU。低层协议的SDU通常是高层协议的PDU。关于数据封装的讨论包含了对这个重要概念的全面解释。

#### 2.7 **消息寻址和传输方法：单播、广播和组播消息**

在使用消息发送数据的网络技术中，必须执行许多任务才能成功地将数据从一个地方传输到另一个地方。一种是简单地对消息进行寻址——在其上放置一个地址，以便系统知道它应该去哪里。另一个是传输消息，当然是发送给它的预期接收者。

有几种不同的方法可以通过网络寻址和传输消息。区分消息的一种方法是它们的寻址方式以及接收者的数量。使用哪种方法取决于消息的功能是什么，也取决于发件人是否知道他们正在尝试联系的具体对象，或者只知道一般情况。

##### 2.7.1 **消息传输方式**

为了帮助解释这些不同的方法，我将使用一个现实世界的类比。考虑一个在一个大厅里举行的有 300 人的社交活动。这些人混合在一起，进行着不同的对话。在此设置中可能需要发送不同类型的消息，就像网络一样。

记住这个类比，考虑这三种消息传输，如图 4 所示：

- 单播消息：这些是从一台设备发送到另一台设备的消息；它们不适合其他人。如果您在此社交活动中有朋友，这相当于将他或她拉到一边进行私人谈话。当然，活动中的其他人仍有可能无意中听到您的谈话，甚至偷听。在网络中也是如此——将消息发送到特定计算机并不能保证其他人也不会阅读它，只是他们通常不会这样做。

- 广播消息：顾名思义，这些消息被发送到网络上的每个设备。当一条信息实际上需要与网络上的每个人通信时使用它们，或者当发送站只需要发送给一个接收者但不知道其地址时使用它们。

- 组播消息：这些是前两种类型之间的折衷：它们被发送到一组满足特定标准的站点。这些站点通常以某种方式相互关联，例如提供共同的功能，或者被设置到特定的多播组中。 （请注意，也可以将广播消息视为多播的一种特殊情况，其中组是“所有人”。

回到我们的类比：这有点像一群朋友去这个大型社交大厅，然后在一个小型讨论组中聚在一起——或者也许使用无线电从远处互相交谈。多播需要特殊的技术来明确谁在预期的接收者组中。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\funaddressing.png)

​                                                        **图 4：单播、组播和广播消息寻址和传输**

在这个简化的局域网中说明了网络中寻址和消息传递的三种基本类型。设备#6 正在向#2 发送单播消息，以紫色显示。设备#4 正在向多播组“X”发送多播消息。在这种情况下，该组包括设备#1 和#3，以绿色显示。最后，设备#5 正在发送一个广播消息，该消息将发送到 LAN 上的所有其他设备。

##### 2.7.2  **消息寻址方法**

由于上述传输方法根据接收传输的设备数量和设备而有所不同，因此它们直接与用于寻址的方法相关联：

- 单播寻址：单播传送要求将消息发送给特定的收件人。这是最常见的消息传递类型，因此这种寻址能力几乎存在于所有协议中。

- 广播寻址：广播通常是通过为该功能保留的特殊地址实现的。每当设备看到发送到该地址的消息时，它们都会将其解释为“此消息发送给每个人”的意思。

- 多播寻址：多播是最复杂的消息类型，因为它们需要一种识别一组特定设备的方法来接收消息。通常需要创建几个这样的组，它们的成员资格可能会或可能不会部分重叠。需要一些机制来管理哪些设备属于哪些组。

关键概念：三种基本方法用于在联网设备之间寻址和传输数据。单播传输从一个设备到另一个设备；这是用于大多数消息事务的“正常”方法。广播传输从一个设备发送到网络上所有连接的设备。多播传输被寻址并发送到一组选定的设备。

最后，值得一提的是寻址领域的一个特例。在一些网络或链路中，只有两个设备连接在一起，形成了通常所说的点对点网络。在这种情况下，一个设备发送的所有内容都隐含地用于另一个设备，反之亦然。因此，在点对点链路上的消息寻址不是绝对必要的。

#### 2.8 网络结构模型和客户/服务器及点对点网络

我在讨论网络的优势时提到，网络的建立通常有两个主要目的：连接和共享。如果你的网络上有许多不同的机器，每台计算机都可以与其他计算机的硬件和软件进行交互，以实现各种任务的执行。如何准确地做到这一点，在很大程度上取决于网络的整体设计。

##### 2.8.1 资源共享的角色和结构模型

网络设计中一个非常重要的问题是如何配置网络以实现资源共享。具体来说，网络设计者必须决定是否将资源管理功能专用于构成它的设备。在一些网络中，所有设备在这方面被平等对待，而在另一些网络中，每台计算机在提供服务的整体功能中负责一项特定的工作。在后一种安排中，设备有时被称为有角色，有点像戏剧中的演员。

有两个常见的术语被用来描述这些设置网络的不同方法，有时被称为选择结构模型。

##### 2.8.2 点对点网络

在严格的点对点网络设置中，每台计算机都是平等的，网络中的对等点。每台机器都可以拥有与任何其他机器共享的资源。任何特定设备都没有分配角色，并且每个设备通常运行类似的软件。任何设备都可以并且将向任何其他设备发送请求，如图 5 所示。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\funpeertopeer.png)

​                                                                    **图 5：点对点网络**

在此模型中，网络上的每个设备都被视为对等设备或同等设备。每个设备都可以发送请求和响应，并且没有一个被专门指定为执行特定角色。这种模型更常用于非常小的网络。对比图 6。

##### 2.8.3 客户端/服务器网络

在这种设计中，少量计算机被指定为集中式服务器，并被赋予为大量称为客户端的用户机器提供服务的任务。服务器通常是功能强大的计算机，具有大量内存和存储空间以及快速的网络连接。客户端通常是较小的“常规”计算机，如个人电脑，针对人类使用进行了优化。

术语“客户端/服务器”也经常指协议和软件，它们设计有匹配的、互补的组件。通常，服务器软件在服务器硬件上运行，客户端软件在连接到这些服务器的客户端计算机上使用。网络上的大部分交互是在客户端和服务器之间，而不是在客户端之间，如图 6 所示。服务器软件旨在有效地响应请求，而客户端软件则为网络的人类用户提供接口。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\funclientserver.png)

​                                                                               **图 6：客户端/服务器网络**

在客户端/服务器模型中，少数设备被指定为服务器，并配备了特殊的硬件和软件，使它们能够更有效地同时与多台客户端机器进行交互。虽然客户端仍然可以相互交互，但大多数时候它们向服务器发送各种请求，服务器向它们发送回响应。将此与图 5 中的对等网络示例进行对比。

**关键概念：**网络通常配置为使用两种基本结构模型之一共享资源。在对等网络中，每个设备都是平等的，没有人被分配特定的工作。然而，在客户端/服务器网络中，设备被分配了特定的角色——少数功能强大的计算机被设置为服务器，并响应来自其他设备（即客户端）的请求。客户端/服务器计算也指互补协议元素和软件程序之间的交互，并且由于其在 TCP/IP 和 Internet 应用程序中的流行而越来越受欢迎。

##### 2.8.4 **比较客户端/服务器和对等网络**

客户端/服务器或点对点的选择是另一个在这方面没有“正确答案”的地方。应该使用哪个完全取决于特定网络的需要。

对等网络具有简单和低成本的主要优点，这意味着它传统上用于小型网络。客户端/服务器网络在性能、可扩展性、安全性和可靠性方面具有优势，但设置起来更加复杂和昂贵。这使其更适合大型网络。然而，随着时间的推移，客户端/服务器网络一直在稳步发展，即使在较小的网络上也是如此。许多年前，使用点对点模型甚至可以看到拥有 20 到 50 台机器的网络。今天，由于集中资源服务的优势，即使只有六台机器的网络有时也会以客户端/服务器模式设置。

客户端/服务器网络的普及具有讽刺意味，因为在某些方面，它实际上是几十年前大型大型机时代的倒退。带有附加终端的大型机可以被认为是一个客户端/服务器网络，大型机本身是服务器，终端是客户端。当然，这个类比并不完美，因为现代客户端计算机比大型机上的愚蠢终端所做的工作要多得多。

客户端/服务器结构模型成为主导的原因之一是它是世界上最大的网络使用的主要模型：互联网。客户端/服务器架构是大多数 TCP/IP 协议和服务的基础。例如，术语“Web 浏览器”实际上是“Web 客户端”的另一个名称，而“Web 站点”实际上是“Web 服务器”。

#### 2.9 网络类型和规模

有时很难理解网络的原因之一是有很多不同的类型！当有人谈论“网络”时，这可能意味着任何东西，从在公寓里连接在一起的两台计算机到拥有数百万个节点的全球实体。每个网络都是独一无二的，每个网络在满足不同个人和组织的通信和数据共享需求方面都发挥着重要作用。事实上，网络的多样性和灵活性是其最重要的优势之一。

在本节中，我通过根据大小和范围对它们进行区分来描述存在的主要网络类型，并展示如何使用每种类型和大小。我首先讨论 LAN、WLAN 和 WAN，以及这三个主要类别的一些变体。我探讨了与各种规模的网络以及它们的使用方式相关的许多术语，包括网段、子网、互联网络、内联网和外联网

##### 2.9.1 局域网 (LAN)、无线 LAN (WLAN) 和广域网 (WAN) 和变体（CAN、MAN 和 PAN）

区分和对比网络的两种最基本的方式是它们连接的设备之间的相对距离，以及用于在它们之间进行通信的一般机制。做出这些区分的原因是，网络的技术需求因您尝试覆盖的地面数量以及您想要传输和接收信息的整体方式而有很大差异。

<u>**基本网络分类**</u>

**局域网 (LAN)**：将彼此相对较近的计算机连接在一起的网络——通常在同一房间或同一建筑物内。当大多数人想到联网 PC 和其他小型计算机时，他们通常会想到这一点。绝大多数常规 LAN 使用电缆连接，因此术语“LAN”本身通常意味着有线 LAN，但并非总是如此。

**无线局域网（无线 LAN 或 WLAN）**：使用无线电频率或光连接设备的局域网。 WLAN 可以完全是无线的，但大多数不是：它们通常将无线设备相互连接，也连接到网络的有线部分。由于大多数无线技术的限制，无线局域网通常连接彼此非常接近的设备，通常最多在几百英尺内。

**广域网 (WAN)**：将设备或其他网络连接在一起的距离远大于局域网的实际距离。如果设备之间的距离可以用英里来衡量，那么您通常会使用 WAN 而不是 LAN 技术来连接它们。

通常情况下，WAN 用于将物理上遥远的 LAN 连接在一起。例如，一家在两个不同城市设有办事处的公司通常会在每栋建筑物中建立一个 LAN，然后在 WAN 中将它们连接在一起。我还认为大多数 Internet 访问技术是广域网的一种形式，尽管有些人可能不同意这一点。还有一个术语无线广域网（WWAN），它只是指使用无线技术的广域网。

<u>**网络类分类的难点**</u>

与网络世界中的大多数其他区别和分类一样，这些不同定义之间的界限并不是很具体。正如我已经提到的，无线局域网通常不是完全无线的，因为它们包含有线元素。类似地，试图确定网络何时是“本地”以及何时是“广域”是困难的。

在精确区分这些网络类别上花费太多精力也有点毫无意义。在某些情况下，决定使用哪种技术的不是定义，而是指示您拥有什么样的网络的技术！由于某些协议是为广域网设计的，如果您使用它们，许多人会说您有一个 WAN，即使该技术中的所有设备都彼此靠近。另一方面，一些 LAN 技术允许使用可以运行数英里的电缆。大多数人仍将一英里长的以太网光纤链路视为 LAN 连接，即使它可能跨越 WAN 距离。

<u>**“中级”网络类型**</u>

LAN 和 WAN 之间的界限越来越模糊。一个原因是出现了跨越这些更熟悉的术语之间界限的“中间”网络类型。

**校园区域网络 (CAN)**：校园区域网络 (CAN) 是为跨越同一位置的多个建筑物而创建的网络，例如大学校园。校园区域网络是一个“灰色地带”，因为无论是 LAN 还是 WAN 本身都不适合这种类型的应用。通常，LAN 和 WAN 技术的混合用于校园网络，这取决于校园的特点和组织的需要。

**城域网 (MAN)**：您有时可能会看到的另一个“中间”术语是城域网或 MAN。顾名思义，这是指跨越特定小区域或城市的网络。城域网既可以被认为是覆盖有限地理区域的“小型 WAN”，也可以被认为是覆盖比通常与本地网络相关的区域更大的区域的“大型 LAN”。无线城域网当然有时也称为 WMAN。 IEEE 802.16 是 WMAN 标准的一个示例。

**个域网 (PAN)**

最后，还有一个偶尔使用的术语应该提到：个人区域网络 (PAN)。这种类型的网络通常意味着一个范围只有几英尺的非常小的 LAN，主要用于将一个人（或非常小的群体）使用的设备连接在一起。该术语最常用于指代蓝牙/IEEE 802.15 无线技术，因此您有时会看到术语无线个人区域网络 (WPAN) 和 PAN 可互换使用。

**关键概念：**网络通常按大小和一般通信方法分为三类。局域网 (LAN) 通常使用电缆将邻近的设备连接在一起。无线局域网 (WLAN) 类似于有线局域网，但使用射频或光技术来连接设备而无需使用电线。广域网 (WAN) 将远程设备或 LAN 相互连接起来。园区网（CAN）和城域网（MAN）在总体规模上介于 LAN 和 WAN 之间；个域网 (PAN) 类似于非常小的 LAN，并且通常以无线 PAN (WPAN) 的形式出现。

##### 2.9.2 网段、网络、子网和互联网络

网络如此强大的原因之一是，它们不仅可以用来将计算机连接在一起，还可以将计算机群连接在一起。因此，网络连接可以存在于多个层面；一个网络可以连接到另一个网络，而这个整体又可以连接到另一组网络，以此类推。这方面的最终例子当然是互联网，这是一个巨大的网络集合，它们被相互连接成......我敢说是一个 "网"？

这意味着一个更大的网络可以被描述为由几个较小的网络甚至是链接在一起的部分网络组成。相反，我们可以谈论将单个网络或网络部分组装成更大的结构。这个概念之所以重要，是因为某些技术在从高层次观察整个大型网络时可以得到最好的解释，而另一些技术确实需要我们深入了解组成网络部分如何工作的详细层次。

<u>**描述网络规模的常用术语**</u>

随着时间的推移，网络世界中出现了一系列术语来描述更大和更小网络的相对规模。理解这些不同的术语很重要，不仅可以帮助您理解您所读到的有关网络的内容，而且因为它们是网络设计中的重要概念。对于局域网来说尤其如此，在局域网中，关于如何设置网段以及如何将它们相互连接的决策对网络的整体性能和可用性有重要影响。以下是一些最常见的。     

<u>**网络**</u>

这是此处提到的术语中最不具体的。基本上，网络几乎可以是任何规模，从两台设备到数千台设备。然而，当网络变得非常大并且显然由连接在一起的较小网络组成时，它们通常不再被称为网络而是互联网，正如我们稍后将看到的那样。尽管如此，经常听到有人提到“微软的企业网络”之类的东西，其中显然包含数千甚至数万台机器。

<u>**Subnetwork (Subnet)**</u>

子网是网络的一部分，或者是更大互联网络的一部分的网络。这个术语也是一个相当主观的术语。当子网是非常大的网络的一部分时，它们实际上可能相当大。

缩写词“subnet”可以泛指子网，但在 TCP/IP 寻址的上下文中也具有特定含义。

<u>**Segment (Network Segment)**</u>

网段是网络的一小部分。在某些情况下，段与子网相同，并且这些术语可以互换使用。然而，更多时候，术语“段”意味着比子网更小的东西。网络通常被设计成为了提高效率，将彼此相关或由同一组人使用的计算机放在同一网段上。

这个术语有明显的问题，因为它通常以两种不同的方式使用，特别是在与以太网相关的讨论中。最早的以太网形式使用同轴电缆，同轴电缆本身被称为“网段”。该段由与其连接的所有设备共享，并成为网络的冲突域（该短语通常指的是硬件设备的集合，一次只能传输一个。

每个以太网物理层都有特定的规则，即一个网段上可以有多少设备，可以将多少网段连接在一起等等，具体取决于所使用的网络互连设备类型。集线器和中继器等设备用于通过将这些电缆段连接到更广泛的网络中来扩展冲突域。随着时间的推移，术语“碰撞域”和“段”开始互换使用。因此，今天的“段”既可以指特定的电缆，也可以指电连接的电缆集合，这些电缆代表单个冲突域。

**网络（或互联网）**

大多数情况下，这是指通过将较小的网络连接在一起形成的较大的网络结构。同样，该术语可以具有一般含义或特定含义，具体取决于上下文。在某些技术中，互联网只是一个以网络为组件的非常大的网络。在其他情况下，网络与基于设备连接方式的互联网络不同。

后一个定义的一个重要示例是 TCP/IP，其中网络通常指的是在 OSI 参考模型的第二层链接的机器集合，使用以太网或令牌环等技术以及集线器和交换机等互连设备。当这些网络在第三层链接在一起时，一个互联网络就形成了，使用在网络之间传递互联网协议数据报的路由器。当然，这是高度简化的，但是在研究 TCP/IP 时，当您遇到术语“网络”和“互联网络”时，您应该牢记这一点。

<u>关键概念：</u>经常使用几个术语来描述网络和网络部分的相对大小。最基本的术语是网络本身，它可以指代大多数东西，但通常表示使用 OSI 第二层技术连接的一组设备。子网是网络（或互联网络）的一部分，就像段一样，尽管后者在某些技术中通常具有更具体的含义。互联网通常指的是一个非常大的网络，或者具体指的是一组使用第三层路由器连接的第二层网络。

##### 2.9.3 互联网、内联网和外联网

我在讨论分段、网络、子网和互联网络的主题中提到，互联网确实是互联网络之王。毕竟，除非你对它进行了定义，否则你不会被称为“那个”东西。

事实上，互联网不仅仅是一个大型互联网络，而是更多。互联网不仅被定义为在世界各地相互连接的计算机，而且被定义为它提供的一组服务和功能。不仅如此，互联网还定义了一种特定的做事方式，即在人和公司之间共享信息和资源。虽然这样说可能有点夸张，但对许多人来说，互联网是一种生活方式。随着互联网在 1990 年代的使用和普及率爆炸式增长，许多人意识到互联网上使用的技术和技术如果也适用于公司内部网络也会很有用。内部网这个术语是用来指代一个像“私人互联网”一样运作的内部网络。它来自前缀“intra”，意思是“内部”。当然，“inter”是“intra”的反义词，所以有人认为“intranet”是“internet”的反义词。事实上，大多数内联网也是互联网络！

好像从行话的角度来看这还不够糟糕，流行语秃鹰然后决定更进一步。如果 Intranet 被“扩展”以允许不仅严格地从组织内部访问它，而且还允许主要公司以外的人员或组访问它，这有时称为 Extranet。 “额外”当然是一个前缀，意思是“外面”或“超越”。

所以，外联网是一种内部的、私有的互联网，呃，嗯，不完全是内部的。 Extranet 是扩展的 Intranet，它实际上是一种类似于 Internet 的 Internet。 （您可以开始明白为什么我不喜欢这些花哨的术语。但是，我无法选择它们；我只需要帮助您理解它们！）外联网不是公开的，对所有人开放——它由一个私人组织控制。同时，它也不是完全私有的。

如您所见，互联网、内联网和外联网之间的界限从一开始就非常模糊，随着整个计算世界变得更加紧密地集成在一起，这些概念正在迅速融合成一片弥漫的灰色。例如，即使您有一个完全私有的 Intranet，您也希望将其连接到 Internet 以与“外部世界”通信并允许访问 Internet 资源。外联网可以部分通过公共互联网基础设施使用虚拟专用网络 (VPN) 等技术实现。我想你明白了。

将所有这些概念结合在一起的关键是它们都使用“互联网技术”，这个术语本身就有些模糊。这通常是指使用 TCP/IP 协议套件，它是 Internet 的定义技术，以及 Internet 上可用的一组服务。

底线是，被告知一家公司有一个“内联网”或“外联网”——而不是一个普通的、无聊的“网络”——根本不会告诉你太多。最好不要依赖口号，而是看网络或互联网络本身的潜在特征。此外，在设计这样的网络时，请专注于使用有意义的技术和协议——让营销人员决定以后如何称呼它。

<u>关键概念：</u>通用名词internet是internetwork这个词的缩写，而专有名词Internet是指我们都知道和使用的TCP/IP网络的全球互联网络。 Intranet 一词是指使用与 Internet 一样的 TCP/IP 技术的内部网络。外联网就像一个延伸到公司外部的个人或组织的内联网。所有这些术语的使用都可能模棱两可，因此必须小心确定它们在任何给定上下文中的确切含义。

#### 2.10 **网络性能问题和概念**

网络主要是将设备连接在一起，以便在它们之间共享信息。由于这个想法是将数据从一个地方发送到另一个地方，任何网络的一个非常重要的特征就是它的速度：数据传输和接收的速度有多快？事实证明，速度问题只是决定网络整体性能的几个问题之一。这个问题非常复杂，我决定有必要在一个部分介绍各种相关主题，并帮助您了解如何以平衡的方式看待网络性能。当谈到网络性能时，那里有很多炒作！

在计算世界中，性能通常是任何系统或硬件设备最常讨论但最不为人所知的特性之一。网络也是如此。例如，大多数人都知道他们网络硬件的原始吞吐量等级，甚至可能开始根据这些数字得出关于其能力的结论。然而，许多人没有意识到他们永远不会在现实世界中真正实现“额定”的性能量。

大多数其他与性能相关的“微妙”问题通常也被忽略或误解，例如软件驱动程序对硬件性能的影响，以及某些应用程序需要的不仅仅是原始比特速度——它们需要可靠的数据传输。但除此之外，与网络性能相关的最重要问题之一是了解您的需求是什么，以确保您不会为不需要的性能花费太多钱，或者更糟糕的是，创建一个网络不能满足你的要求。

在本节中，我以某种方式讨论与网络相关的各种性能问题和概念。首先，我尝试将性能放在上下文中，并将其与非性能问题进行对比。然后，我将讨论几个关键的性能术语和指标：速度、带宽、吞吐量和延迟。我还谈到了一些用于衡量网络性能的单位。然后，我解释了网络的实际性能与其理论性能有何不同，并讨论了影响网络性能的因素。最后，我对比了全双工和半双工网络操作，并讨论了服务质量，这是一个在将网络用于实时应用（如流式多媒体）时尤其重要的概念。

##### 2.10.1 了解网络性能

性能可能是计算机行业的“流行语之母”。有很多人认为它是任何计算机或计算机系统以及任何网络的最终目标。很多人花费大量金钱和时间试图最大化它。这是有充分理由的：性能非常重要。一个不能提供足够性能的网络根本无法为那些依赖它的人完成工作。但是，保持正确的性能非常重要。成功地最大化性能要求您首先退后一步，从全局角度看待问题。

您必须问自己的第一个问题也是最本质的问题：性能对您来说有多重要？在回答这个问题之前，请回想一下古老的赛车格言：“速度要花钱——你想跑多快？”虽然在某些情况下，您只需多花一点钱就可以在网络中获得更好的性能，但总的来说，如果不以某种方式付费，您将无法获得更高的性能。这可能意味着网络的更多美元成本，或者可能意味着某些非性能特征的权衡。

您必须问自己的第一个问题也是最本质的问题：性能对您来说有多重要？在回答这个问题之前，请回想一下古老的赛车格言：“速度要花钱——你想跑多快？”虽然在某些情况下，您只需多花一点钱就可以在网络中获得更好的性能，但总的来说，如果不以某种方式付费，您将无法获得更高的性能。这可能意味着网络的更多美元成本，或者可能意味着某些非性能特征的权衡。

我之所以要努力保持性能的一个主要原因是很多其他人不这样做，尤其是那些试图向你推销东西的人。公司不断推出“最新最好的”高性能网络技术。他们试图出售它们的通常方式是试图说服每个人，如果没有最新的进展，他们就无法生存。他们“需要”升级 - 立即，如果不是更早的话！好吧，事实并非如此。仅举一个例子，尽管现在以太网硬件的运行理论吞吐量为每秒 10,000 兆比特，但仍有许多旧网络以百分之一甚至千分之一的速度继续正常工作！

最后，请记住，设计网络通常不是一个“不可逆”的永久决定。网络可以升级和扩展。虽然在任何网络中建立一些“松弛”以允许增长是谨慎的，但在以后可以进行更改时花太多钱来规划未来是不明智的。考虑到网络硬件价格随着时间的推移而下降，这一点尤其正确。同样，这是在未来绩效计划和预算之间取得适当平衡的问题。

##### 2.10.2 平衡网络性能与关键的非性能特征

我们都知道性能对任何网络都非常重要。然而，任何组建网络的人也必须关注许多不同的非性能特征。根据网络的不同，这些对于网络用户来说可能与性能一样重要，甚至可能更重要。不仅如此，非性能问题通常会与性能进行权衡，事实上，通常必须减少一个问题才能提高性能。

因此，如果您想创建一个非常高性能的网络，您需要了解可能需要妥协的关键非性能网络特征。以下是其中一些问题，特别是它们与性能问题的关系：

- 设计和实施成本：除非你有无限money ，否则你需要关心网络的成本。如上一主题所述，成本是与性能的主要权衡。走得更快会花费更多的钱——并非总是如此，但通常如此。

- 质量：网络质量取决于所用组件的质量及其安装方式。质量很重要，因为它会影响此处描述的所有因素，例如可靠性和易于管理，以及性能。质量不直接与性能进行权衡——您可以设计高质量、高性能的网络——但它确实与性能竞争资源，例如预算。在其他条件相同的情况下，实施高质量、高性能网络的成本要比高质量、低速网络高得多。

- 标准化：网络协议和硬件既可以设计成满足普遍接受的标准，也可以设计成非标准的专有标准。标准设计几乎总是可取的，因为它们使互操作性、升级、支持和培训更容易。专有标准可能包括提高性能的增强功能，但可能会增加成本和/或使管理更加困难。

- 可靠性：这与其他几个问题有关，尤其是质量和性能。较快的网络不一定不可靠，但要像较慢的网络一样可靠地运行它们更加困难和昂贵。

- 可扩展性和可升级性：在创建网络时始终规划未来非常重要。更高性能的网络可能更难扩展；它们的扩展当然更昂贵。再次强调，现在实施具有未来需求容量的网络，而不是在必要时进行升级，这是一个重要的网络设计决策。

- 易于管理和维护：与速度较慢的网络相比，性能更高的网络需要更多的工作和资源来管理和维护，并且更有可能需要故障排除

- 场所和实用问题：高速网络的实施可能会受到物理场所的限制，或者可能会影响它们的布局方式。选择更高速度的选项可能需要部署更多的基础设施，从而增加成本。典型的例子是在家庭或小型办公室网络的有线和无线选项之间进行选择：使用电线可以走得更快，但你真的想走线吗？

无论如何，现在您已经了解了性能如何与网络中的其他一些关键问题取得平衡。这个话题的想法并不是要说服你不要建立一个高性能的网络，只是让你知道你将付出的部分代价。

**关键概念：**虽然性能是任何网络最重要的特征之一，但还有其他同样重要的特征。在许多情况下，网络的成本、质量、可靠性、可扩展性、可维护性和其他属性实际上可能会与整体性能进行权衡。您希望网络运行得越快，就越难以确保将这些其他属性保持在足够高的水平。

##### 2.10.3 性能测量：速度、带宽、吞吐量和延迟

有许多术语通常用于指代网络性能的各个方面。其中一些彼此非常相似，您会经常看到它们被使用——在许多情况下，被误用甚至滥用。 对我们来说，看看它们中的每一个是个好主意，因此，讨论它们的常用方法以及它们的真正含义。

然而，不仅仅是与性能相关的不同术语的问题，更重要的现实是性能有多个方面。根据应用程序，通过网络发送数据的方式可能比传输数据的原始速度更重要。特别是，许多多媒体应用程序需要实时性能；他们需要以能够稳定交付的方式发送数据。出于这些目的，原始速度不如一致的速度重要，这是一个通常未被正确认识的问题。

**性能衡量术语**

让我们看一下最常见的性能测量术语，看看它们的含义。

**speed 速度**

这是网络中使用的最通用的性能术语。因此，它可能意味着任何事情。然而，最常见的是，它指的是特定网络技术的额定或标称速度。例如，快速以太网的标称速度为每秒 100 兆比特；正是因为这个原因，它通常被称为 100 Mbit 以太网，或被赋予诸如“100BASE-TX”之类的名称。

额定速度是网络中最大的“性能魔数”——你会看到它用于标记硬件设备，许多人将这些数字视为真正的“网络速度”。使用标称速度等级的问题在于它们只是理论上的，因此，讲述的故事并不完整。由于现实世界的性能因素，没有一种网络技术可以在其全额定速度下运行，而且许多运行速度大大低于它。

诸如“100 Mbps 以太网”之类的速度等级通常也被称为一项技术的“吞吐量”，尽管一项技术的最大理论速度更类似于带宽而不是吞吐量，并且两者并不完全相同。在接下来的两个要点中对此进行了更多介绍。

**Bandwidth 带宽**

带宽是一个广泛使用的术语，通常指网络或数据传输介质的数据承载能力。它表示单位时间内可以从一个点传递到另一个点的最大数据量。该术语来自对电磁辐射的研究，它指的是用于传输数据的频带宽度。它通常在理论背景下给出，但并非总是如此。

带宽仍然在这两个意义上使用：“频带宽度”和数据容量。例如，无线电频率用于无线技术，这些技术的带宽可以指射频频带有多宽。但是，更常见的是，它指的是可以通过网络发送多少数据，并且通常以相对术语使用。例如，对于 Internet 访问，电缆或 xDSL 被认为是“高带宽”访问；使用常规模拟调制解调器是“低带宽”。

**Throughput吞吐**

吞吐量是衡量每单位时间可以通过网络、通道或接口发送多少实际数据的量度。虽然吞吐量可以像带宽一样是一个理论术语，但它更常用于实际意义上，例如，测量“现实世界”中通过网络实际发送的数据量。吞吐量受带宽或额定速度的限制：如果以太网的额定速度为每秒 100 兆比特，这就是吞吐量的绝对上限，即使您通常得到的吞吐量会少很多。因此，您可能会看到有人说他们正在使用 100 Mbps 以太网，但在他们的网络上获得了 71.9 Mbps 的吞吐量。

带宽和吞吐量这两个术语经常可以互换使用，尽管它们实际上并不完全相同，正如我刚刚讨论的那样。

**关键概念：**最常用于指代网络整体性能的三个术语是速度、带宽和吞吐量。这些是相关的并且经常可以互换使用，但并不完全相同。速度一词是最通用的，通常是指网络技术的额定或标称速度。带宽既可以指技术使用的频带，也可以更普遍地指数据容量，在这种情况下，它更多地是一种理论度量。吞吐量是在给定时间段内通过通道流过多少数据的特定度量。它通常是一种实际测量。

**Latency 时延**

这个非常重要但经常被忽视的术语是指通信通道或网络上数据传输的时间。延迟的一个重要方面是从发出数据请求到数据开始到达需要多长时间。另一个方面是设备对发送数据的时间有多少控制，以及网络是否可以布置为允许在一段时间内一致地交付数据。低延迟被认为比高延迟更好。

<u>**应用性能度量术语**</u>

与所有网络术语一样，没有硬性规定；许多人对上述术语的使用相当松散。您甚至会看到冗余部门的“吞吐量带宽”、“带宽吞吐量”和其他迷人的发明。 J 更多时候，您只会看到很多混杂的术语用法，尤其是关于网络可以根据其额定速度处理哪些数据流的虚假结论。更糟糕的是，速度等级通常以每秒比特数指定，但吞吐量可能以每秒比特数或字节数给出。

一般来说，“速度”、带宽和吞吐量会受到很多关注，而延迟则很少。然而，延迟考虑对于许多实时应用程序来说非常重要，例如流式音频和视频以及交互式游戏。事实上，它们通常比原始带宽更重要。

例如，假设您搬到农村家庭，您选择的 Internet 访问是常规的 28.8 kbps 调制解调器连接或花活的卫星 Internet。销售卫星连接的公司称其为“宽带”，并宣传非常高的额定速度——400 kbps 或更高。他们非常重视“比拨号快 10 倍以上”，而且他们肯定会为这项非常高科技的服务收取高额费用。这是一个大满贯，对吧？

错误的。卫星连接具有高带宽，但由于信号往返卫星所需的时间，延迟非常差（高）。从微软下载那个漂亮的 150 MB 小补丁绝对比调制解调器好得多。但是，由于传输延迟或滞后，它比调制解调器更糟糕，因为它与您的好友通过 Internet 玩最新的在线视频游戏。随着信号在卫星和地球之间反弹，你在游戏中所做的每一步都会延迟半秒以上，这使得在线游戏几乎不可能。因此，卫星互联网是否值得额外的钱完全取决于你打算用它做什么。

**关键概念：**带宽和吞吐量表示数据在网络中移动的速度，延迟描述了数据传输方式的性质。它最常用于描述数据请求时间与数据到达时间之间的延迟。对于某些应用程序而言，具有非常高吞吐量和不良（高）延迟的网络技术可能比具有相对低吞吐量但良好（低）延迟的网络技术更差。

##### 2.10.4 了解计量单位

制造网络硬件的人，或撰写材料试图告诉你如何操作它的人，使用了许多术语来描述性能，如吞吐量和带宽。此外，他们还使用几种不同的单位来衡量性能。不幸的是--我相信你知道这一点--这些单位经常被错误地使用，而且它们在名称上也非常相似。更糟糕的是，它们还有重叠的缩写，很多人在使用这些缩写的时候，并没有说清楚他们到底在说些什么。很不好？

**"比特和字节"**
第一个问题是 "臭名昭著的字母B"。或者说，我应该说，"大B "和 "小B "的问题。根据流行的惯例，大写的 "B "应该用来表示 "字节"，小写的 "b "表示比特--这就是本指南中始终使用这些缩写的方式。(一个字节通常是8个比特；有时也使用八位数这个术语。如果你不熟悉这些术语，请参考二进制基础知识的入门读物，在那里你还可以找到与字节和八位数有关的小 "争议 "的讨论）。

不幸的是，这个惯例并不是每个人都严格遵守的。因此，你可能偶尔会看到 "b "被用来指代字节，而 "B "被用来指代比特。这种 "b "和 "B "业务有时会造成巨大的混乱，人们会把比特误认为是字节，并意外地认为网络的运行速度比实际情况快或慢八倍。

在查看速度等级时要记住，它们几乎总是以比特而不是字节为单位。56k调制解调器 "中的 "56k "意味着56,000比特，而不是56,000字节的理论传输速度。(即使有人称它为 "56K "调制解调器也是如此。)同样，快速以太网的运行速度为每秒100兆比特，而不是兆字节，1.544 Mbps的T-1链路每秒发送的理论最大值为1,544,000比特。这一点，至少，通常是相当一致的。

然而，当涉及到吞吐量的测量时，比特和字节都被使用，所以你必须要小心。原始吞吐量值通常以每秒比特为单位，但许多软件应用程序以每秒字节数报告传输率，包括许多网络浏览器和FTP客户端程序。这往往导致用户想知道为什么他们只得到预期下载或传输速度的八分之一。

**吞吐量测量单位和千、万、千兆乘数**

比特吞吐量的标准单位是 "比特/秒"，通常缩写为 "bit/s"、"bps "或 "b/s"。字节单位是 "字节/秒"，缩写为 "bytes/s"、"Bps "或 "B/s"--除非一些残忍的作者决定使用小写的 "b "来迷惑你。这意味着100BASE-TX（100 Mbps）以太网的最大理论吞吐量约为12MB/s。在上下文不清楚的情况下，最好把单位写成 "100Mbits/s "或 "12Mbytes/s"，当然，我在本指南中尽量这样做。

你偶尔也会看到，特别是在处理通信领域的问题时，会看到以字符/秒或 "cps "来衡量的吞吐量。在大多数计算机系统（包括个人电脑）中，每个字符占一个字节，所以 "cps "相当于 "bytes/s"、"B/s "或 "Bps"。

当然，大多数网络技术不是每秒只移动几个比特和字节，而是移动几千、几百万，甚至几十亿。因此，大多数速度等级不是以比特/秒为单位，而是以千比特（kb）、兆比特（Mb）或千兆比特（Gb）/秒为单位，同样的事情也可以用于字节。因此，我们发现诸如 "100 Mbps以太网 "或 "700 kb/s ADSL "等术语。

在这里，我们遇到了另一个问题：术语 "kilo"、"mega "和 "giga "的十进制和二进制版本都存在。例如，一百万（"mega"）前缀的十进制形式是106或1,000,000，而二进制形式是220或1,048,576。这种大约5%的差异导致了各种混乱。当你看到这些缩写时，请记住，在网络中，它们几乎总是指十进制形式。因此，100Mbps以太网的额定速度是100,000,000比特/秒，而不是104,857,600比特/秒。

**关键概念：**最常用于表示网络吞吐量的单位是每秒位数或 bps。该术语通常以千、百万或数十亿表示为 kbps、Mbps 或 Gbps。它几乎总是使用十进制，而不是二进制版本的千、兆或千兆乘数。

**信令速率和波特率**

最后，还有一个你在讨论调制解调器和其他一些技术时会经常遇到的术语：波特。这是以电报先驱Jean Maurice Emile Baudot（1845-1903）的名字命名的，是一个衡量信号在每秒钟内发生的变化或转换次数的单位。因此，如果信号每秒从 "一 "值变为 "零 "值（或反之）一百次，就是100波特的速率。

在早期非常慢的调制解调器中，每个比特转换都是对一个比特数据的编码。因此，300波特的调制解调器在理论上每秒最多发送300比特的数据。这导致人们混淆了 "波特 "和 "每秒比特 "这两个术语--而且这两个术语仍然被频繁地交替使用。例如，你通常会听到人们把28.8kbps的调制解调器称为 "28,800波特 "的运行速度。

但这两个单位实际上是不一样的；一个测量数据（信道的吞吐量），另一个测量转换（称为信令率）。现代调制解调器使用先进的调制技术，在每个转换中编码超过一个比特的数据。一个28,800 bps的调制解调器通常在每个转换中编码9个比特；它以3,200波特运行，而不是28,800波特（后者是3,200和9的乘积）。事实上，调制解调器不可能在传统的电话线上以28,800波特运行，它超过了电话线的频率带宽。这就是为什么要使用先进的调制方式，将更多的数据编码到每个转换中的原因。

关键概念。波特和bps这两个单位经常被等同对待，但并不一样。波特衡量的不是网络的吞吐量，而是它的信号速率，即信号在每秒钟内改变数值的次数。由于现代编码和调制技术经常将大于或小于一个比特值编码到每个这样的转换中，网络技术的吞吐量和波特率通常是不同的。

哇，当我开始写这个题目的时候，我从来没有设想过我要写这么多，只是为了解释一个应该相当简单的东西。让电脑人把简单的事情复杂化，但好吧，你有了它。至少你现在应该能够弄清楚所有这些术语是怎么回事，并且可以向你的朋友和亲戚解释为什么他们的56k调制解调器实际上不是以56,000波特运行的。J

最后，还有一个你在讨论调制解调器和其他一些技术时会经常遇到的术语：波特。这是以电报先驱Jean Maurice Emile Baudot（1845-1903）的名字命名的，是一个衡量信号在每秒钟内发生的变化或转换次数的单位。因此，如果信号每秒从 "一 "值变为 "零 "值（或反之）一百次，就是100波特的速率。

在早期非常慢的调制解调器中，每个比特转换都是对一个比特数据的编码。因此，300波特的调制解调器在理论上每秒最多发送300比特的数据。这导致人们混淆了 "波特 "和 "每秒比特 "这两个术语--而且这两个术语仍然被频繁地交替使用。例如，你通常会听到人们把28.8kbps的调制解调器称为 "28,800波特 "的运行速度。

但这两个单位实际上是不一样的；一个测量数据（信道的吞吐量），另一个测量转换（称为信令率）。现代调制解调器使用先进的调制技术，在每个转换中编码超过一个比特的数据。一个28,800 bps的调制解调器通常在每个转换中编码9个比特；它以3,200波特运行，而不是28,800波特（后者是3,200和9的乘积）。事实上，调制解调器不可能在传统的电话线上以28,800波特运行，它超过了电话线的频率带宽。这就是为什么要使用先进的调制方式，将更多的数据编码到每个转换中的原因。

**关键概念**: 波特和bps这两个单位经常被等同对待，但并不一样。波特衡量的不是网络的吞吐量，而是它的信号速率，即信号在每秒钟内改变数值的次数。由于现代编码和调制技术经常将大于或小于一个比特值编码到每个这样的转换中，网络技术的吞吐量和波特率通常是不同的。

##### 2.10.5 理论和现实世界的吞吐量，以及影响网络性能的因素

在评估网络性能时，请记住，理论上的额定速度和 "现实世界 "的吞吐量之间总是存在着差异。如果你很幸运--确切地说，如果你的网络设置得很好--那么这种差异就相对较小，但仍然很重要。否则，差异可能会非常大。请注意，理论性能和实际性能之间的差异没有 "可忽略不计 "的选项,厂商的话听听就行。

**现实世界性能影响因素的主要类别**
导致网络或通信方法应该能够做到的和实际能够做到的之间存在差异的原因有很多。我认为它们一般分为三类：正常的网络开销、外部性能限制因素和网络配置问题。

<u>**正常的网络开销**</u>

每个网络都有一定程度的正常网络开销，它保证你永远无法将任何连接的带宽全部用于数据。以10 Mbit/s以太网为例。当然，这条线路可能每秒能传输10,000,000比特，但并不是所有这些比特都是数据！有些是用来包装和寻址的。有些是用来包装和寻址的数据--数据不能以原始形式被扔到网络上。另外，这些比特中有许多被用于一般的开销活动，处理传输中的碰撞，等等。任何网络技术都有天然的低效率。

甚至在这之外，还有其他开销问题。任何网络交易都涉及许多不同的硬件和软件层，从应用和操作系统到硬件，每个层都存在开销。这些开销意味着你通常会失去一个局域网技术 "额定 "速度的至少20%，有时甚至更多。例如，在一个普通的10Mbit/s以太网网络上，7Mbit/s的用户数据吞吐量实际上是非常好的。 减去20% **可能**是实际的性能参数，我们遇到的真实情况一半都比这要糟糕。

**<u>外部性能限制因素</u>**

有一些外部因素会限制网络的性能。这里的重要问题包括硬件处理数据的能力，以及两个节点之间数据传输链中存在的任何带宽限制。硬件问题最常出现在非常快的网络技术中。考虑一下两台普通PC之间的千兆（1000 Mbps）以太网连接。在 "理论上"，这种连接应该允许每秒传输1千兆的数据。好吧，即使不考虑上面提到的开销问题，也没有一台普通的PC能够每秒传输这么多的数据，如果它的生命依赖于此的话。只有高端服务器才有这样的能力--即使是它们也会有问题，除非它们不做其他事情。一台老式个人电脑的硬盘可能甚至不能以足够快的速度传输数据，使100兆比特/秒的以太网连接保持繁忙。因此，将老式机器中的100兆比特以太网卡升级到千兆比特，不可能像你想象的那样有帮助。

带宽限制导致网络吞吐量问题，因为整个网络的运行速度只能达到其最慢的链接。这些瓶颈造成性能下降。作为一个常见的例子，假设你有一个电缆调制解调器连接到互联网，其下载速度为1 Mbps。它在大多数时候可能非常快，但如果你访问的网站完全瘫痪了，或者它本身有连接问题，你就不会以1Mbps的速度从该网站下载。事实上，可能还差得远呢。

最后，同样重要的是要记住，有许多技术并不总是以固定的速度运行；它们可能会根据物理网络特性改变速度。一个很好的例子是模拟调制解调器，它的性能可以有很大的变化，这取决于它所运行的线路的质量。木桶理论，取决于最短的那块木板

**<u>网络配置问题</u>**
我上面提到的问题通常是你无能为力的问题；它们只是网络问题的本质。第三类性能限制因素，即错误配置，是不同的。这指的是由于硬件或软件没有被正确设置而导致的网络减速。糟糕的布线、配置错误的接口卡或糟糕的驱动程序会严重降低网络的性能--90%甚至更多。

这些问题通常是可以纠正的，但前提是你要去寻找它们。驱动程序问题特别隐蔽，因为人们自然倾向于在发生速度减慢时责备硬件。然而，如果没有适当的软件来运行硬件设备，你就无法发挥它的最大作用。顺便说一下，这些问题在 "边缘 "硬件中比在成熟产品中要重要得多。

这类问题中还包括由于设计不当而发生的问题。例如，把30个繁忙的工作站放在一个共享的10Mbit/s以太网段上，很可能导致性能低下--使用网络交换机会好得多，因为这将创建多个独立的网段以获得更高的性能。另一个常见的错误是在客户机/服务器设置中没有为服务器提供一个 "更大的管道"（更高的带宽连接）。这些问题可以通过重新配置网络来避免或改善，或者更好的是，在一开始就正确设计网络，对吗？

**<u>不对称的影响</u>**

除上述情况外，请记住，许多网络技术，特别是用于互联网接入的技术是不对称的，这意味着它们在一个方向提供的带宽比另一个方向高得多。通常情况下，这样安排是为了使更多的带宽是用户下载，而不是从用户上传到互联网，因为大多数互联网用户的下载量远远大于他们的上传。然而，弄清楚一个速度等级是针对两个方向，还是只针对一个方向，以及如果是这样，另一个方向的速度是什么，总是很重要的。常见的不对称性能的技术包括56k调制解调器、ADSL、电缆调制解调器和卫星互联网接入。请注意，因为销售这些技术的营销人员往往会试图掩盖其服务的不对称性，通常只强调较大的下载数字，而避免提及较慢的上传。

不对称性也会对网络性能产生意想不到的影响，因为大多数通信，即使它们看起来是单向的，也不是。最常见的情况是，当一种互联网接入技术的下载带宽比上传带宽高得多。当使用TCP/IP下载数据时，必须定期发送确认信息。如果上行带宽太低，这可能会导致无法完全利用链接的下载带宽。

<u>**性能指标问题**</u>
最后，要考虑到有许多不同的方法来衡量和评估性能。合成基准程序经常被用来测量吞吐量，并能产生令人印象深刻的性能分数--这些分数通常与网络的实际运行情况关系不大。这类指标最好用于比较，显示一个网络或系统比另一个快，而不是太注意它们产生的实际数字。然而，即使在做比较时，谨慎也是明智的。所以性能测试报告的水分有多大呢？

**关键概念:**由于一些原因，网络的理论额定速度在实践中从未实现。开销问题意味着并非所有网络的可能容量都能用于数据。硬件带宽限制等外部因素限制了数据的输入和输出。配置问题也会大大降低现实世界的性能。最后，重要的是要记住，许多技术是不对称的，在一个方向上提供比另一个方向更高的速度，而较大的数字往往是销售嘴里的数字。😄

##### 2.10.6 单工、全双工和半双工操作

性能的另一个方面值得注意的是网络或连接的操作模式。显然，只要我们把设备A和设备B连接在一起，就必须有某种方式让A向B发送，而B向A发送。然而，许多人没有意识到，网络技术在处理这两个方向的通信方面可能有所不同。根据网络的设置方式和所使用技术的特点，可以通过选择性能增强模式来提高性能。

<u>**基本通信操作模式**</u>
让我们先来看看任何网络连接、通信通道或接口可能存在的三种基本操作模式。

**单工操作**
在单工操作中，网线或通信通道只能向一个方向发送信息；它是一条 "单行道"。这似乎是反直觉的：只有一个方向的通信有什么意义？事实上，在现代网络中，至少有两个不同的地方会遇到单工操作。

首先是当两个不同的通道被用于通信时：一个从A到B，另一个从B到A。例如，大多数（如果不是全部）光纤通信都是单工的，在每个方向都使用一根线来发送数据。但如果这对光纤股被合并成一条电缆，这可能就不明显了。

单工操作也被用于特殊类型的技术，特别是那些不对称的技术。例如，一种类型的卫星互联网接入只通过卫星发送数据用于下载，而普通的拨号调制解调器则用于上传到服务提供商。在这种情况下，卫星链接和拨号连接都是以单工模式运行。

**半双工操作**
采用半双工操作的技术能够在两个节点之间双向发送信息，但每次只能利用一个方向或另一个方向。当设备之间只有一种网络介质（电缆、射频等）时，这是一种相当常见的操作模式。

虽然这个术语经常被用来描述一对设备的行为，但它可以更普遍地指任何数量的轮流传输的连接设备。例如，在传统的以太网网络中，任何设备都可以传输，但每次只有一个设备可以这样做。由于这个原因，常规（无开关）以太网网络通常被称为 "半双工"，尽管这样描述一个局域网似乎很奇怪。

**全双工操作**
在全双工操作中，两个设备之间的连接能够同时在两个方向上发送数据。全双工通道可以作为一对单工链路构建（如上所述），或使用一个通道设计成允许双向同时传输。**一个全双工链路只能连接两个设备，所以如果要把多个设备连接在一起，就需要许多这样的链路。**

请注意，"全双工 "一词有些多余；"双工 "就够了，但大家还是说 "全双工"（可能是为了区别这种模式和半双工）。

**<u>比较半双工和全双工操作</u>**

在这三种选择中，全双工显然是产生最高性能的一种。全双工操作使连接的理论带宽增加一倍。如果一条链路通常以1 Mbps的速度运行，但可以在全双工模式下工作，那么它实际上有2 Mbps的带宽（每个方向1 Mbps）。然而，请记住关键词 "理论上"--你在现实生活中并没有真正得到双倍的性能，因为通信通常不涉及在两个方向同时发送大量数据。然而，你肯定会得到比半双工模式更好的吞吐量，这涉及到实际的业务模型，业务的交互方式。

在某些情况下，操作模式是技术的一个功能，不能改变。然而，在其他情况下，全双工模式是一个正确的硬件设置问题，也是软件是否支持全双工操作的问题。因此，在这一领域获得更高的性能，有时仅仅是一个确保正确配置的问题。

多年来，全双工操作在通信领域已被视为理所当然。更有趣的发展是全双工操作对局域网的重要性的上升。传统上，局域网总是在一个共享的接入介质上使用半双工操作。随着交换机使用的增加，允许为每台计算机提供专用带宽，全双工操作已变得非常流行。以太网中的全双工操作不仅允许在两个方向同时传输数据，而且还消除了对以前共享访问介质的争夺--不再有碰撞。这两种效果的结合提高了性能，有时是大幅度提高。

**关键概念:**有三种基本的操作模式，描述了网络上连接的设备之间如何发送数据。在单工操作中，数据在两个设备之间只能朝一个方向流动。半双工网络允许任何设备进行传输，但一次只能传输一个。全双工操作意味着两个连接的设备可以同时发送和接收，这提供了最大的潜在性能，因为吞吐量不会因为迫使一个设备在发送数据前等待另一个设备而减少。

##### 2.10.7 服务质量 (QoS)

我在讨论常见的网络性能测量时提到，网络性能有许多不同的方面。我还介绍了延迟的概念，它衡量的是数据在网络上传输的时间。延迟是网络中一个更大的问题的一个重要部分，这个问题有时被称为服务质量或QoS。

大多数网络技术的固有性质是，它们更关心的是尽可能快地将数据从一个地方输送到另一个地方，而不是数据如何被发送。例如，互联网是在互联网协议的基础上设计的，这是一种分组交换技术，旨在以任何最有效的方式将数据包从 "A "点送到 "B "点，而用户不一定有能力知道将采取什么路线。事实上，同一数据流中的一些数据包可能会沿着不同的路线发送。数据包在被转发到目的地之前可能会被储存一段时间，甚至会被丢弃并重新传输。

对于大多数应用，如简单的文件或消息传输，这是完全可以的。然而，在有些应用中，这种服务只是 "质量太低"。在这些情况下，数据交付方式的性质比它的速度更重要，因此需要有提供 "服务质量 "的技术或协议。这个一般的术语可以包括许多相关的功能；常见的包括以下内容。

- 带宽预订:在一段时期内保留网络或接口的一部分带宽的能力，以便两个设备可以指望拥有该带宽进行特定的操作。这用于多媒体应用，在这些应用中，数据必须实时流转，数据包的重新路由和重传会导致问题。这也被称为资源保留。

- 延迟管理:将两个设备之间任何数据传输的延迟限制在一个已知值的功能。

- 流量优先化: 在传统网络中，"所有数据包都是平等的"。一个有用的QoS功能是处理数据包的能力，使更重要的连接比不重要的连接获得优先权。

- 流量整形:这指的是使用缓冲区和限制，将整个连接的流量限制在预先确定的最大限度内。

- 网络拥堵避免:这种QoS功能是指监测网络中的特定连接，并在网络的特定部分变得拥挤时重新分配数据。
  因此，从本质上讲，网络环境中的服务质量类似于 "现实世界 "中的服务质量。这就像在一家漂亮的法国餐厅获得外卖和坐下来的服务之间的区别--两者都能解决饥饿的问题，但它们满足的是非常不同的需求。一些应用，特别是多媒体应用，如语音、音乐和视频，是有时间限制的，需要持续的信息流而不是原始带宽；对于这些用途，纸袋里的汉堡和薯条是无法满足的。😄

**关键概念:**服务质量这一通用术语描述的是数据在设备间传输的特点，而不仅仅是数据的发送速度。服务质量的特点是寻求提供更可预测的数据流，而不仅仅是更快的数据。这类功能的例子包括带宽预留、延迟最小值、流量优先化和整形以及拥堵限制。服务质量对诸如多媒体等特殊应用比对那些传输文件或信息的常规应用更为重要。

为了支持服务质量的要求，许多较新的技术已经被开发或增强，以增加服务质量的功能。这包括支持等时传输的能力，即设备可以在一段时间内保留特定数量的带宽，以支持必须实时发送数据的应用。一项因其服务质量功能而受到广泛关注的技术是异步传输模式（ATM）。ATM的设计是为了支持流量管理功能，这些功能在不是为提供服务质量功能而建立的网络上一般是不存在的（如以太网）。

提示：最近，"服务质量 "已经成为一个大的流行语。就其本身而言，这个术语所传达的关于技术的有用信息与被告知它是 "高性能 "一样多。你必须抛开市场术语，找出所提供的QoS功能的确切内容

#### 2.11 **网络标准和标准组织**

在学习网络及其相关技术时，你不可能很快就遇到一整套与创建这些标准的主题和组织相关的标准。网络标准促进了网络技术的互操作性，并且极其重要。如果说没有标准，网络就不可能存在，这可能有些夸张，但这并不是说，没有标准，我们所知道的网络就不存在。网络无处不在，每个硬件设备或协议都至少由一个标准控制，通常是多个标准。

在本节中，我将简要介绍网络标准和标准组织这一经常被忽视的主题。我首先讨论了为什么标准很重要，强调了专有标准、事实标准和开放标准之间的差异。我概括介绍了网络标准，然后描述了与网络相关的最重要的国际标准组织和行业团体。然后，我描述了负责互联网标准的组织的结构，包括管理地址、域名和协议值等资源的注册机构和注册中心。最后，我讨论了用于创建Internet标准的征求意见（RFC）过程。

##### 2.11.1 专有、开放和事实上的标准

为什么标准很重要？嗯，因为我说过。他们是。好吧，好吧，我会尽量做得更好；即使是我的孩子也不会再把这当作答案了。但我必须警告你，正确的答案要比可爱的答案长得多。J

计算机界的一位老手说：“标准的妙处在于有太多选择”。这个小笑话反映了技术人员经常对行业中数以千计的标准感到失望。除了在内容上不同之外，他们描述的标准所使用的技术和协议在标准的类型和产生方式上也常常不同。事实上，一个特定领域有时“有这么多选择”的部分原因是因为它们是如何产生的。

**<u>专有标准</u>**

在计算的早期，许多人并不十分了解通用标准的重要性。大多数公司都是由技术娴熟的发明家经营的，他们为新技术想出了好点子，但对分享这些点子并不特别感兴趣。与竞争对手的其他公司分享有关新发明的信息并不是一种“明智的商业行为”！当然，每个公司都认为标准很重要，但他们认为更重要的是，他们是控制这些标准的人。

我给你举个例子说明我的意思。让我们想象一下，现在是1985年，我刚刚发明了一种很棒的网络技术，我把它集成到了一种叫做“SooperDooperNet”的新型局域网产品中。（很吸引人，是吗？）SooperDooperNet是我的产品。我拥有这项技术的专利，我控制着它的设计和制造，我确信如果我告诉别人它是如何工作的，他们会模仿我的，对吗？

现在，我可以为SooperDooperNet销售接口卡、电缆和配件，一家想使用它的公司可以在所有PC上安装这些卡，并确保它们能够相互通话。这通过创建“SooperDooperNet标准”解决了该公司的互操作性问题。这将是一个由一家公司或个人拥有的专有标准的例子。

专有标准的问题是，其他公司被排除在标准开发过程之外，因此几乎没有动机与标准所有者合作。事实上，恰恰相反：他们有强烈的动机开发一个具有竞争力的专有标准，即使它没有改进现有的标准。

因此，当我的竞争对手看到我在做什么时，他不会也创建可以与SooperDooperNet配合使用的网络接口卡，这需要向我支付版税。相反，他将开发一种新的网络硬件，称为MegaAwesomeNet，它与操作中的SooperDooperNet非常相似，但使用不同的连接器、电缆和逻辑。如果可能的话，他也会尝试向我的客户出售成串的卡片和电缆！

**<u>开放标准</u>**

最终，公司认识到，如果每个人都同意自己的标准，而不是不断地相互争斗，他们的境况会更好。网络尤其如此，在网络中，设备需要相互通信。如果许多公司聚在一起并同意合作，他们可以创建一个开放标准，而不是一堆专有标准。这个名字很容易解释；开放标准不是一个组织严密保守的秘密，任何有兴趣使用它的人都可以使用它。

开放标准功的一个关键是由一个指导组织来推动它。通常，会成立一个中立的、非营利的行业协会或工作组来制定和推广标准，各种营利性硬件和软件公司也会加入这个小组，并为其提供财政支持。这些组织还与ITU和ISO等标准审批机构合作，以获得其标准的认可。

当然，这些公司这样做不仅仅是为了对客户好。在创建开放标准的过程中，他们将“市场份额馅饼”分割开来，但他们通过吸引更多的客户，使馅饼变得更大。与专有标准相比，客户更喜欢开放标准，因为它们为他们提供了更多的选择，提高了他们与其他公司互动、解决问题、雇佣熟练工人以及未来扩展的能力。至于这些公司，他们仍然在其特定产品方面进行竞争，所以他们不可能最终都生产相同的产品。由于所有这些原因，开放标准现在比专有标准更为普遍。

然而，创建这些标准所涉及的过程往往是一个困难的过程。在某些情况下，标准组织将从头开始起草标准，但在其他情况下，它可能会从提交的几种技术中选择一种技术作为标准的基础，通常称为“技术烘烤”。因此，许多不同的公司可能会采用不同的方法，每个公司都会争相选择作为集团使用的标准。政治可能会导致团体陷入多年的困境，为各种选择而斗争，甚至分裂为多个团体。100VG AnyLAN和快速以太网支持者之间的冲突以及困扰电力线网络世界的标准政治问题就是一个很好的例子。

此外，仍有一些公司坚信专有标准，因为他们真的想控制和指导市场。在这方面最著名/最臭名昭著的是索尼，这家公司生产优秀的硬件，但经常拒绝接受既定标准。出于这个原因，有些人会避免使用他们的产品，即使它们很好；因为他们想坚持行业标准。

<u>**事实标准**</u>

这让我想到了计算机世界中常见的第三种标准：事实标准。“事实”是拉丁文中“事实”的意思，因此事实标准是一种被用作通用标准的标准，只是因为随着时间的推移它被广泛使用，而不是因为标准是由标准委员会制定和批准的。事实上的标准的一个很好的例子是调制解调器使用的“AT”命令集；几乎所有调制解调器都使用它，但这并不是因为某个行业团体同意采用和部署它。相反，它是由领先的现代公司Hayes单方面开发的，然后几乎被所有其他现代制造商采用，直到它成为标准。

有时仍然可以看到专有标准的一个原因是，一些公司希望制定一个将被广泛使用的标准，使其成为事实上的标准，从而使其在该市场上处于领先地位。同样，据我估计，索尼也属于这一类，他们经常想“按自己的方式”做事，并创建专有标准，试图利用其强大的市场影响力来推广这些标准。

有时这会成功，但通常不会，导致不兼容产品的市场支离破碎。一个很好的例子是，索尼为数码相机闪存创建了一种新格式（“记忆棒”），而不是使用其他相机制造商使用的CompactFlash格式。结果并不是所有人都像索尼希望的那样使用记忆棒，而是两个不兼容的标准增加了混乱，并没有给客户带来真正的好处。

**关键概念：**网络标准可以分为专有、开放或事实标准。专有标准由一个特定的组织拥有。如果该组织具有足够的市场影响力，并且行业缺乏替代标准，那么整个行业都可能采用该组织，成为事实上的标准。然而，通常不同的专有标准会相互竞争，导致市场分散。相反，开放标准不属于任何人，它们是由中立组织创建的，以确保许多不同的公司可以设计和开发兼容的产品。这使得客户的生活更加轻松，同时也促进了整个市场的发展。

##### 2.11.2 网络标准

你可以看到问题所在：市场最终会出现不同的公司使用不同的无法互操作的产品。如果你安装了SooperDooperNet，你必须到我这里来进行任何升级或更改，你别无选择。更糟糕的是，如果拥有50台运行SooperDooperNet的PC的Acme Manufacturing与40台运行MegaAwesomeNet的Emca Manufacturing合并，会发生什么？嗯，IT人员有一个问题，就是这样。当然，有办法解决这个问题，但不是每个人都能从一开始就避免这些困难吗？如果每个人的网络都使用不同的“标准”，你怎么能创造出像互联网这样的东西呢？

所有网络技术都有相关的标准。这些文档通常是高度技术性的文档，并且通常假定读者对网络有一定的了解。如果你不是专家，你可能会在理解网络标准方面遇到一些困难。（有些人似乎认为我是专家，但我对典型网络标准中的大多数细节也有困难。）

事实上，许多技术都有相当多的相关标准。由于以下任何或所有原因，网络技术可能有多个标准：

- 原标准已修订或更新；
- 该技术非常复杂，需要在多个文件中进行描述；
- 该技术借用或建立在相关技术所用文件的基础上；
- 不止一个组织参与了这项技术的开发。

在美国创建的标准文件通常用英语编写，但也经常翻译成其他语言。欧洲标准通常同时以英语、法语和德语出版，也许还有其他语言。

今天，几乎所有的网络标准都是“开放”标准，由标准组织或行业组织管理。正如我在前一个主题中所解释的，在计算机行业中，开放标准比专有标准更受欢迎，尤其是在网络方面。事实上，没有普遍接受的开放标准的少数技术已经被那些拥有开放标准的技术所取代，特别是在无线局域网和家庭网络领域，这充分证明了开放过程的重要性。

我考虑在指南中单独列出用于联网的所有标准。然而，这将是一个非常大的部分，对各种标准的讨论将与我描述它们定义的技术的地方“分离”。相反，我在描述每种网络方法或协议的章节中对标准进行了许多不同的小讨论。这些通常可以在介绍每种技术类型的概述主题中找到，但对于更复杂的协议，我有一个专门的主题，只讨论相关标准以及它们在何处记录。

##### 2.11.3 国际网络标准组织

非任何一家公司所拥有的开放标准的兴起，对计算机和网络产品的客户以及向其销售产品的制造商来说，都是一大福音。然而，为了促进开放标准的发展，需要协调这些文件的创建和发布的组织。一般来说，这些非营利组织在技术方面采取中立立场，致力于改善整个行业。

以下是您在阅读网络和互联网时可能遇到的一些标准组织：

- **国际标准化组织（ISO）**：ISO可能是世界上最大的标准组织，它实际上是一个由几十个国家的标准组织组成的联盟。在网络世界中，ISO以其OSI参考模型而闻名。

**注：**国际标准化组织的简称实际上是“ISO”，而不是您想象中的“IOS”。事实上，它根本不是一个缩写词。由于主体的全名因语言而异，因此该名称的任何缩写也会有所不同。相反，该组织从希腊单词“isos”中选择了名称“ISO”，意思是“平等”。许多人，特别是在美国，认为“ISO”是“国际标准组织”的缩写，但这是不正确的。

- <u>**美国国家标准协会（ANSI）**</u>：ANSI是负责协调和发布美国计算机和信息技术标准的主要组织。虽然它们通常被认为是开发和维护标准，但两者都不是。相反，他们监督并授权实际创建标准的组织，使其成为标准开发组织或SDO。ANSI还发布由SDO创建的标准文件，并作为美国在ISO中的代表。
- **信息技术产业委员会（ITIC）**：ITIC是由信息技术（计算机）行业几十家公司组成的集团。ITIC是ANSI批准的SDO，用于开发和处理与许多计算机相关主题相关的标准。它的前身是计算机和商业设备制造商协会（CBEMA）。
- **国家信息技术委员会（NCITS）**：由ITIC设立的一个委员会，负责制定和维护与信息技术世界相关的标准。NCITS的前身是公认标准委员会X3，信息技术，或者更常见的名称是X3。它有几个小组委员会，负责制定和维护各种技术主题的标准。
- **电气与电子工程师协会（IEEE）**：IEEE（发音为“eye-triple-ee”）是电气或电子领域（包括计算机和网络）的知名专业组织。IEEE在网络行业中声名鹊起的主要项目是IEEE 802项目，该项目包括许多流行的网络技术，包括以太网。
- **电子工业联盟（EIA）**：EIA是一个国际行业协会，以发布电气布线和传输标准而闻名。
- **电信行业协会（TIA）**：TIA是EIA的通信部门，负责制定通信标准。由于通信、布线和传输都是相关的，而且TIA和EIA组织也是相关的，因此EIA或TIA制定的标准通常标有组合前缀“EIA/TIA”或“TIA/EIA”。
- **国际电信联盟-电信标准化部门（ITU-T）**：ITU-T是为电信行业制定标准的另一个大型国际机构。ITU-T的前身是国际电话电报咨询委员会（CCITT）（缩写为该组织名称的法语版本，Comitéconsultatif International Téléphonique et te légraphicque）
- **欧洲电信标准协会（ETSI）**：一个由欧洲内外数十个国家的成员组成的组织，致力于为欧洲市场（和其他地区）制定电信标准。ETSI以管理欧洲无线电带宽的使用和制定HiperLAN等标准而闻名。

该列表代表了负责在网络世界中建立和发布标准的一些更重要的组织。然而，这并不是一份详尽的清单。我还应该指出，负责制定互联网标准的一组相关组织没有显示在这个列表中，因为我在关于互联网标准组织和注册机构的两个专门主题中介绍了它们。

我想强调的是，上述许多组织实际上并没有制定各种标准。一般来说，这些都是监督组织——如果你愿意的话，可以称之为“高级管理层”，与其他许多实际制定标准的小型团体合作。此外，在许多情况下，一个特定的标准可能由多个标准组织发布，因此可能会使用多个名称对其进行标记。

**关键概念：**有许多知名国际组织在制定开放网络标准方面发挥着重要作用。其中最重要的是ISO、ANSI、ITIC、IEEE、EIA/TIA、ITU-T和ETSI。这些是监督组织，负责标准制定过程的总体管理，而不是制定单个标准的细节。

##### 2.11.4 网络产业集团

正如我在前一主题中所解释的，大多数开放标准都是由少数大型、通常是国际标准组织协调和发布的。然而，这些并不是参与网络和互联网技术标准制定的唯一群体。还有许多不同的网络行业团体在标准创建过程中发挥着重要作用。

网络行业团体与标准组织在一些方面有所不同。它们通常致力于促进特定技术的发展，其中标准组织更为通用，并负责监督数百种不同的技术。行业组织通常也比标准组织小，其成员主要来自为该集团推广的特定技术创建产品的开发商和制造商领域。

也许最重要的是，行业团体通常实际编写和维护标准，其中标准组织通常是更多的“监督者”，他们确保标准符合标准制定的标准。然而，一些行业团体只关心营销和促销活动。

显然，这些行业团体与标准组织密切合作。在某些情况下，他们甚至可能是同一个整体组织的一部分，所有不同的组在某些方面都是相关的。例如，IEEE 802项目由多个工作组组成，负责维护和开发更大的IEEE组织批准和发布的特定技术标准。

其中一个工作组是802.11工作组，负责开发无线以太网技术。在这个组织“做自己的事”的同时，还有一个行业组织，称为无线以太网兼容性联盟（WECA）。该小组致力于确保802.11b无线网络硬件和软件的跨供应商兼容性。

其他行业团体专门成立，以制定未经正式标准化程序批准的独立标准。例如，HomePNA、IrDA和HomeRF等组。这些团体的问题之一是他们通常不向公众开放他们的标准。毫无疑问，这是由于某种安全顾虑或希望对其技术的“内部工作”保密。

不幸的是，对于这些群体来说，这项政策损害了普通人了解其技术如何工作的能力。例如，在写这本书和其他参考书时，我几乎总是无法从大多数私营行业团体获得规范。他们要么根本不允许我获得文件，要么想为这项特权向我收取大笔费用（在某些情况下甚至高达数千美元）。在这样做的过程中，这些团体会使那些对他们的技术感兴趣的人更难了解他们，从而损害他们自己的事业。这是由ANSI或IEEE等公共组织管理的开放标准的另一个关键优势。

##### 2.11.5 互联网标准组织（ISOC、IAB、IESG、IETF、IRSG、IRTF

使用网络的人数越多，高质量、广为接受的开放标准就越重要。最大的网络当然是互联网，它将数以千计的个人网络上的数百万人连接成一个跨越全球的互联网。互联网不仅使网络和计算发生了革命性的变化，还使通信、商业甚至整个社会发生了变革。互联网成功的关键因素之一是使用开放标准进行开发。

当然，有一天没有人坐下来说“嘿，让我们创造互联网！”（不，甚至不是Al Gore.）它最初是一个小型研究网络，随着时间的推移与实现它的技术集（TCP/IP）同时开发。起初，一个相对较小的组织足以管理互联网标准的制定并监督其活动，但随着互联网的不断发展，这一点变得不充分。最终，需要一个更加正规化的组织结构来管理互联网开发过程和其他活动，以确保互联网和为其提供动力的TCP/IP技术的持续成功和发展。

今天，有六个组织负责制定互联网的架构、标准和政策以及相关活动。它们是密切相关的，某些组织负责监督其他组织，如图7所示。这些组织执行许多任务，并且可能有点难以理解，因为许多组织的名称和职责听起来很相似。因此，我将主要集中讨论它们在制定互联网标准中的作用，因为这是我们在本次讨论中的主要兴趣。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\funinternetstandards.png)

<u>**主要互联网标准组织**</u>

以下是对关键互联网标准组织的简单描述：

- **互联网协会（ISOC）**：一个专业协会，负责与互联网管理、发展和推广相关的一般性、高级别活动。ISOC拥有数千名个人和组织成员，从事研究、教育、公共政策制定和标准化等活动。它负责向下列其他组织提供财政和行政支助。从标准制定的角度来看，ISOC的关键作用是监督IAB。
- **互联网架构委员会（IAB）**：前身为互联网活动委员会，负责全面管理互联网标准的制定。它制定了与互联网技术和结构应如何工作相关的“大局”政策决策，以确保各种标准化工作协调一致，并与互联网的总体发展保持一致。它负责发布互联网标准（RFC）。它向ISOC提供建议，并监督IETF和IRTF；它还充当投诉IETF标准化活动的申诉机构。IAB章程见RFC 2850。
- **互联网工程任务组（IETF）**：IETF关注与当前互联网和TCP/IP技术发展相关的问题。它分为若干工作组，每个工作组负责制定特定领域的标准和技术，如路由或安全。每个区域由一名区域主管（AD）管理，该主管在IESG中任职。IETF由IESG直接监督，然后由IAB监督；RFC 3160中对此进行了描述。
- **互联网工程指导小组（IESG）**：IESG直接负责管理IETF和互联网标准开发过程。它由IETF的每个区域主管组成，他们对拟议标准的批准做出最终决定，并致力于解决标准化过程中可能出现的任何问题。IESG在技术上被视为IETF的一部分，也在RFC 3160中进行了描述。
- **互联网研究任务组（IRTF）**：当IETF主要关注短期发展问题时，IRTF负责与互联网和TCP/IP技术相关的长期研究。它比IETF小得多，由一组研究小组（RG）组成，类似于IETF的工作组。IRTF由IRSG和IAB监督。RFC 2014对此进行了描述。
- **互联网研究指导小组（IRSG）**：IRSG管理IRTF的方式与IESG管理IETF的方法类似。它由每个IRTF研究小组的主席组成，并与整个IRTF的主席合作，就研究活动作出适当的决定。RFC 2014也对此进行了讨论。

<u>**IETF的重要性**</u>

在这些组织中，IETF是您最常听到引用的组织，因为它是直接负责大多数互联网标准开发的组织。正是由于这个原因，在本指南中，每当我提到互联网标准开发工作时，我都会提到IETF在做这项工作。当然，这有点过于简单化，因为所有这些组织都在标准开发过程中发挥作用，在单独的主题中有更详细的描述。

<u>**标准组织的其他职责**</u>

我还觉得我应该再次强调，这些组织中的许多不仅仅负责标准开发。互联网社会尤其如此，标准化只是众多活动之一。IAB还执行一些与标准开发没有严格关联的功能，包括管理IANA完成的协议值分配，以及充当互联网标准组织和其他标准机构之间的联络人。

**关键概念**：一组相关组织负责开发TCP/IP标准和互联网技术。互联网协会（ISOC）全面负责许多互联网活动，包括标准制定。它监督互联网架构委员会（IAB），IAB就互联网技术的发展做出高层决策。创建当前互联网标准的大部分实际工作由互联网工程任务组（IETF）执行，该任务组由互联网工程指导小组（IESG）管理。长期研究由IETF的兄弟组织互联网研究工作队（IRTF）进行，由互联网研究指导小组（IRSG）领导。

##### 2.11.6 互联网注册机构和注册机构（IANA、ICANN、APNIC、ARIN、LACNIC、RIPE NCC）

全球互联网的成功依赖于为协议和其他技术制定普遍接受的标准。因此，IETF等互联网标准组织至关重要；他们管理标准开发过程，以确保每个人都同意如何创建硬件和软件，以便在全球范围内进行通信。

**重要标准化功能**

虽然标准化协议的必要性似乎显而易见，但互联网标准化还有其他几个方面同样重要，但可能还不太清楚：

- **参数标准化：**大多数协议依赖于控制其功能的参数的使用。作为众多示例中的两个，Internet协议有一组定义不同IP选项的数字，地址解析协议（ARP）有一个操作代码字段，可以采用许多不同的值。正如设备必须就要使用的协议达成一致一样，如果通信要成功，设备也必须就要为这些协议使用的参数达成一致。
- **全局资源分配和标识符唯一性**：Internet上使用的许多资源必须从一组固定的值进行分配，并且分配的唯一性至关重要。最明显的例子是，每个TCP/IP主机必须具有唯一的IP地址；另一个重要的例子是确保只有一个组织使用给定的DNS域名。如果两个设备具有相同的IP地址，或者两个组织尝试使用相同的域名，结果将是不可预测的，但几乎肯定是糟糕的。

<u>**互联网集中注册机构**</u>

在上述两种情况下，都需要某种集中式组织。我们需要一个团队来负责管理参数，并确保每个人都使用相同的参数，就像他们使用相同的协议一样。我们还需要协调地址和名称等标识符的分配，以确保以所有人都能接受的方式创建和分配这些标识符。在互联网世界中，这些有时被称为管理机构或注册机构。

最初负责此任务的组织是互联网分配号码管理局（IANA）。令人惊讶的是，虽然IANA的名字听起来像是一个庞大的官僚机构，但实际上只有一个人：Jonathan B.（Jon）Postel，他是互联网和TCP/IP技术最重要的先驱之一。乔恩·波斯特（Jon Postel）执掌IANA，直到1998年不幸早逝。

IANA最初负责管理分配给不同公司和组的IP地址块，并维护定期发布的互联网参数列表，如UDP和TCP端口号。它还负责DNS域名的注册，由美国政府管理的互联网网络信息中心（InterNIC）更直接地处理。Network Solutions Inc.（NSI）后来被授予管理InterNIC的合同，并最终被Verisign收购。

随着互联网的不断发展，1990年代中期开始努力确定一个新的组织，负责互联网地址和名称的中央登记。这是一家新成立的私营非营利公司，名为互联网名称和号码分配公司（ICANN）。ICANN正式负责我在本主题中提到的所有集中注册任务，包括IP地址分配、DNS域名分配和协议参数管理。

在更简单的世界里，这一发展意味着ICANN将取代不再存在的IANA。相反，ICANN保留了IANA，让该组织负责监督IP地址注册和互联网参数。当然，ICANN现在负责IANA，所以实际上这两个组织都负责IP地址和参数。这通常会导致混淆，更糟糕的是，IANA和ICANN通常被称为“IANA/ICANN”或“ICANN/IANA”。

**关键概念：**互联网注册机构是负责协调协议参数和全球分配资源（如IP地址）的集中组织。第一个这样的组织是互联网分配号码管理局（IANA），最初负责IP地址分配、DNS域名管理和协议参数。如今，互联网名称和号码分配公司（ICANN）全面负责这些活动；IANA在ICANN的支持下运营，仍负责IP地址分配和参数协调。

<u>**现代登记机关等级制度**</u>

在最初的“类”IP寻址方案中，地址由IANA在地址块中直接分配给组织：A类、B类和C类地址。如今，改用了一种称为无类别域间路由（CIDR）的分层无类别寻址系统。CIDR中的地址分配涉及地址块的分层分配，从分配给大组织的大块开始，大组织将它们分割为较小的组。（有关这些方法的更多详细信息，请参阅IP寻址的大部分。）

IANA作为负责所有IP地址的组织，将最大的地址块分配给负责进一步分配活动的区域互联网注册中心（RIR）。每个RIR管理特定区域的IP地址和其他Internet号码资源（例如自治系统号码）。四个区域登记处是：

- **亚太网络信息中心（APNIC）**：覆盖亚太地区。
- **美国互联网号码注册中心（ARIN）**：管理北美、加勒比海部分地区和亚赤道非洲。
- **拉丁美洲和加勒比互联网地址注册中心（LACNIC）**：负责拉丁美洲和部分加勒比地区。
- **欧洲IP网网络协调中心（RIPE NCC）**：负责欧洲、中东、中亚和赤道以北的非洲。

每个注册中心可以直接向互联网服务提供商（ISP）分配地址块，或进一步将其委托给国家互联网注册中心（NIR）或较小的本地互联网注册中心。有关更多详细信息，请参阅有关IP地址分配问题的主题。例如:**CNNIC 中国互联网络信息中心**

在过去的几年里，名称注册发生了变化。它不再是IANA职责的一部分，ICANN已经开放了名称注册业务，因此它不再是InterNIC/Network Solutions/Verisign等单一组织的职责。现在，许多不同的认证注册商可以用于许多流行的顶级域的名称注册。这将在关于DNS公共注册的专题中讨论。

在Web上：包含Internet和TCP/IP协议参数的完整文档列表可以在IANA的网站上找到：http://www.iana.org/numbers.html

##### 2.11.7 互联网标准和征求意见 (RFC) 流程

现代互联网的前身是由一小群计算机科学家和工程师开发和运行的微型网络。这些技术专家知道，制定开放的、被广泛采用的标准对互联网和TCP/IP协议套件的最终发展至关重要。但那时还没有正式的标准开放机制。

<u>**使用征求意见表（RFC-***Requests For Comments\***）进行基于共识的标准化**</u>
标准化主要是通过对新技术和协议的讨论来达成共识。如果有人提出了一个新的协议或技术的建议，或者对现有的协议或技术有一个改变的想法，这个人就会创建一个备忘录来描述它，并将它分发给其他人。由于其目的是为了征求对建议的意见，这些备忘录被称为征求意见书（RFC）。并非所有的RFC都描述了正式的标准：许多只是描述性文件、澄清或杂项信息。

**注**：定义早期标准的文件在被称为RFCs之前，最初被称为互联网工程说明（IENs）。

当然，今天的互联网是巨大的，有一个互联网标准组织的官方结构，负责创建新的互联网和TCP/IP标准。由于有成千上万的人在开发互联网技术方面发挥着积极作用，如果有一个非正式的系统，任何人都可以随便写一个RFC，就会导致混乱。因此，互联网和TCP/IP标准仍然被称为RFC，但今天创建一个标准的过程更加正式和有组织。

互联网工程任务组（IETF）是最直接负责创建互联网标准的标准机构。在互联网工程指导小组（IESG）和互联网架构委员会（IAB）的监督下，IETF的工作小组不断开发新的协议和技术，这些开发被正式写入RFCs。

RFCs的出版由RFC编辑办公室负责。从1969年开始的近30年中，RFC编辑是互联网的先驱Jon Postel。在他于1998年去世后，这一职能被分配给南加州大学信息科学研究所（ISI）的网络部，Jon Postel曾是该研究所的主任。RFC编辑的职能是发布和归档RFC，并维护这些文件的在线存储库，以便互联网社区能够访问和使用这些文件。

对RFC的开放和自由访问极大地促进了互联网的成功。如果你考虑到即使在今天也有一些标准机构为获取一个标准收取数千美元的费用，那么登录并立即检索数以千计的RFCs的能力是值得注意的。

internet:最新的RFC列表以及每个文件的超链接（除了一些早期的文件）可以在RFC编辑的办公室找到：http://www.rfc-editor.org/rfc-index.html

<u>**RFC类别**</u>

如前所述，并非所有的RFC都是正式的互联网标准，这一点很重要，请记住。每个RFC都有一个与之相关的类别或状态，表明其处置方式。

拟议标准/标准草案/标准-**Proposed Standard / Draft Standard / Standard**。这些是描述技术的文件，据说已经进入 "标准跟踪"。这意味着它们要么已经被正式批准为标准，要么在未来有可能成为标准。在许多情况下，该文件只是被称为 "标准跟踪"，而不是这三个精确的标签之一。更多信息见下文。

- **当前最佳实践** Best Current Practice**:**提供指导性信息或IETF建议的文件，但不是正式的标准。
- **信息性的**** Informational**:提供一般信息或评论的文件。
- **实验性的 ****Experimental**:一个不在标准跟踪上的实验性标准的建议。在某些情况下，未被接受为正式标准的协议或对现有协议的修改建议被改为 "实验性 "状态。
- **历史性的 ****Historic**:已被淘汰的旧标准。

<u>**互联网标准化进程**</u>

创建和发布互联网标准的整个过程很长，超出了本指南的范围。然而，它很有趣，所以我将在这里简要概述它。标准过程的完整细节可以在……其他地方，互联网RFC:2026.中找到

在考虑互联网标准化进程的提案之前，必须将其作为互联网草案（ID）发布。IETF发布了一组准则，规定了必须如何创建和提交ID。大多数ID是由IETF内参与特定项目的工作组成员编写的。然而，由于标准过程是开放的，任何公众成员都可以通过创建一个ID供IETF和IESG考虑，作为标准进行独立提交以供审查。互联网草案通常根据IETF内不同工作组其他人的反馈进行多次修订。

如果一份互联网草案已经过审查，并且被认为是有价值的、被充分理解的和稳定的（这意味着它没有被快速更新为新版本），那么它可能会成为标准化的候选。IESG可以通过将草案状态更改为建议标准，将其放在互联网标准轨道上。这种状态的文件大部分被认为是完整的，但仍可能根据对该技术的进一步审查、测试和实验进行修订。

一旦规范足够成熟并被广泛接受，就可以将其从建议标准提升到标准草案。这种进步的一个关键要求是，必须证明该技术在至少两个独立且可互操作的实现上是有效的。这证明该标准足够清晰和完整，至少有两个不同的小组能够兼容地实施该标准。

只有当IETF社区认为文档在技术上成熟且规范完整时，文档才能达到草案标准。通常对标准草案进行修改只是为了纠正测试中遇到的问题，或解决出现的新问题。

互联网标准轨道上的最后一个“站点”是互联网标准。此名称仅适用于流行且已广泛实施的非常成熟的规范。达到这种状态的文档通常描述一种已经或将要普遍实施的技术，并分配一个“STD”（“标准”）编号。

RFC开发过程可能需要数月甚至数年的时间，这取决于技术的复杂程度、文档需要多少更改，以及提案是否重要或有趣。许多RFC从未正式进入互联网标准状态；标准草案状态通常被认为是足够稳定的，当达到该水平时，该技术通常仅由公司实施。一些RFC甚至从未达到草案标准状态，它们描述的技术仍在产品中使用。

RFC发布后，将无法更改。这是一个特定的策略决策，旨在避免由于同一RFC有多个版本而导致的混淆。RFC发布过程包括许多步骤，RFC作者可以在这些步骤中修改他们的文档，并检查编辑遗漏和错误。

无论何时进行更改，都需要一份新文件，这也是为什么提案通常以“标准跟踪”而不是“拟议标准”、“标准草案”和“互联网标准”的类别名称发布的原因。如果提案在标准轨道上前进而不需要任何实际更改，则无需发布除不同类别名称之外没有其他更改的新RFC。

**关键概念**：互联网标准在一系列称为评论请求（RFC）的文档中进行了描述。RFC过程描述了通常如何创建Internet标准。新技术或增强的想法始于创建互联网草案（ID）。在审查和反馈后，如果提案得到支持，可以将其放在互联网标准轨道上，其状态更改为建议标准。随着新兴标准的成熟，其地位可能会上升到标准草案，并最终成为互联网标准。然而，许多RFC在产品中实现，但没有达到Internet标准状态。还有其他RFC定义实验技术或提供信息，但未描述官方互联网标准。

#### 2.12 背景：数据表示与计算数学

人类使用十进制（以10为基数）数字表示数字信息，使用各种字母和符号系统表示其他类型的信息。相比之下，计算机只理解一种基本类型的信息：1和0，它们本身代表设备硬件中的“开”或“关”电或光状态。这些1和0以不同的方式组合在一起，形成了我们在计算机中发现的所有更常见的数据元素：常规数字、字符和文件。然而，所有这些实际上都只是抽象；无论计算机中使用什么逻辑结构，1和0总是“在”下面。

这个1和0的基本基础同样适用于网络。尽管网络中的大多数信息是在高层协议之间以逻辑方式交换的，但所有网络结构的底层都是通过网络介质发送的1和0。了解数据在计算机系统中是如何表示和操作的是重要的背景信息，这将帮助您理解许多不同的技术。计算机数据表示和数学不仅对于解释低层物理层调制和编码技术的工作原理很重要，而且对于更高层次的概念（例如IP地址是如何在Internet上设置和使用的）也很重要。

在本节中，我提供了一些关于数字数据如何在计算机和网络硬件中表示、存储和操作的一般背景信息。我首先描述二进制数和用于表示各种大小的二进制信息集合的不同术语。我描述了计算机系统中使用的不同类型的编号系统，例如八进制、十进制和十六进制，以及如何在这些不同类型之间转换数据。我解释了如何对二进制和十六进制数执行算术。然后，我将讨论布尔逻辑以及如何使用逻辑函数来操作二进制数据。

然后，这些解释构成了讨论逻辑函数如何用于设置、清除、反转和屏蔽位的基础。这些操作广泛应用于某些网络技术和协议中。屏蔽操作在IP寻址中尤其常用，因此，尽管这一部分看起来很低，但它与TCP/IP世界非常相关。

不用说，阅读本指南的许多人都知道本节中的大部分或全部信息，所以可以跳过（或略读）那些你已经知道的主题。然而，我想提供这个背景细节，是为了那些新接触计算机的人，或者那些需要复习的人。页面有点长，我试图在描述中假设很少，所以您可能想轻松浏览一下似乎熟悉的部分。然而，即使你们中知道位和字节是什么以及二进制和十进制数字之间的区别的人，也可能会发现位屏蔽的讨论值得仔细阅读。

**注**：关于基本的计算基础知识，我可以在这类指南中详细介绍，而不会离题太远。如果本节的内容不足以让您快速了解，我建议您参考更全面的计算理论和数学参考资料。

##### 2.12.1 二进制信息和表示：位、字节、 *Nibbles*、八位字节和字符

*所谓的 nibble 就是 4 bits 的一个十六进制数(也就是说,它的值是 0 - f)*\

计算的本质是信息。计算机硬件和软件产品的设计允许输入、存储、传输和表达各种类型的信息。区分信息类型的主要方式是基于它们是模拟的还是数字的。在高度简化的术语中，模拟信息是连续的，而数字信息是离散的。例如，通过考虑灯光开关和调光器，可以看出它们之间的区别。灯开关只允许打开或关闭灯，而不允许处于“中间”状态。这是数字信息打开或关闭。相比之下，调光器允许您从完全打开到完全关闭微调灯光输出，中间有无数中间状态：这是模拟的。

**二进制信息*****Binary Information\***

现代数字计算机以数字形式存储所有信息，因为它们在基本层面上是如何工作的。就像灯泡只有“开”或“关”值一样，在计算机中存储和操作信息的组件也是如此。数以百万计的晶体管由计算机处理器和其他电路组成，它们是高度简化的数字开关。因此，计算机中的所有信息都作为信息片段的集合进行操作，这些信息片段只能像开关一样“打开”或“关闭”。

由于只有两种可能的状态，即“开”或“关”，这称为二进制信息（前缀“bi”当然意味着“两个”）。使用二进制表示信息有几个优点。这是一种表示多种类型信息的简单方法，例如灯泡的状态，文件是否已成功复制，温度是否应以摄氏度或华氏度表示。还可以收集多个二进制值，以表示更复杂的信息。

也许最重要的是，二进制信息是明确的。“开”是“开”，“关”是“关”，这一点很重要，因为它允许设备清楚地检测特定信息的价值。电脑喜欢黑白；他们并不特别擅长处理“灰色阴影”。当数据传输可能导致信号被噪声污染时，这在网络领域尤为重要。

二进制值的“开”或“关”条件可以用多种不同的方式表示。在逻辑表达式中，我们可以将该值视为“true”或“false”。对于表示数学值，最常见的表示形式是“一”（“开”）或“零”（“关”）。

<u>**二进制信息表示和组**</u>

计算机信息的基本组成部分是位（二进制数字的缩写）。每个位可以是0或1。使位的值为1通常称为设置位；将其更改为0将重置或清除它。

当然，位只代表非常少量的信息：单个事实或值。我们必须收集这些位，以便可以使用它们存储大量信息和更复杂的数据类型。最常见的分组是将八位作为一个单元引用。八位的集合在技术上称为八位字节，但通常称为字节。（稍后详细介绍。）

"Byte "是对 "bit "一词的戏谑。随着时间的推移，还定义了其他大小的“位集合”。一些极客幽默认为，如果八位构成一个“字节”，那么四位必须是一个“nybble”（或“nibble”）。令人捧腹的还定义了较大的集合，并赋予了不同的名称。表1总结了比特组的最常见表示形式以及用于它们的术语；它们的相对大小也如图8所示。

​                                **Table 1: Binary Information Group Representations and Terms**

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_17-00-03.jpg)

其中一些术语值得特别提及。当然，我们已经讨论过比特和字节。位有时也称为标志；当一个位本身用来表示一个特定的信息状态时，这个术语最常被听到。例如，计算机可能使用“已更改标志”来表示特定文件是否已被修改；这类似于升高或降低标志以指示条件。这些“标志”经常出现在网络消息格式中。

字符一词也用于表示一组八位。这种使用源于计算机通常以一个字节为单位存储字母数字字符，例如字母和数字。 16 位字相当常用，但不如“字节”多。较大的位集合，例如双字等，在日常用语中并不常见；它们用于表示硬件设计或编程等技术领域的数据块。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\bitsbytes.png)

​                                                                    **图 8：二进制信息表示和术语**

​                                        该图显示了最常见大小的二进制信息“集合”的相对大小。

您可能还注意到，这些术语中的每一个使用的位数是 2 的幂。这当然不是巧合。正如我们将在本节的后续主题中看到的那样，发生这种情况是因为当位进入大小为 2 的幂的集合时，它们更容易以方便的方式表示和操作。术语中的位数本身可以很容易地用二进制数表示。在您阅读了关于十进制二进制、八进制和十六进制数的主题之后，这将更有意义。

**关键概念：**计算机以二进制数字形式存储所有信息，这意味着所有数据——无论是文本、照片、音频还是其他任何东西——都仅由 1 和 0 的集合组成。数字信息的基本组成部分是二进制数字或位，它表示单个零或一个状态。为了表示更大量的信息，可以将比特收集成四、八、十六、32 或 64 组，分别称为 nybbles、字节、字、长字和超长字。

<u>**字节与八位字节**</u>

关于字节和八位字节这两个词的使用，一直存在一些分歧，甚至争议。前一个术语传统上是一组8位的最常用术语，尤其是在北美。然而，从技术上讲，这不是正确的术语。

从形式上讲，字节是计算机系统中一次可以读取或写入的最小数据单位。在今天的几乎所有情况下，这实际上都是8位，但有些系统中一个字节不是8位。一些较旧的36位计算机使用9位字节，还有一些系统的字节大小为6或7位，甚至可变大小的字节。出于这个原因，许多人，尤其是技术专业人士，更喜欢八位字节这个术语，它明确无误地意味着“八”。这个术语在北美以外的国家更为常见。

八位字节和字节的问题是计算机用户似乎非常喜欢的另一种“茶壶里的风暴”。然而，现代计算机系统的底线是，八位字节是八位字节中的一个字节和一个字节，这些术语可以互换使用，不会有太多危险。您将更经常地看到技术标准中使用的八位字节。在本指南中，我使用字节这个术语的原因很简单：它是大多数人都熟悉的术语，包括我自己（不过请记住，我住在北美；如果我是欧洲人，我可能对此有不同的看法！）

**关键概念**：从形式上讲，八位字节是准确表示八位的术语，而字节是计算机系统中可以访问的最小位数，可能等于也可能不等于八位。实际上，现代计算机使用8位字节，这些术语可以互换使用（字节在北美更常见，八位字节在欧洲更受欢迎）。

##### 2.12.2 十进制、二进制、八进制和十六进制数

我们在日常生活中习惯使用的数字称为十进制数字，其中“十进制”一词指的是数字十。原因很明显：每个数字都可以取十个值中的一个：0到9。对十进制数字进行的运算也被称为十进制数学，因为这种围绕数字10的方向。（为什么数字10是我们正常数学系统的基础？举起双手数数……）

然而，计算机系统没有手指或脚趾；它们只处理二进制数。每个位不能代表0到9之间的值，而是0到1之间的值。单个“0或1”值足以编码单个事实，例如您的汽车当前是否使用夏季轮胎或雪地轮胎。它远远不够保存更复杂的信息，例如您的银行帐户余额、文本文档或黄石峡谷的图片。

<u>**二进制数和它们的十进制等值**</u>

因此，计算机科学家定义了更大的比特集合，如字节（八位字节）、单词等。当以这种方式将单个位收集到集合中时，它们可以一起用来表示较大的整数，这称为二进制数。由于每个数字只有两个可能的值，二进制数也称为基数2。

很多人都被二进制数字吓倒了，因为起初它们看起来很混乱。理解它们的关键是要认识到它们与十进制数字完全相同，只是每个数字的值都在0到9的范围内，而不是在0到1的范围内。例如，当你用十进制数数时，你的位是9，然后你需要一个第二位来表示“十”。如果你超过99，你需要第三名来表示“数百”。左边每增加一个位置都是十的高次幂。二进制是相同的，只是每个位置的限制是1而不是9。在二进制中，1的位置上最多为1，然后需要第二个位置来表示“二”。如果你的成绩超过3分，你需要第三名才能获得“四分”。每个增加的位置都是随后的二次幂，而不是十次幂。

因此，如果十进制计数是0、1、2、3、4、5、6、7、8、9、10、11、12、13等等，那么二进制计数是0，1，10，11，100，101，110，111，1000，1001，1010，1011，1100，1101。这个概念是相同的，您只需要为二进制数增加很多数字，因为每个数字允许的值太少了。例如，十进制中的数字“13”与二进制中的“1101”相同。怎样好的，在十进制中，我们在1的位置上有一个3，在“十”的位置上加上一个“1”，它的值是10。这是3+10=13。在二进制中，在“一”的位置有一个“l”，在“四”的位置加上“1”。在“八”的位置则有一个1，即1+4+8或13。

举一个更复杂的例子，十进制的211是二进制的11010011。表2显示了这两个数字是如何等价的，方法是将每个有1的二进制数字位置的值相加。从左到右，从上到下读取。从最左边的列开始，我们看到示例编号在“128s”处有一个1。所以我们从128开始。在下一列中，“64s”处有一个1，所以我们将64相加，得到192的连续和。但在“32s”处，二进制数字值为0，所以我们不将32相加。我们继续往下到“一”处，得到二进制数的十进制等价物。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_17-14-01.jpg)

正如你所看到的，一个有N个数字的二进制数字最多可以容纳2N个值。因此，一个有8位的字节可以容纳28或256个不同的值，这些值的编号从0到255。一个16位的字可以容纳216或65,536个值。

<u>**通过对比特分组使二进制数更容易使用**</u>

二进制数的一个问题是，虽然计算机喜欢它们，但对于习惯于十进制数的人类来说，它们是不直观的。其中一个原因是，它们很快就变得非常非常长，处理起来很麻烦。例如，十进制的1,000,000在二进制中是1110100001001000000。为了使二进制数更容易处理，已经定义了两种不同的速记符号。在这两种符号中，不是单独处理每个比特，而是将它们收集成子组，每个子组在另一个编号系统中被分配一个数字。

**八进制数字**
让我们来看看二进制数11110100，它在十进制中是244。现在，我们不要单独看每个位，而是把它们分成三组，从右边开始。所以，1110100变成了(11)(110)(100)。在这种情况下，(11)(110)(100)=(3)(6)(4)，即八进制或八进制编号系统中的364（见图9）。就像二进制一样，八进制数字与十进制数字相同，只是它们是以8为基数而不是以10为基数。因此，八进制的364只是64的3倍加8的6倍加4，即244。八进制相对于二进制的优势是显而易见的：处理较大的数字时没有那么繁琐。十进制的1,000,000在八进制中是3641100。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\binocthex.png)

​                                                                    <u>**图9：二进制、八进制和十六进制数字表示**</u>

二进制数可以通过将其位分组为三组以八进制形式表示，也可以使用四组位以十六进制形式表示。这些以8为基数和以16为基数的数字的优点是比二进制数字短得多，因此更容易处理。

<u>**十六进制数字**</u>

八进制数曾一度相当普遍，但今天已经不那么流行了。八进制的问题在于它将比特分为三组，但二进制数组通常使用的比特数是四的倍数。一种替代方法被定义为做同样的事情，但使用四组。由于每组有四个比特，每个比特可以有十六个值之一，这被称为十六进制或基数16的编号系统。它通常也被称为 "十六进制"。

**注：**作为一个有趣的“边栏”，十六进制并不是计算中第一个用于基数-16的数字。最初，这些被称为十六进制数。这实际上是正确的术语，因为拉丁前缀（sexa-）通常用于数字，而不是希腊前缀（hexa-）。然而，在20世纪50年代初，IBM认为“sexadecimal”这个词对他们的口味来说有点“挑衅性”，所以他们把它改为十六进制。IBM成为IBM，尤其是在当时，意味着其他所有人都效仿。据我所知，这两个词的词源都不完美，但这个音符已经足够长了

现在，让我们回到上面的例子，二进制的1110100，十进制的244。我们把它分成四组，得到（1111）（0100）。二进制值 "1111 "是15，"0100 "是4，所以我们有（15）（4）。嗯，现在我们有一点问题了，不是吗？我们需要能够表示 "15"，但我们只有10个数字。为了解决这个问题，在十六进制数字中，10、11、12、13、14或15的值分别用字母 "A"、"B"、"C"、"D"、"E "和 "F "表示。因此，11110100在二进制中是(15)(4)，或十六进制中的 "F4"（也见图9）。

十六进制数字在某些方面甚至不如二进制数字那么直观。毕竟，要习惯于把字母当成数字，需要一些练习。然而，由于它们紧凑地表示二进制信息的方式，它们非常有用。十进制的1,000,000在二进制中是1110100001001000000，在十六进制中只是 "F4240"--甚至比十进制的数字还要短，因为16比10大。另外，一个字节有八个比特，所以只用两个十六进制数字就可以表示。由于这一便利因素，十六进制数字被广泛用于计算领域，包括网络。例如，你会经常看到用十六进制来表示MAC地址等项目的值，以及用帧或包格式来表示不同类型的信息。

**关键概念:**常规数字被称为十进制数字，因为它们是建立在我们的基数10系统的数学基础上。计算机使用称为二进制数的一或零位的集合，除了每个数字只能是0或1而不是0到9之外，可以像常规数字一样对待。二进制数中的位可以表示为八进制数，将三个位组合成一个从0到7的八进制数字，或者将四个位组合成一个从0到15的十六进制数字。为了用一个字符来表示十六进制的数值10到15，使用了字母A到F。

如果你看到一个数字里有从 "A "到 "F "的字母，你就知道它是一个十六进制数字，但并不是所有的十六进制数字都有这些数字。十六进制数字通常以特殊符号显示，以避免与十进制数字相混淆。这种符号要么是前缀 "0x"，要么是后缀 "h"（有时两者都是）**。因此，数字 "54 "只是 "54"，但 "0x54 "是十六进制的 "54"，也就是5乘以16加4，或十进制的 "84"。一定要注意这些表示方法。**

##### 2.12.2 十进制、二进制、八进制和十六进制数转换

类习惯于处理十进制数字，而计算机使用二进制数字。八进制和十六进制数字是二进制数字的“缩写”，其中每个十六进制数字都代替三个或四个二进制数字。由于人和计算机使用不同的“数字语言”，因此通常需要将数字从一个系统转换为另一个系统。如果你花了大量时间处理计算机或网络，你会发现自己有时需要这样做，因此值得快速了解一下它是如何做到的。

首先，让我这样说：在十进制、二进制、八进制和十六进制之间转换的最简单方法是使用科学计算器。这是大多数人所做的，我强烈推荐。然而，在某些情况下，您可能需要手动完成此操作，我们并不总是随身携带计算器。此外，了解手动转换过程将有助于您更直观地理解二进制、八进制和十六进制数字是如何工作的。那么，让我们来看看。

**注意**：如果你没有科学计算器，大多数版本的Windows都内置了一个工具：计算器程序，通常可以在你的附件文件夹中找到。打开它，转到“视图”菜单，将设置从“标准”更改为“科学”。单击编号系统旁边的按钮。然后输入一个数字，如果您单击另一个编号类型旁边的按钮，则会为您转换该数字。容易的（我敢打赌苹果和UNIX机器有类似的工具，我只是对Windows有更多的经验。）

<u>**二进制、八进制和十六进制之间的转换**</u>

好吧，让我们先从简单的东西开始。二进制、八进制和十六进制之间的转换非常简单，正如您可能在我介绍它们的前一主题中注意到的那样。每个八进制数字是三个二进制数字，每个十六进制数字是四个二进制数字。因此，要从二进制转换为八进制或十六进制，只需将数字分组，并将每个组转换为八二进制或十六进制数字。相反，将每个十六进制或八进制数字转换为一组位。表3显示了从八进制和十六进制的单个数字值到二进制值的转换（为了方便起见，会抛出十进制数字）：

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_17-31-29.jpg)

让我们看一些使用较大数字的具体示例：

- **二进制到八进制**：假设我们从二进制数110101001010开始。我们将其分为三组：（110）（101）（001）（010）。每一个，我们都将其转换为一个从0到7的数字（如果你稍加练习，这在你的头脑中很容易做到）。结果为（6）（5）（1）（2）或6512八进制。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_17-34-24.jpg)

- **十六进制到二进制**：让我们从十六进制数0x4D1B开始。我们按照上表中给出的数字进行转换。因此，我们有0x4D1B=（0100）（1101）（0001）（1011）或0100110100011011。

<u>**从二进制、八进制和十六进制到十进制的转换**</u>

十进制与十进制的转换比二进制、八进制和十六进制之间的转换更复杂，因为2、8和16是2的幂，而10不是。在这两个方向中，转换为十进制更容易：取每个二进制、八进制或十六进制数字的值，转换为小数，然后乘以数字在数字中的位置表示的2、8或16的幂。然后将所有数字相加。在上一主题中，我以十进制数211为例进行了此操作（请参见表2）。

让我们举一个从十六进制到十进制的例子。表4显示了转换为十进制的十六进制数0x830C（八进制使用类似的过程）。从左到右，从上到下阅读表格；每个数字的值乘以适当的16次方，然后相加，得到33548位小数。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_18-13-39.jpg)

<u>**十进制到二进制、八进制和十六进制的转换**</u>

现在让我们考虑十进制转换。这些要求您执行与上述计算相反的操作：除法和减法，而不是乘法和加法。

<u>**从十进制到二进制的转换**</u>

从十进制到二进制的三种转换中最容易的是，因为每个数字的最大值是一，没有除法，只有减法。您只需执行以下操作：

1. 找出小于这个数字的二的最大幂。

2. 在2的次幂的数字位置加一个“1”，然后从十进制数中减去2的次方。

3. 重复步骤#1和#2，直到减至零。

当然，用一个例子和一个表格来解释这一点更容易。让我们转换十进制数689，如表5所示。再次从左上角开始读取表格，然后向下再穿过。我们首先注意到1024不小于或等于689，所以“1024s”处的值为0。其次，512小于689，因此我们将“512s”处设为1，并从689中减去512，留下177。继续计算，最终显示689十进制为1010110001二进制。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_18-19-47.jpg)

<u>**十进制到八进制或十六进制的转换**</u>

八进制和十六进制的处理过程几乎相同，只是必须除以二的幂，而不仅仅是减法：

1. 从小于数字的16（十六进制）或8（八进制）的最大幂开始。

2. 将十进制数除以该次方，只保留结果的整数部分。

3. 在除法完成后保留余数，以便下一步使用。

4. 重复步骤#1至#3，直到到达“一”的位置，然后在较高的数字完成后，将剩下的放在那里。

表6显示了与表5相同的示例，但从十进制到十六进制，而不是十进制到二进制：十进制中的689是0x2B1十六进制

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_18-21-49.jpg)

##### 2.12.3 二进制、八进制和十六进制算术

我们中的许多人每天都在使用算术，作为我们正常生活的一部分而没有真正注意到它，为我们提供做决定所需的信息。以类似的方式，计算机也一直在进行算术运算，作为其正常运行的一部分。计算机如何做和我们如何做之间的主要区别有两个方面：计算机使用二进制数字，而且计算机的速度更快。

正如我在介绍二进制、八进制和十六进制数字时所说，这些形式是数字的不同表现形式，实际上与十进制数字没有多大区别。它们只是每个数字的数值不同。同样，用二进制、八进制或十六进制数字进行算术，与用十进制数字进行的同等运算没有多大区别。你只需记住，你是在用2、8或16的幂，而不是10，这并不总是容易做到的。

与转换的情况一样，如果你需要用二进制、八进制或十六进制数字进行数学运算，计算器通常是个好办法。如果你的计算器只做十进制数字的数学运算，有一个诀窍是把数字转换成十进制，然后进行运算，再把结果转换回来。然而，通过使用Windows计算器程序或同等程序，你可以相当容易地在二进制、八进制或十六进制数字上做与十进制数字相同的加、减、乘、除操作。

二进制数的乘法和除法是计算机内的一种常见操作，但并不是一种经常需要人们在工作中进行的计算。加法和减法更常见（尤其是加法），而且还有一个额外的好处，就是更容易解释。你可能不会经常需要做这种类型的算术，但了解它是好的，至少了解一点。我只提供几个例子，让你了解大致情况。

<u>**二进制算术**</u>

让我们从二进制开始。二进制数的加法与十进制数的加法相同，但由于每个数字允许的数值太少，你最终要做大量的1的携带。表7显示了一个例子，每一列有一个数字；从右到左，从上到下阅读，就像你通常做手工加法一样。我们先把第一个数字的 "1 "和第二个数字的 "1 "相加，得出的原数和是2。我们继续这个过程，直到我们把所有的数字都加起来。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_18-26-20.jpg)

<u>**八进制和十六进制算术**</u>

八进制和十六进制几乎相同，只是如果某个特定数字的和分别超过8或16，则可以进行进位。十六进制更常见，也更有趣，所以让我们以两个十六进制数相加为例。在执行操作时，您需要将一位十六进制数转换为十进制数，然后再转换回来，但这并不太难。

这个例子如表8所示，同样应该从右向左阅读。我们首先在“一”处加上“8”（十进制8）到“A”（十进位10）。这会产生一个18的原始和，从中我们将16作为“1”带到“16s”处，并留下结果2。我们将这个1加到“16s”处的“D”（值13）和“E”（值14）上。这总共是28个，剩下12个（十六进制的“C”），我们把1带到“256s”位置。这将一直持续到我们剩下6DC2h的总数。

![image-20221002182744729](C:\Users\zy\AppData\Roaming\Typora\typora-user-images\image-20221002182744729.png)

计算机系统中的每一位都可以包含“一”或“零”值，这表示二进制数字系统固有的基本“开”或“关”状态。在本节前面的主题中，我演示了如何将这些位的组收集到集合中以表示较大的二进制数，以及如何使用这些二进制数执行各种数学运算。

然而，正如我在介绍二进制信息概念时提到的，我们也可以将二进制数字的“on”和“off”值分别解释为“true”或“false”。它们可以表示计算机或其他系统中的各种逻辑条件。此外，还可以使用各种逻辑操作来操作和组合这些“true”或“false”值，以表示更复杂的逻辑状态。在逻辑思维中使用二进制值的先驱之一是英国数学家乔治·布尔（George Boole，1815-1864），为了表彰他对这一领域的贡献，这种二进制值和条件系统通常称为布尔逻辑。

<u>**布尔逻辑函数**</u>

布尔逻辑定义了许多布尔逻辑函数，有时也称为运算符。每种方法都使用逻辑算法根据一个或多个输入的值计算输出值。该算法根据输入采用的“true”和“false”值的组合来确定输出何时为“true“值。因此，显示逻辑函数输入和输出的表称为真值表。正如我们将看到的，每个逻辑函数都类似于一个“现实世界”逻辑操作，我们使用它来定义各种逻辑情况。

通过查看示例，而不是阅读这些类型的形式化描述，可以更容易地了解布尔逻辑是如何工作的。所以，让我们直接跳进去看看它的作用，看看不同的函数以及它们是如何工作的。

<u>**NOT函数**</u>

让我们从最简单的NOT函数开始。正如你所料，这只是一个否定；输出与输入相反。NOT函数只接受一个输入，因此称为一元函数或运算符。NOT的真值表如表9所示。如您所见，当输入为假时，输出为真，反之亦然。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_18-40-58.jpg)

NOT函数在逻辑上表示与条件相反的情况。例如，假设我们有一个名为“B1”的位，其逻辑含义是当该位为“true”时，屏幕上的特定像素被点亮。那么布尔表达式“NOT B1”将是相反的：当像素点亮时，它将为假，因此只有当像素未点亮时才为真。非常直接。

现在，在继续之前，我要对你开个小玩笑。正如我前面所说，布尔逻辑是基于“true”和“false”值的。然而，我也说过，“真”和“假”在计算机中用“一”或“零”值表示。因此，布尔逻辑通常用1和0表示，而不是用“真”和“假”表示。计算机处理器和其他设备中的电路直接使用这些函数来操作一位和零位。在某些（但并非全部）情况下，他们将“一”和“零”解释为“真”和“假”，但在任何一种情况下，这两种表示在功能上都是等效的。

表10显示了与表9相同的真值表，但使用了位值：每个“True”表示为1，每个“False”表示为0。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_18-42-36.jpg)

<u>**AND和OR函数**</u>

还有另外两个广泛使用的主要布尔函数：AND函数和OR函数。只有当AND函数的第一个输入、第二个输入和第三个输入（等等）都为true时，该函数的输出才为true。如果第一个输入为true，或者第二个输入为真，或者第三个输入为true，则OR函数的输出为true（再次等等）

AND和OR都可以有任意数量的输入，至少有两个。表11显示了带有两个输入的AND函数的真值表。您可以看到，只有当两个输入都为1时，输出才为1，否则为0。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_19-48-57.jpg)

与NOT函数一样，AND函数代表了一种逻辑运算，类似于我们在日常生活中使用这个词的方式。例如，在午餐时间，我可能会向同事建议 "我们出去吃午饭，顺便去邮局"。

表12显示了OR函数的真值表（同样有两个输入）。这里，只要至少有一个输入出现1，输出就是1，而不是像前一个表那样，两个都是1

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_19-50-48.jpg)

有趣的是，与AND函数不同，布尔OR函数实际上与我们在英语中常规使用 "或 "字的方式意义不同。当我们说 "或 "时，通常是指一个 "或 "另一个，而不是两个。"你可以吃苹果派或巧克力蛋糕作为甜点"。然而，在布尔运算中，只要任何一个输入是真的，输出就是真的，即使不止一个是真的。

<u>**排他性OR（XOR或EOR）**</u>
对OR的修改称为排他性OR（缩写为XOR或EOR），代表我们在现实世界中通常使用 "或 "的方式。它的输出只有在一个输入为真或另一个输入为真时才为真，但不能同时为真。XOR的真值表如表13所示。注意这个表和表12的区别：在两个输入都是1的情况下，输出为0。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_19-51-47.jpg)

<u>**组合布尔函数以创建布尔表达式**</u>

上面描述的函数也可以以任意的方式组合，产生更复杂的逻辑条件。布尔逻辑表达式在计算机领域的许多不同场合都有使用。大多数人使用它们的一个常见场所是在万维网搜索引擎中。例如，如果你在搜索引擎中输入 "cheese AND (cheddar OR swiss) NOT wisconsin"，该程序将返回包含 "cheese "一词的网页，这些网页也包含 "cheddar "或 "swiss"（或两者），但不包含 "wisconsin "一词。

(对不起，威斯康星州的奶酪爱好者们，但我住在佛蒙特州！J)

布尔函数是计算机硬件中许多电路的构建块。这些函数是以微小的门来实现的，这些门被设计成只允许根据输入的某些组合来使电能流向输出，如NOT、AND、OR等函数的真值表所描述的那样。在网络中，布尔逻辑对于描述网络运行中的某些条件和功能很重要。布尔函数也非常重要，因为它们被用来设置、清除和屏蔽二进制数字的字符串，我们将在下一主题中探讨。

**关键概念:**布尔逻辑是一个使用布尔函数的系统，根据其输入数据的不同条件来产生输出。最常见的布尔函数是NOT，它的输出与它的输入相反；AND，只有当它的所有输入都是真的（1）时才是真的（1）；OR，如果它的任何一个输入是真的，它就是真的；XOR，只有当它的一个输入正好是真的时才是真的（或者换一种说法，如果输入是不同的话）。这些函数可用于布尔逻辑表达式中，这些表达式代表了用于决策的条件状态，也可用于位操作。

##### 2.12.4 使用布尔逻辑函数进行位屏蔽（设置、清除和反转）

布尔函数NOT、AND、OR和XOR描述了逻辑表达式用来操作 "真 "和 "假 "值的不同方式，以表示简单和复杂的决定或条件。然而，这些函数也可以以更平凡的方式使用，以允许直接操纵二进制数据。布尔逻辑的这种使用在网络的一些不同应用中非常重要。

正如我在介绍二进制数的主题中提到的，给一个比特一个值，叫做设置比特，而给它一个零值，就是重置或清除它。在某些情况下，比特被 "单独 "处理，仅仅通过给每个比特分配一个1或0的值来设置或清除。然而，常见的情况是，有一大组比特被集体用来表示大量的信息，其中许多比特需要一次被设置或清除。在这种情况下，布尔函数就 "出手相助 "了。

**使用OR函数设置位组**
通过利用OR函数的特性，可以对比特进行集体设置。回顾一下，如果它的任何一个输入是真的（1），OR函数的输出就是真的（1）。因此，如果你用一个已知为1的值 "OR "一个比特，结果总是1，不管其他值是什么。相反，如果你用一个零来 "OR"，原来的值，一或零，都不会改变。

通过使用一个在特定位置有零和一的字符串，你可以将某些位设置为1，而其他位则保持不变。这个过程类似于画家使用塑料或遮蔽胶带遮蔽他不想画的区域。因此，这个过程被称为遮蔽。操作中使用的一串数字被称为位掩码，或者更简单，只是掩码。（**反掩码功能**）

一个例子可以说明问题。假设我们有一个12位的二进制输入数字101001011010，我们想把中间的6位设置为全1。要做到这一点，我们只需将该数字与12位掩码000111111000进行OR。表14显示了这一过程，结果中改变的位被突出显示--我们简单地将输入的每一位与掩码中的相应位进行运算。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_21-15-18.jpg)

**使用AND函数清除位组**

要清除某个模式的位，你要做一个类似的屏蔽操作，但要用AND函数来代替。如果你将一个位与零相加，那么无论该位之前是什么，它都将被清除为零，而与一相加将使该位保持不变。因此，在上面同样的例子中，要清除中间的6个位，我们与反向位掩码111000000111相加。这在表15中显示，并在图10中说明。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\bitmasking.png)

​                                                                            **图10：使用AND位掩码清除位**

此图显示了如何使用位掩码清除二进制数中的某些位，同时保留其他位。这里所示的面具可以比作画家的面具；每个1代表一个保持相应输入位值的“透明”区域，而每个0是要清除原始值的位。在对每个位对执行AND后，前三位和最后三位被保留，而中间的六位，因为它们都与0进行AND运算，所以在输出中被强制为0。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_21-20-20.jpg)

我们也可以用另一种方式来看待这个 "清零 "功能。我们正在清除掩码为0的位，并在这样做时 "选择 "掩码为1的位。因此，与位掩码相加意味着你 "保留 "掩码为1的位，"删除 "掩码为0的位

<u>**使用XOR函数反转位组**</u>

在有些情况下，我们也想反转一些比特；也就是说，将一个1的值改为0，或将一个0的值改为1。要做到这一点，我们使用XOR函数。虽然这不像用OR和AND进行屏蔽那样直观，但如果你参考XOR真值表（表13），你会发现如果你用1进行XOR，输入值会被翻转，而用0进行XOR会使输入值保持不变。为了了解这一点，让我们以同样的输入为例，将中间的六位反转，如表16所示。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-02_21-22-35.jpg)

在网络世界中，位屏蔽最常用于地址操作。特别是，掩蔽可能最广为人知的是它用于区分Internet协议（IP）地址的主机和子网（子网）部分，这一过程称为子网掩蔽，在IP子网寻址一节中进行了描述。

**注：**掩码通常以十六进制或十进制表示法表示，以简化表达式，如IP子网汇总表所示。然而，如上所述，掩码始终以二进制形式应用。如果您想确切了解掩码操作的工作方式，应该将掩码转换为二进制。

**关键概念：**当需要设置（更改为1）或清除（更改为0）数据项的某些位时，OR和and布尔函数的属性使它们非常有用，这一过程称为位屏蔽。要将位设置为1，需要创建一个掩码，并使用输入逐位或；当掩码的值为1时，该位被强制为1，而每个0位保持对应的原始位不变。类似地，与AND一起使用的掩码会清除某些位；掩码中的每个1位都将保留原始位，而每个0则强制输出为0。最后，可以使用XOR来使用掩码反转选定的位。

### 第三章、开放系统互连（OSI）参考模式

模型是有用的，因为它们帮助我们理解困难的概念和复杂的系统。谈到网络，有几个模型被用来解释各种技术所扮演的角色，以及它们如何交互。其中，最流行和最常用的是开放系统互连（OSI）参考模型。

OSI参考模型背后的理念是为设计网络系统和解释它们如何工作提供一个框架。当你阅读有关网络的文章时，你会经常发现对OSI参考模型的各个层面或层次的引用。该模型的存在使网络更容易**被分析、设计、构建和重新安排**，因为它允许将它们视为以可预测的方式相互作用的模块部分，而不是巨大的、复杂的单体。

事实上，在阅读很多关于网络的文章时，几乎不可能不遇到至少是关于OSI参考模型如何工作的讨论。这就是为什么我强烈建议，如果你是OSI参考模型的新手，请仔细阅读本章。虽然它可以说是 "背景材料"，但阅读它将有助于形成你对网络理解的重要基础，同时也会使本指南的其他部分更有意义。

如果你对OSI参考模型相当熟悉，你可能希望跳过本指南的这一章，或者只是略读一下。如有需要，你可以在以后再回来补习某些问题。还有许多链接可以回到本指南各部分对各层的描述。

在接下来的几页中，我将详细描述OSI参考模型。我首先介绍了该模型的历史，并讨论了与OSI模型和整个网络模型有关的一些一般概念。我提供了一个有用的类比，以帮助你理解参考模型如何在多个层面上解释网络的相互作用。然后，我分别描述了OSI参考模型的七个层，最后对各层及其各自的功能进行了总结。

**注意：**描述OSI参考模型的这一部分是针对一般网络和互联网的讨论，而不是专门针对TCP/IP协议套件。因此，本节中并非所有的材料都与学习TCP/IP直接相关，尽管其中有许多材料与之相关。你也可以参考涵盖描述TCP/IP的参考模型的主题，其中也讨论了TCP/IP和OSI模型的比较。

**补充: IEEE 8.2 说明**

IEEE 802 指IEEE标准中关于局域网和城域网的一系列标准。更确切的说，IEEE 802标准仅限定在
传输可变大小数据包的网络。其中最广泛使用的有以太网、令牌环、无线局域网等。这一系列标准
中的每一个子标准都由委员会中的一个专门工作组负责。
IEEE 802中定义的服务和协议限定在OSI模型的最低两层（即物理层和数据链路层）。事实上，IEEE
802将OSI的数据链路层分为两个子层，分别是逻辑链路控制（LLC, Logical Link Control）和介质
访问控制（MAC, Media Access Control），如下所示：
        数据链路层
            逻辑链路控制子层
            介质访问控制子层
        物理层

<u>**现有标准**</u>

IEEE 802.1：高层局域网协议（Bridging (networking) and Network Management）
IEEE 802.2：逻辑链路控制（Logical link control）
IEEE 802.3：以太网（Ethernet）
IEEE 802.4：令牌总线（Token bus）
IEEE 802.5：令牌环（Token-Ring）
IEEE 802.6：城域网（MAN, Metropolitan Area Network）
IEEE 802.7：宽带TAG（Broadband LAN using Coaxial Cable）
IEEE 802.8：光纤分布式数据接口（FDDI）
IEEE 802.9：综合业务局域网（Integrated Services LAN）
IEEE 802.10：局域网网络安全（Interoperable LAN Security）
IEEE 802.11：无线局域网（Wireless LAN & Mesh）
IEEE 802.12：需求优先级（Demand priority）
IEEE 802.13：（未使用）
IEEE 802.14：电缆调制解调器（Cable modems）
IEEE 802.15：无线个人网（Wireless PAN）
    --  IEEE 802.15.1：无线个人网络（WPAN, Wireless Personal Area Network）
    -- IEEE 802.15.4：低速无线个人网络（LR-WPAN, Low Rate Wireless Personal Area Network）
IEEE 802.16：宽带无线接入（Broadband Wireless Access）
IEEE 802.17：弹性数据包环传输技术（Resilient packet ring）
IEEE 802.18：无线电管制技术（Radio Regulatory TAG）
IEEE 802.19：共存标签（Coexistence TAG）
IEEE 802.20：移动宽带无线接入（Mobile Broadband Wireless Access）

IEEE 802.21：介质独立换手（Media Independent Handover）
IEEE 802.22：无线区域网（Wireless Regional Area Network）
IEEE 802.23：紧急服务工作组（Emergency Services Working Group），2010年3月新发布

#### 3.1 OSI参考模型的历史

回顾OSI参考模型的起源，我们将回到本指南“网络基础”一章中讨论的几个问题；具体来说，我指的是标准和标准组织。创建网络标准背后的理念是定义广泛接受的建立网络并将其连接在一起的方法。OSI参考模型代表了一种早期尝试，旨在让所有不同的硬件和软件制造商就开发各种网络技术的框架达成一致。

20世纪70年代末，两个项目独立开始，目标相同：为网络系统架构定义统一的标准。一个是由国际标准化组织（ISO）管理的，另一个是国际电报和电话咨询委员会（CCITT）管理的（该名称的缩写来自法语版本）。这两个国际标准机构各自制定了一份文件，定义了类似的网络模型。

1983年，这两个文件合并在一起，形成了一个称为开放系统互连基本参考模型的标准。这是一个很好的标准，因此该标准通常被称为开放系统互连参考模型、OSI参考模型，甚至只是OSI模型。它于1984年由ISO（标准ISO 7498）和更名为CCITT（现在称为国际电信联盟电信标准化部门或ITU-T）的标准X.200共同发布

OSI参考模型历史的一个有趣的方面是，最初的目标并不是创建一个主要用于教育目的的模型，尽管今天许多人认为情况确实如此。OSI参考模型旨在作为建立一套广泛采用的协议的基础，这些协议将基本上被国际互联网所使用，也就是互联网的发展。毫不奇怪，这被称为OSI协议套件。

然而，事情并没有按计划进行。互联网及其TCP/IP协议的普及迎合了OSI套件，简而言之，TCP/IP赢得了胜利。一些OSI协议已经实现，但总体而言，当互联网开始增长时，OSI协议就输给了TCP/IP。

OSI模型本身找到了一个落脚点，它不仅可以解释OSI协议的运行，还可以解释一般意义上的网络。它被广泛地用作教育工具--就像我在本指南中使用它一样--也被用来帮助描述其他协议套件的组件甚至硬件设备之间的相互作用。虽然大多数技术不是专门为满足OSI模型的要求而设计的，但许多技术都是根据它们与OSI模型各层的配合情况来描述的。这包括网络协议、软件应用，甚至不同类型的硬件设备，如交换机和路由器。该模型对那些开发软件和硬件产品的人也很有用，因为它有助于明确网络系统中每个组件所扮演的角色。

**关键概念:** 开放系统互连参考模型（OSI参考模型或OSI模型）最初是作为设计一套称为OSI协议套件的通用协议的基础。这套协议从未取得广泛的成功，但该模型成为教育和发展的一个非常有用的工具。该模型定义了一组层和一些使用它们的概念，使人们更容易理解网络。原来是要做一个标准协议套件的框架吗

#### 3.2 一般参考模型问题

在深入了解OSI参考模型的工作原理之前，我认为先讨论一些与参考模型相关的基本问题是一个好主意。在某种程度上，我想解释一下为什么我在本指南中如此强调OSI模型，甚至在这个模型的基础上组织大部分文档。我还希望您了解为什么模型很重要，以及它如何不仅在概念层面上，而且在现实中为网络带来好处。

因此，在本节中，我将描述几个与参考模型相关的问题，当然，也与OSI参考模型相关。我首先概述了为什么网络模型是有益的，以及为什么理解OSI模型的工作原理对您来说很重要。然后，我将讨论如何最好地使用OSI参考模型，并将其与一些“真实”的网络架构和协议栈进行对比。

##### 3.2.1 网络模型的好处

在本指南的介绍中，我说网络是复杂的，事实上，我可能说得太多了。J 好吧，我不会对你撒谎，它确实很复杂。事实上，正是因为这个原因，我们必须特别努力地去简化它。使网络技术更容易理解的方法之一是把它分成几块，每块都扮演一个特定的角色，或者负责一个特定的工作或功能。

然而，如果要做到这一点，我们必须有一种方法来确保这些不同的部分可以互操作；也就是说，每个部分必须知道对它的期望，以及它可以从其他部分期望什么。这就是网络模型的重要作用之一。它们将实现现代网络所需的大量任务分割成更小的块状，以便更容易管理。同样重要的是，它们在这些小块之间建立了 "墙或者边界"，以及通过这些墙传递信息的规则。

对网络模型的一个很好的比喻是制造商的流水线。没有一家公司试图让一个人制造整辆汽车；即使他们这样做，他们也不会期望这个人能够一下子学会如何做。分工为制造复杂产品（如汽车）的公司提供了若干优势。一般来说，这些优势包括以下几个方面。

- **培训和文件：**将一个复杂的系统分解成较小的部分，更容易解释如何建造这个系统。可以为特定的工作进行培训，而不需要每个人都知道其他东西是如何工作的。
- **专业化**：如果每个人都负责做每项工作，没有人能够获得足够的经验，成为任何事情的专家。通过专业化，某些人可以在特定的工作上发展出专长。
- **更容易的设计修改和改进：**将汽车分成系统，以及建立这些系统所需的特定工作，使得未来更容易做出改变。如果没有这样的划分，将更难确定一个变化可能产生的影响，这将成为创新的抑制因素。
- **模块化：**这与上面的每个项目有关。如果汽车的系统和制造步骤按照合理的结构或模型进行分解，那么在车辆之间交换零件和程序就会变得更容易。这就节省了时间和金钱。
  网络模型在网络世界中产生了非常类似的好处。它们代表了一个框架，通过将工作分成不同的层次，或层，来划分实现网络所需的任务。运行在每一层的硬件和软件负责与运行在同一层其他设备上的相应硬件和软件进行交互。每个硬件或软件元素的责任部分是通过具体划定各层之间存在的界限来定义的。

其结果是，你可以得到上述要点中列出的所有好处：**更容易的培训，每一层的专门能力，改进的修改能力，以及模块化。模块化特别重要，因为它允许你互换在不同层运行的技术。**虽然没有人会试图建造一辆部分是紧凑型轿车、部分是SUV、部分是摩托车的汽车，但在网络中，你可能想做一些与此惊人相似的事情。网络模型有助于使之成为可能。

关键概念：网络模型，如OSI参考模型，提供了一个框架，将复杂的互联网分解成更容易被理解和利用的组件。**该模型不是将网络功能定义为一个大的、复杂的整体，而是将其定义为一组分层的、模块化的组件，每个组件负责一个特定的功能。其结果是更好地理解网络操作，提高性能和功能，更容易设计和开发，并能够以最适合网络需求的方式组合不同的组件。**

##### 3.2.2 为什么了解OSI参考模型对您很重要

很多网络书籍和其他资源对OSI参考模型轻描淡写，只是一带而过地提到它，或者将它归入一个附录。通常所说的原因是OSI模型 "过于理论化"，"不适用于像TCP/IP这样的现代网络协议"。

我认为这是一个误导性的概念。虽然OSI模型确实主要是理论性的，而且网络协议的设计并不总是严格符合其各层的限制，但OSI模型对 "现实世界 "的适用性不高，这不是事实。事实上，今天在阅读有关网络技术的文章时，很难不提到OSI模型及其层次，因为该模型的结构有助于构建协议的讨论和各种技术的对比。

仅举几个例子：OSI参考模型为理解像以太网和HomePNA这样的技术如何具有一些重要的相似性提供了基础；它解释了一台PC如何使用几套不同的协议进行通信，甚至同时使用；它是理解中继器、集线器、网桥、交换机和路由器等互连设备之间差异的一个重要部分；它还解释了许多WAN技术如何相互操作。

OSI模型层远未过时，现在比以往任何时候都更多地出现在对技术的讨论中。事实上，一些协议甚至是根据它们在OSI参考模型中的位置而专门命名的。举个例子，考虑一下第二层隧道协议。另外，交换机现在通常被归类为第二层、第三层甚至更高层的交换机。

**在理论讨论中，OSI参考模型帮助你理解网络和网络协议的功能。在 "现实世界 "中，它还可以帮助你弄清楚哪些协议和设备可以相互作用。因此，我鼓励你继续阅读。这是很值得花时间的。**

关键概念：虽然许多人对学习OSI参考模型的概念嗤之以鼻，但了解它对理解网络协议和技术非常有帮助。该模型是理论性的，但它的概念经常被用来描述现实世界网络的运作。

##### 3.2.3 如何使用OSI参考模型

我一直试图在本节中指出，OSI参考模型是理解网络功能的一个非常重要的工具。然而，虽然有些人倾向于过分淡化OSI模型，认为它在今天真的不是很有意义，但也有一些人走向了另一个极端。他们过多地使用它，过度分析并试图以一种从未想过的方式使用该模型。

最常见的错误是试图 "使一切都符合 "OSI模型的分层结构。(我必须承认，我自己有时也会落入这个陷阱。)当我第一次开始布置本指南的结构时，我想根据OSI模型的层次来组织一切。我很快就发现，这就像试图把各种形状的钉子钉在一个只有圆孔的板子上。我不得不改变我的方法。我最终在有意义的地方根据OSI层来组织指南，而在没有意义的地方使用不同的结构。

我建议你从我的经验中学习。一个简单的经验法则是：如果OSI参考模型能帮助你理解技术并了解它们是如何工作的，就参考它；如果它使事情变得更复杂而不是更清楚，就不要使用。特别是要记住以下几点。

要弄清楚一些技术在该模型中的位置可能非常困难。许多协议是在没有考虑到OSI模型的情况下设计的，它们可能不会整齐地落入某一层或另一层。有些协议重叠了两个或更多的层；其他协议套件可能有两个协议共享一个层。

上层（会话、表示和应用）之间的界限变得特别模糊。有些协议显然是为了适应这些层中的某一层而设计的，而另一些则可能与所有三层重叠。正是由于这个原因，我在本指南中没有按层对高层协议进行分类。(事实上，OSI参考模型的设计考虑到了区分这些层可能没有意义的事实）。

OSI参考模型的设计主要是考虑到了局域网。广域网技术通常很不适合OSI模型，有很多重叠和部分层覆盖。然而，在大多数情况下，根据这些协议在OSI模型中的大致适合程度来看待它们仍然是有用的，因为广域网技术的各个部分有时是相互转换的。

设计产品的人一般不会担心确保他们的最新发明只实现该模型的特定层。因此，有时新产品会 "打破常规"，在一个以上的层中实现过去由单个层中的多个设备完成的功能。这通常是进步，是一件好事。J
最后，一个观察......我注意到，学习网络知识的人--特别是那些试图记住困难问题的简单答案以便通过考试的人--经常会问 "这块硬件在哪一层运作？" 这里的问题不是答案，而是问题，它是简单化的。除了简单的物理设备，如连接器和电缆，几乎所有的网络设备都在许多层运作。例如，虽然一个路由器通常与第三层有关；但它有两个或更多的设备接口，实现第二层和第一层。一个更好的问题是，设备运行的最高层是什么。

底线是，OSI参考模型是一个工具。如果你明智地使用它，它可以对你有极大的帮助。只要记住在应用它时不要太不灵活，你就会好起来。

**关键概念：**对OSI参考模型的重视程度过高或过低都是一个错误。虽然该模型定义了一个理解网络的框架，但并不是所有的网络组件、协议和技术都一定属于该模型的严格分层架构。在有些情况下，试图用该模型来描述某些概念会导致更少的清晰度，而不是更多。人们应该记住，OSI模型是一种工具，应该据此使用。

##### 3.2.4 OSI参考模型与网络架构和协议栈的比较

OSI参考模型并不是用来描述网络结构的唯一模型。还有一些其他的模型和系统，被用来描述各种协同工作的网络技术集合。这些通常不是理论上的模型，而是描述实际网络中积极使用的协议分组。因此，它们更经常被称为网络架构和协议套件，而不是模型。

正如我在上一主题中提到的，许多技术和协议并不 "适合 "OSI模型中的特定层。同样，在 "现实世界 "中使用的大多数协议套件也不完全适合OSI模型。当然，发生这种情况是因为它们是独立于OSI模型开发的。尽管如此，这些架构和套件中的大多数仍然使用层--它们只是与OSI模型使用的层不同。

由于OSI模型经常被引用，它对理解其他架构，甚至对它们进行比较都很有帮助。无论各个层和技术被称为什么，网络协议套件都试图在实现网络时达到相同的目标。因此，即使各层不尽相同，它们通常也是可以比较的。

就TCP/IP而言，在讨论这套协议时，通常使用一个特殊的模型，称为DOD模型或TCP/IP模型。这个模型与OSI模型有许多相似之处，但也有一些重要的区别。在网络领域的其他领域，仍然使用其他模型，如IEEE 802网络结构模型。这些也在某些方面与OSI模型相似，但有其独特的特点。

即使在一些单独的具体技术范围内，也可以看到相关协议的分层结构。有一些技术通常被认为是实现了OSI模型的一个层次，但实际上有一些部分与几个层次相重叠；例子包括以太网和ATM。事实上，一些协议甚至在OSI下被认为是单层的范围内有分层的子协议；一个很好的例子是TCP/IP点对点协议（PPP），尽管它的名字是这样，但它不是一个单一的协议，而是一个协议套件。

#### 3.3 OSI参考模型的主要概念

OSI参考模型作为解释网络如何运行以及描述不同网络技术和协议之间关系的工具非常有用。为了实现这一点，该模型依赖于一些重要的概念和术语。为了理解模型，我需要解释这些是什么，以及它们与整个模型的关系。

在本节中，我将描述定义OSI参考模型如何工作的关键概念。我首先讨论模型如何使用层，也许是最重要的模型概念。然后，我将介绍一些您可能在模型的一般讨论中看到的符号和术语。我更详细地定义了模型上下文中的“接口”和“协议”。然后，我解释了数据封装的重要概念以及OSI参考模型中用于引用消息的术语：PDU和SDU。最后，我通过描述各个层如何在理论基础上处理消息路由，将前面的大部分问题放在一起。

**注意**：本节讨论的许多概念也被许多人用于描述各种单独技术的细节。最好的例子是“protocol”（协议）一词，它几乎在任何地方都被用来指代任何东西。我在这里的重点是这些术语的概念定义。然而，这里的概念讨论通常也适用于现实世界的技术。例如，数据封装是在不同OSI层的协议和技术之间发送数据时执行的，就像我在这里描述的那样。

##### 3.3.1 OSI参考模型网络层、子层和层分组

最重要的OSI参考模型概念是网络层。毫不夸张地说，层是OSI模型的核心--该模型的全部意义在于将网络分成不同的功能，在不同的层次上运行。每一层都负责执行一项或一组特定的任务，并与它上面和下面的层打交道。本节的其余部分将论述这种层定位的许多不同的细微差别。

<u>**OSI参考模型的各层**</u>
OSI参考模型由七个概念层组成，每个层都有一个从一到七的 "等级 "编号。层号代表该层在整个模型中的位置，并表明该层与用于实现网络的实际硬件有多 "接近"。第一层也是最低的一层是物理层，它是实现低级信号和硬件的地方。第七层也是最高的一层是应用层，它处理用户使用的高级应用：包括终端用户和操作系统软件。

你可以看到，当我们从第一层到第七层时，我们在层栈中向上移动，这样做是为了提高我们的抽象水平。这意味着，一个层在堆栈中的位置越高，**它处理的逻辑概念和软件就越多**，而处理网络的硬件和使其工作的 "螺母和螺栓 "就越少。

第一层是最具体的，因为它涉及到网络的实际硬件，以及将比特从一个设备发送到另一个设备的具体方法。它是硬件工程师和信号专家的领域。第二层是比较抽象的，但仍然涉及信号和硬件。当你通过第三、第四和后续层时，这些层的技术变得越来越抽象。当你到达第七层时，你不再与硬件甚至操作系统的概念打交道；你进入了用户和高级程序的领域，这些程序依靠较低层次的程序来完成 "重任"。

<u>**OSI参考模型层的分组**</u>

OSI参考模型并没有正式指定相邻层组之间的任何关系。然而，为了帮助解释各层是如何工作的，通常将它们分为两个层组。

- **低层（第1、2、3和4层）**:该模型的下层--物理层、数据链路层、网络层和传输层--主要关注数据的格式化、编码和在网络上的传输。它们并不关心数据是什么，也不关心它的用途，只关心数据的移动。它们在硬件和软件中实现，从硬件到软件的过渡发生在你从第一层到第四层的过程中。
- **上层（第5、6和7层）**:该模型的高层--会话、演示和应用--是主要关注与用户互动的层，并实现在网络上运行的应用程序。在高层运行的协议不太关心数据如何从一个地方发送到另一个地方的低级细节；它们依靠低层提供数据的传递。这些层几乎总是作为软件在计算机或其他硬件设备上运行来实现。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\osilayers.png)

​                                                                                        **图11：OSI参考模型的层数**

OSI参考模型将网络功能分为七层，从下往上编号为1到7。为了帮助说明靠近顶部的层和底部的层之间不同的抽象水平，有时将它们分为两个层组--低层和高层。当然，并不是每个人都同意到底应该如何划分。特别是，传输层有时被认为是上层，有时被认为是下层。

有些人不一定同意我如何选择划分上面的层次。特别是，可以为将传输层包含在上层组中提供有效的参数，因为它通常作为软件实现，并且相当抽象。不过，我认为它作为低层组的一部分更好，因为它的主要工作仍然是为高层移动数据提供服务。实际上，第4层有点像“过渡区”，很难归类。图11显示了我如何将OSI参考模型层分成组，并指示了层4在堆栈中的特殊位置。

**关键概念：**OSI参考模型中最基本的概念是将网络功能划分为一组层，从底部的第一层到顶部的第七层。随着层堆栈的上升，您将从具体的、硬件特定的功能转移到越来越抽象的功能，直到到达第七层的用户应用程序领域。这七层有时分为几组：下层（一层、二层和三层）和上层（四层到七层）。关于第四层是下层还是上层，存在一些分歧。

<u>**OSI参考模型层之间的关系**</u>

还有一些OSI层彼此之间具有“自然”关系。尤其是物理层和数据链路层密切相关。例如，大多数人将以太网称为“第二层技术”，但以太网规范实际上涉及第二层和第一层。同样，第三层和第四层通常是相关的；协议套件的设计通常使第三层和第四层协议协同工作；例如TCP/IP协议套件中的TCP和IP以及Novell套件中的IPX和SPX。

在某些区域，层之间的关系如此密切，以至于它们之间的线变得模糊。当观察高层时尤其如此；许多技术实现了其中的两个甚至全部三个层，这也是我觉得它们最适合组合在一起的另一个原因。第五层到第七层之间的区别模糊的一个重要原因是，TCP/IP协议基于TCP/IP模型，该模型将第五层至第七层的功能组合在一个单一的厚层中。

**关键概念**：OSI模型的四个较低层次最常单独讨论，因为它们之间的界限相当明确。相比之下，会话层、表示层和应用层之间的界限有些模糊。因此，有时协议跨越这两层甚至全部三层；对于TCP/IP应用程序协议来说尤其如此，因为TCP/IP模型将第五层到第七层视为一个单层。

**子层*****Sublayers\***

最后，请注意，一些OSI参考模型层被进一步划分为子层，以帮助更精确地定义这些层中协议和技术的内部细节。这通常在较低层完成，尤其是物理层和数据链路层。

##### 3.3.2 "N "符号和其他OSI模型层术语

作为一个理论模型，OSI参考模型包含一组用于描述它及其组成部分的术语。这既有好消息，也有坏消息。好消息是，如果您理解这个术语，它可以帮助您更好地理解大多数OSI模型讨论，以及技术与模型的关系。坏消息是，这个术语也会增加混淆，尤其是因为它并不总是被一致使用。

**通用OSI模型术语概念**

让我们讨论一下您经常会看到的用于引用OSI参考模型的一些术语概念。图12显示了其中的许多情况。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\osinotation.png)

​                                                                            <u>**图12：OSI参考模型层关系和术语**</u>

该图显示了OSI模型各层之间的关系以及在任何特定层的背景下用来指代相邻层的术语。每一层（除第7层外）都为其上面的层提供服务；每一层（除第1层外）都使用下面的层提供的服务。另一种说法是，每个层 "N "向层 "N+1 "提供服务并使用层 "N-1 "的服务。以第三层即网络层为例，我们看到它向第四层提供服务，并使用第二层的服务。从网络层的角度来看，传输层是 "N+1 "层，数据链路层是 "N-1 "层。

<u>**层的名称和编号**</u>
OSI参考模型的各层有不同的称呼。它们的名称可能是全称，也可能是缩略语。它们也经常被简单地以其层号来引用。因此，例如，所有这些都是指同一事物："数据链路层"、"数据链路层"、"DLL"、"L2"、"第二层"、"layer 2"。

同样，你会经常看到层名被用作形容词来描述协议和技术。一个 "第三层技术 "是一个主要在网络层运作的技术。

**"N "记号**
在计算机世界中，字母 "N "经常被用来泛指一个数字。就OSI参考模型而言，在讨论中经常看到这个字母被用来泛指各个层，而不提及具体的层。你会听到像 "N-功能 "和 "N-服务 "这样的术语，这只是指某一特定层内提供的功能和服务。

再比如，你可能会看到有人说，某项技术 "为N+1层提供了有用的服务"。这只是意味着它为它所处的层以上的层提供了一种功能。从概念上讲，除了第一层和第七层，每一层都有一个 "N-1 "层和一个 "N+1 "层，以此类推。如果你看的是网络层（第三层），那么 "N+2层 "就是会话层（第五层）。更多信息请参见模型层接口的讨论。

<u>**协议和接口**</u>

这些词在OSI模型的背景下有特殊的含义：协议代表模型中同一层的逻辑或物理设备之间的通信，而接口代表同一设备中相邻层之间的信息交互。

因此，在 "N "符号中，协议代表一个设备上的N层与另一个设备上的N层之间的通信，而接口则处理同一设备上的N层与N+1或N层与N-1之间的通信。关于OSI协议和OSI接口的主题对这些问题的描述要好得多。

<u>**网络堆栈**</u>
当你把一堆层放在彼此的上面时，你会得到什么？嗯，你会得到一个堆栈。这个术语被用来指代一个模型或技术套件中的整个层集，或部分层集。由于每个层都有与之相关的协议，所以有时也被称为协议栈。

<u>**实体、功能、设施和服务**</u>
这些经常变化的、有些模糊的术语指的是在模型中各层执行的具体任务或工作。N-实体是一个术语，指的是在 "N层 "完成的具体操作或工作。一个功能基本上是同样的东西。设施和服务是一个层为它上面的层提供的东西。这也经常用N-notation来表示："N+1 "层经常使用由 "N "层提供的一套 "N服务 "或 "N设施"。

<u>**理解OSI术语**</u>
你可能刚刚读完所有这些，并对自己说 "他们为什么要把这些东西弄得这么复杂？" 好吧，我真的不能和你争论。记住，我确实说过这里有坏消息。现在你知道所有这些东西是怎么回事了，如果你遇到它，你就不会......呃......太严重的困惑。J

幸运的是，上面这些流行语的使用是有些限制的。大多数引用的是具体的层名或数字，特别是 "N-1 "和 "N+1 "的东西，在讨论现实世界的技术时很少使用。然而，它对解释模型本身非常有用，所以当你阅读本章关于OSI模型的其余部分时，你会看到其中的一些术语。

##### 3.3.3 interface 垂直（邻接层）通信

OSI参考模型的七个层被用来分割实现网络系统所需的各种功能。在网络中的任何特定设备上，不同的软件和硬件程序和设备可能同时在任何或所有这些层上运作。由于在一般情况下，所有这些都应该一起工作以实现网络功能，因此需要在特定的主机内各层之间进行垂直通信。

<u>**OSI接口**</u>
在OSI参考模型的术语中，模型中相邻层之间的通信机制被称为接口。当然，"接口 "一词在计算机和网络世界的其他场合也被广泛使用，因为它的一般含义是指将任何东西连接在一起。然而，当有人谈到OSI模型各层之间的接口时，这个人通常指的是数据在模型的N层和N-1层或N+1层之间传递的过程。

这些关系在图13中展示。例如，第2/3层接口被第二层和第三层协议用来传递数据和控制信息；第3/4层接口将第三和第四层连接在一起。

**注意：**记住，在 "现实世界 "中，并非所有的层都可能在每个系统或协议栈中实现。因此，技术上运行在第7层的进程有可能与运行在第5层的进程通信。然而，我在这里说的是理论上的模型。

<u>**垂直通信**</u>
每当有数据在网络上发送时，垂直(**上下层**)通信就会在协议栈上下进行，当然，每当有东西被接收时也是如此。这是因为较高层次是作为逻辑功能在软件中实现的；没有实际的物理连接。高层将数据打包并下发到低层，以便在网络上发送。在最底层，数据在网络上被发送。在接收端，这个过程是相反的，数据被送回接收设备上的高层。下一个关于水平通信的主题将进一步解释相应层之间的逻辑互动。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\osiinterfaces.png)

​                                                                            **图13：垂直通信的OSI参考模型接口**

在OSI模型术语中，接口是层堆栈中相邻层之间通信的管道。

<u>**模块化和层间互动**</u>

OSI参考模型的主要目标之一是允许不同层的不同实现之间的相互连接。因此，我们的目的是让各层有一定程度的自主性，你可以 "混合和匹配"--到一定程度。使其发挥作用的唯一方法是有明确的方式将各层连接在一起，这就使我们回到了接口的问题。每一层都必须向它上面的层提供一个一致的、有据可查的接口，以便任何上层的实现都能正确使用下层。

我将提供一个来自TCP/IP世界的例子来说明我的意思。TCP/IP协议套件的核心是互联网协议（IP）。每当你在互联网上使用任何应用程序--电子邮件、网站、FTP、聊天室等等--你都在间接使用IP。

然而，你从来没有直接使用过IP，你通常使用两个传输层（第四层）协议中的一个：传输控制协议（TCP）或用户数据报协议（UDP）。在TCP/IP协议栈的网络层和传输层之间存在一个标准接口，它定义了上层协议如何使用IP；这使得TCP和UDP能够与之对接。同样，TCP和UDP都为上层的数百个协议和应用程序提供了一个特定的接口，这些协议和应用程序在更高的层级上使用它们。

许多不同类型的通信实际上发生在各层之间。控制信息的传递是为了使高层能够利用低层，并使低层将状态和结果信息传回给高层。数据也会在接口上双向传递。在传输时，它向下流动到下层，每次通常都会产生数据封装。在接收时，这个过程被逆转，数据被送回界面上，从低层到高层。

**关键概念：**在OSI参考模型中，接口定义了相邻层之间垂直通信的机制。层与层之间存在定义明确的接口，这使得高层可以使用一些低层的服务，而不需要了解这些层是如何实现的。

##### 3.3.4 协议：水平（对应层）通信

OSI参考模型中的每一层都有一个特定的角色（或多个角色）--一组它所负责的一般任务。在网络上的每个系统中，硬件和软件都在模型中的许多不同层次上运行。在机器 "A "上做特定工作的程序被设计成与在机器 "B "上运行的类似或互补的程序进行通信。这种横向通信是网络的核心内容。它使网络浏览器和网络服务器能够交谈，电子邮件应用程序能够交换信息，以及更多。

**OSI协议**
当然，所有类型的通信只有在每个人都同意采用相同的方法来完成时才能发挥作用。描述一种通信类型的每一套规则都被称为协议。你可以把协议看成是一种语言或一套指令。网络的每个功能或服务都有自己的语言；就像人类的语言一样，有些是相互类似的，而有些则是相当独特的。

如果你读过任何有关网络的书，你可能已经看到 "协议 "这个词很多很多次了。像 "接口 "这个词一样，"协议 "这个词可以有很多含义。事实上，它是网络的基础，而且有很多不同的使用方式，以至于我在《网络基础》一章中专门有一个主题来讨论它。

除此以外，我们必须记住，OSI参考模型旨在成为描述网络的一种正式方式。因此，术语 "协议 "在该模型的背景下具有正式的含义。**它特指一套通信规则、指令和/或程序**，描述网络中不同机器上运行在同一层的特定软件或硬件元素之间的通信。

<u>**水平通信**</u>

让我们考虑一下这些相应的层如何使用协议进行通信。首先，回顾一下模型中的每一层，除了底层（物理层），实际上都是在计算机上运行的程序或算法。比方说，一个网络浏览器和一个网络服务器实际上是无法直接连接在一起的，毕竟它们只是软件程序。相反，运行在各层的软件会进行逻辑上的交流。也就是说，通过使用软件和程序，一台机器上运行在第五层的进程可以与另一台机器上运行在第五层的类似进程完成逻辑通信。

由于机器只在第1层进行物理连接，这意味着为了使第5层的协议发挥作用，发送机器上的数据必须通过第5层和第1层之间的层 "向下传递 "数据。然后，数据通过物理连接传输到另一台机器的第1层，并在接收机器的协议栈中 "向上传递 "到第5层。这就是两台机器在第5层的逻辑联系，尽管它们在该层没有物理连接。

因此，除了第1层的实际物理连接外，所有的水平通信也需要垂直通信，在一台机器上向下传递协议栈，然后再在另一台机器上向上传递。这个过程如图14所示。(然而，通信并不总是在每一个连接中都一路返回到堆栈，就像路由的情况一样）。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\osiprotocols.png)

​                                                                             **图14：OSI参考模型协议。横向通信**

术语 "协议 "有许多含义；在OSI参考模型的上下文中，它特指完成两个或多个设备上相应层之间通信的软件或硬件元素。例如，互联网协议被说成是第3层协议，因为每个设备都使用IP软件在第3层进行通信。数据的实际传输和接收只发生在最低的物理层；更高层次的协议在逻辑上进行通信，通过向下传递数据的接口，直到到达第1层，在第1层进行传输，然后将数据向上传递到接收方的适当层。

##### 3.3.5 数据封装、协议数据单元（PDU）和服务数据单元（SDU）

协议是描述控制水平通信的规则，也就是在OSI参考模型内相应层运行的进程之间的对话。在每一层（第一层除外），这些通信最终采取某种消息的形式，在两个或多个设备上的相应软件元素之间发送。由于这些消息是在协议之间进行信息交流的机制，它们通常被称为协议数据单元（PDUs）。每个PDU都有一个特定的格式，实现协议的功能和要求。

<u>**层服务和数据封装**</u>
正如我们在看协议时已经讨论过的，高于一层的层之间的通信是逻辑性的；唯一的硬件连接是在物理层。因此，为了让一个协议进行通信，它必须将其PDU下传到下一个低层进行传输。我们也已经看到，使用OSI术语，较低的层被说成是向紧靠它们的层提供服务。每层提供的服务之一就是这个功能：**处理和管理从上层收到的数据**。

在任何特定的N层，一个PDU是一个完整的消息，实现了该层的协议。然而，当这个 "N层PDU "被传递到N-1层时，它就变成了N-1层协议应该**服务的数据**。因此，N层的协议数据单元（PDU）被称为N-1层的服务数据单元（SDU）。N-1层的工作是传输这个SDU，它的做法是将N层的SDU放入自己的PDU格式中，在SDU前面加上自己的页眉，必要时加上页脚。这个过程被称为数据封装，因为上层消息的全部内容被封装为下层消息的数据有效载荷。

N-1层对其PDU做什么？当然是把它传到下一个低层，在那里被当作N-2层的SDU来处理。N-2层创建一个N-2层的PDU，包含N-1层的SDU和N-2层的页眉和页脚。就这样，这个过程一直持续到物理层。在理论模型中，你最终得到的是第1层的消息，它由应用层的数据组成，并依次被第7层到第2层的头和/或脚所封装，如图15所示。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\osiencap.png)

​                                                                                    <u>**图15:OSI参考模型数据封装**</u>

每个协议都为传输创建一个协议数据单元（PDU），其中包括该协议所需的头和要传输的数据。该数据成为其下一层的服务数据单元（SDU）。此图显示了由第7层标头（“L7H”）和应用程序数据组成的第7层PDU。当它传递到第6层时，它将成为第6层SDU。第6层协议在其前面加上一个第6层标头（“L6H”），以创建一个传递给第5层的第6层PDU。封装过程一直延续到第2层，在本例中创建一个第2层PDU，其中显示了一个标头和一个页脚，该标头和页脚转换为位并在第1层发送。

<u>**TCP/IP中的数据封装**</u>

"N-1，N-2 "的东西使这个问题看起来比实际情况更难，所以让我们用一个真实世界的（简化）例子来代替。传输控制协议（TCP）在OSI模型的第四层运行。它传输的信息被称为 "段"，包含从高层协议封装的数据。TCP下面的一层是第3层的互联网协议（IP）。它接收来自TCP的数据并将其封装起来进行传输。

因此，在OSI参考模型的正式语言中，TCP段被创建为第4层PDUs。当传递到IP时，它们被视为第3层的SDU。IP软件将这些SDU打包成称为IP包或IP数据包的信息，这些信息是第三层PDU。这些又被传递到第二层协议，例如以太网，它将IP数据包视为第二层SDU，并将其打包成第二层PDU（以太网帧），在第一层发送。

在接收设备上，封装的过程是相反的。以太网软件检查第二层PDU（以太网帧），并从其中删除第二层SDU（IP数据报），并将其作为第三层PDU传递给IP。IP层删除第3层SDU（TCP段），并将其作为第4层PDU传递给TCP。反过来，TCP继续这个过程，回到协议层堆栈中。图16说明了整个过程。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\osipdusdu.png)

​                                                                                    <u>**图16：OSI参考模型PDU和SDU的封装**</u>

这个例子更详细地说明了OSI PDU和SDU是如何创建和封装的。一个TCP段（第4层PDU）成为第3层SDU，通过添加IP头被封装成第3层PDU。这成为以太网帧的有效载荷，它是一个包含以太网头、第二层SDU（IP数据报）和以太网页脚的第二层PDU。接收设备从以太网头中提取IP数据报并将其传递给第三层；IP软件提取TCP段并将其传递给TCP软件。

数据在协议栈中上下传递、封装等整个问题可能看起来毫无必要地复杂。它也可能显得相当低效；为什么要用这么多的页眉和页脚来发送消息？然而，数据封装的概念对于创建模块化、灵活的网络至关重要。

<u>**PDU和SDU术语的使用**</u>

术语 "协议数据单元 "是相当正式的。你会在标准中看到它的使用，有时也会在讨论中看到它的使用，但更多时候遇到的是 "普通 "消息术语，如 "帧 "和 "数据报"，正如在网络基础知识专题中讨论的消息。同样，这些消息封装的数据通常不被称为 "服务数据单元"，而仅仅是消息体或有效载荷，这在关于消息格式的专题中讨论过。然而，在有些情况下，了解SDU和PDU的区别对理解技术很重要。一个例子是IEEE 802.11物理层；802.11标准不断谈论SDU和PDU。

相关信息:如果你想看一个例子，将网络封装与现实世界中非网络背景下的类型进行比较，请看OSI参考模型的类比。

**关键概念：**在OSI模型术语中，用于交流某一特定协议信息的消息被称为其协议数据单元（PDU）。该PDU被传递到下一个较低层进行传输；由于该层提供处理该PDU的服务，它被称为下层的服务数据单元（SDU）。SDU被封装到该层自己的PDU中，并依次发送到堆栈中的下一层，一直进行到物理层。这个过程在接收方设备上是相反的。总之，N层的PDU是N-1层的SDU，它被封装成N-1层的PDU。

##### 3.3.6 间接设备连接和消息路由

我在本节其他主题中提供的大部分解释都讨论了机器通过网络直接相互连接的机制。然而，网络的一个最强大的方面是，它有可能创建网络--网络的网络--允许设备间接连接。例如，机器 "A "可以向机器 "B "发送一个信息，而实际上根本不知道它在网络上的位置。

如果信息在不在同一网络上的设备之间发送，那么它必须在直接连接的网络之间传递，直到到达其最终目的地。将信息从一个网络传送到另一个网络的过程称为转发，而从一个设备转发到另一个设备的集体过程是路由。这些概念是所有内联网的基础，包括互联网本身。每当你访问一个互联网资源，如一个网站，你都在发送消息，这些消息被路由到该网站，而你收到的回应也被路由回来。

**注：**尽管将信息从一个网络转移到相邻网络的技术上的正确术语是 "转发"，但随着时间的推移，"路由 "一词经常被用于单个网络到网络的传输，以及将信息从一个设备传输到另一个设备的整个过程。

在OSI参考模型的背景下，路由是一种通常在网络层--第三层发生的活动。回顾一下，数据封装使高层消息被低层的页眉和/或页脚所包围。当一个消息被路由时，会发生以下情况：

- 一台机器上的高级应用决定向远方的计算机发送一个数据报,该数据报被打包，然后通过始发机器上的协议栈垂直向下传递。如前所述，每一层都对数据进行封装。数据报被编入最终的目标设备。然而，当消息到达网络层及以下时，它并没有被打包直接送到最终目的地，而是送到了一个中间设备。这就是负责路由到该目的地网络的设备。信息被传递到数据链路层，然后是物理层，以传输到该中间设备。

- 中间设备（通常称为路由器）在物理层接收信息。它被上传到数据链路层，在那里被处理，检查错误等，并删除数据链路层的头。最终的数据包被传递到网络层。在那里，中间设备确定目的地机器是否在其本地网络上，或者是否需要转发到另一个中间设备。然后，它重新包装信息，并将其传回数据链路层，以便在其旅程的下一段中发送。

- 在几个潜在的中间设备 "处理 "消息后，它最终到达目的地。在这里，它沿着协议栈往上走，直到到达与目的机器上生成消息的应用程序相同的层。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\osirouting.png)

​                                                                        **图17：OSI参考模型中的消息路由**

这张图显示了OSI模型中的路由是如何从概念上完成的。中间设备连接着信息发送者和接收者的网络。当数据被发送时，它被传递到中间设备的网络层，在那里它被重新包装并被送回堆栈进行下一段的传输。请注意，中间设备实际上有两个不同的第1层和第2层的实现；一个用于到每个网络的接口。还要注意的是，虽然第三层协议在整个互联网上必须是相同的，但每个网络可以在第一和第二层使用不同的技术。

这一描述的关键是，在中间设备中，信息只沿着OSI层向上走到网络层。然后，它被重新包装并沿途送回。高层只在源和目的设备上参与。在第3层使用的协议必须是整个互联网上通用的，但每个单独的网络可以是不同的。这显示了分层的一些威力，它使相当不同的物理网络也能连接在一起。图17说明了这一过程。

**关键概念：**在OSI模型中，当数据不是直接从发送方发送到最终接收方，而是通过使用一个中间系统间接发送时，就会发生路由过程。该设备通常称为路由器，连接到两个或更多的物理网络，因此有多个接口到第二层。当它收到数据时，数据只向上传递到网络层，在那里它被重新包装，然后通过适当的第二层接口发送下一段旅程。

#### 3.4 了解OSI参考模型-举例说明

在这次关于OSI参考模型的讨论中，我试图尽可能多地用 "普通英语 "解释它是如何工作的。然而，在有些情况下，一个好的类比可以完成大量描述所不能完成的任务。因此，我将试图通过一个现实生活中的类比来说明OSI模型的关键概念（层、垂直通信、水平通信、数据封装和消息路由）。你可以判断这是否是一个好的比喻。只要记住，没有一个类比是完美的。

我们的场景似乎相对简单和常见：一家财富500强公司的CEO需要给另一家大公司的CEO发一封信。很简单，对吗？就像启动你的浏览器并连接到你喜欢的网站一样简单。然而，在这两种情况下，很多事情都是在 "幕后 "进行的，以使通信发生。在下面表17所示的类比中，我比较了这些现实世界和 "网络世界 "的沟通。

**注：**（是的，第一位首席执行官可以乘坐他的里尔喷气机飞到另一位首席执行官的城市，带他去吃龙虾和马提尼晚餐，并在那里把信交给他。请大家一起玩，好吗？哦，对任何首席执行官的公然刻板印象表示抱歉。J

​                                                                            **表 17：OSI 参考模型真实世界类比**

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\send1.jpg)

<img src="D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\send2.jpg" style="zoom:80%;" />

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\send3.jpg)

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\send4.jpg)

正如你所看到的，这些过程有相当多的共同点。纵向通信和封装是非常明显的，路由也是如此。同样隐含的是在逻辑上发生的横向通信--尽管发生了所有的事情来使其发生，但两位CEO似乎是 "连接 "的。同样地，两个助理在某种程度上也是逻辑上的连接，尽管他们实际上从未交谈过。当然，这个例子在所有可以想象的方面都是高度简化的，所以请不要用它来学习TCP/IP的工作原理，或者快递服务。

无论如何，我希望这个例子能帮助我们理解所有这些OSI的东西。

#### 3.5 OSI参考模型的层

最后，经过一番折腾--但愿不要太多！--是时候看看OSI参考模型的实际各个层了。正如在OSI模型概念一节中所讨论的，每一层都有一些定义它的特征，以及通常与之相关的各种协议。了解每一层的细微差别将有助于你理解所有使用它们的技术。

在本节中，我将单独描述OSI参考模型的每一层。对于每个层，我提供了它的名称和层号，描述了它在OSI层堆栈中的一般功能，并概述了每个层通常负责的具体活动类型。我还提供了一些驻扎在各层的技术和协议的例子。然而，请记住，本节中的描述是通用的。要真正理解各层以及它们的用途，就必须阅读本指南其他部分所涉及的在各层发挥作用的各个协议的细节，这是无可替代的。

**相关信息:**为了帮助记忆各层的正确顺序，请参阅描述OSI参考模型常用记忆法的主题。为了方便比较七个层的主要特征，请参考OSI模型的层概要。

##### 3.5.1 物理层（第1层）

OSI参考模型的最低层是第1层，即物理层；它通常被缩写为 "PHY"。与模型的其他层相比，物理层很特别，因为它是唯一一个数据在网络接口上进行物理移动的层。所有其他层都执行有用的功能来创建要发送的信息，但它们都必须顺着协议栈传送到物理层，在那里它们被实际地通过网络发送出去。

**注意：**物理层也很 "特别"，因为它是唯一一个真正不专门适用于TCP/IP的层。然而，即使在研究TCP/IP时，理解它与TCP/IP协议所在的其他层的意义和作用仍然很重要。

<u>**了解物理层的作用**</u>
"物理层 "这个名字可能有点问题。因为这个名字，也因为我刚才所说的物理层实际传输数据的情况，许多研究网络的人得到的印象是物理层只涉及实际的网络硬件。有些人可能会说物理层就是 "网络接口卡和电缆"。然而，实际情况并非如此。物理层定义了许多网络功能，而不仅仅是硬件电缆和卡。

一个相关的概念是，"所有网络硬件都属于物理层"。同样，这并不严格准确。所有的硬件都必须与物理层有一定的关系，以便在网络上发送数据，但硬件设备通常实现OSI模型的多个层次，包括物理层，也包括其他层次。例如，一个以太网网络接口卡在物理层和数据链路层都执行功能。

<u>**物理层的功能**</u>
以下是OSI参考模型中物理层的主要职责：

- **硬件规格的定义**:电缆、连接器、无线无线电收发器、网络接口卡和其他硬件设备的操作细节通常是物理层的功能（尽管也有部分数据链路层的功能，见下文）。
- **编码和信令**：物理层负责各种编码和信号功能，将数据从计算机或其他设备内的比特转化为可在网络上发送的信号。
- **数据传输和接收**: 在对数据进行适当的编码后，物理层实际上是在传输数据，当然也包括接收数据。请注意，这同样适用于有线和无线网络，即使在无线网络中没有有形的电缆。
- **拓扑结构和物理网络设计**： 物理层也被认为是许多与硬件有关的网络设计问题的领域，如LAN和WAN的拓扑结构。

那么，一般来说，物理层技术是处于最底层的技术，处理的是通过网络发送的实际的1和0。例如，在考虑网络互连设备时，最简单的设备在物理层运行：中继器、传统集线器和收发器。这些设备对信息的内容完全不知情。它们只是接收输入比特并将其作为输出发送。像交换机和路由器这样的设备在更高的层次上操作，并把它们收到的数据看成不仅仅是代表1或0的电压或光脉冲。

<u>**物理层和数据链路层之间的关系**</u>

需要指出的是，虽然网络技术的物理层主要定义了它所使用的硬件，但物理层与数据链路层密切相关。因此，一般来说，在物理层定义硬件不可能 "独立 "于在数据链路层使用的技术。例如，以太网是一种描述特定类型电缆和网络硬件的技术，但以太网的物理层只能与它的数据链路层方面隔离到一点。例如，虽然以太网电缆是 "物理层"，但其最大长度与存在于数据链路层的消息格式规则密切相关

此外，一些技术在物理层执行的功能，通常与数据链路层有更密切的联系。例如，通常让物理层对数据链路层的帧进行低级（比特级）的重新包装以进行传输。在某些情况下，错误检测和纠正也可能在第一层完成。大多数人认为这些是 "第二层的功能"。

在许多技术中，一些物理层可以与数据链路层一起使用。在这里，典型的例子是以太网，它有几十个不同的物理层实现，每个都使用相同的数据链路层（可能有轻微的变化。）

**<u>物理层子层</u>**
最后，许多技术将物理层进一步细分为子层。为了提高性能，物理层的编码和传输方法随着时间的推移变得更加复杂。物理层可以被分成若干层，以使不同的网络媒体得到同一技术的支持，同时在物理层共享不同媒体之间共同的其他功能。一个很好的例子是用于快速以太网、千兆位以太网和万兆位以太网的物理层架构。

**注：**在某些情况下，用于在网络或通信线路上传递比特的物理层技术被称为传输方式。不要将其与OSI传输层（第4层）的功能混淆。

**关键概念:** **OSI参考模型中最低的一层是物理层。它是网络硬件规范的领域，是执行数据编码、信号、传输和接收功能的技术所在的地方。物理层与数据链路层密切相关**。

##### 3.5.2 数据链路层（第2层）

OSI参考模型堆栈中的第二低层（第二层）是数据链路层，通常缩写为 "DLL"（尽管该缩写在计算机世界中也有其他含义）。数据链路层，有时也称为链路层，是许多有线和无线局域网（LAN）技术的主要功能所在。例如，以太网、令牌环、FDDI和802.11（"无线以太网 "或 "Wi-Fi"）有时都被称为 "数据链接层技术"。在数据链路层连接的一组设备通常被认为是一个简单的 "网络"，而不是一个国际网络。

<u>**数据链路层的子层。逻辑链路控制（LLC）和媒体访问控制（MAC）。**</u>
数据链路层通常在概念上被分为两个子层：逻辑链路控制（LLC）和媒体访问控制（MAC）。这种划分是基于IEEE 802项目中使用的架构，该项目是IEEE工作组，负责创建定义许多网络技术的标准（包括我上面提到的所有技术，FDDI除外）。通过分离LLC和MAC功能，不同网络技术的互操作性变得更加容易，这在我们前面讨论网络模型概念时已经说明。

**<u>数据链路层功能</u>**
以下是在数据链路层执行的关键任务。

- **逻辑链路控制（LLC）**:逻辑链路控制指的是建立和控制网络上本地设备之间的逻辑链路所需的功能。如上所述，这通常被认为是一个DLL子层；它为上面的网络层提供服务，并隐藏了数据链路层的其他细节，以使不同的技术能够与更高的层无缝工作。大多数局域网络技术使用IEEE 802.2 LLC协议。
- **媒体访问控制（MAC）**:这指的是设备用来控制对网络介质的访问的程序。由于许多网络使用共享介质（如单一网线，或一系列电连接成单一虚拟介质的电缆），因此有必要制定管理介质的规则以避免冲突。比如说。以太网使用CSMA/CD方法进行媒体访问控制，而令牌环则使用令牌传递。
- **数据成帧**:数据链路层负责将高层信息最终封装成帧，在物理层的网络上发送。
- **寻址: **数据链路层是OSI模型中与寻址有关的最低层，即用特定的目的地位置来标记信息。网络上的每个设备都有一个唯一的号码，通常称为硬件地址或MAC地址，由数据链路层协议使用，以确保用于特定机器的数据能够正确到达。
- **错误检测和处理：** 数据链路层处理发生在网络堆栈低层的错误。例如，通常采用循环冗余检查（CRC）字段，以允许接收数据的站点检测是否正确收到数据。

<u>**物理层要求的定义和网络互连设备层**</u>

正如我在讨论物理层的话题中提到的，该层和数据链路层是非常密切相关的。对网络物理层的要求往往是某一技术的数据链路层定义的一部分。某些物理层的硬件和编码方面是由正在使用的DLL技术规定的。这方面最好的例子是以太网标准，IEEE 802.3，它不仅规定了以太网在数据链路层的工作方式，而且还规定了其各种物理层。

由于数据链路层和物理层是如此密切相关，许多类型的硬件都与数据链路层有关。网络接口卡（NIC）通常实现一种特定的数据链路层技术，因此它们通常被称为 "以太网卡"、"令牌环卡 "等。还有一些网络互连设备，据说全部或部分 "工作在第二层"，因为它们通过查看数据链路层帧来决定如何处理它们收到的数据。这些设备包括大多数网桥、交换机，尽管后两者也包括由第三层执行的功能。

一些通常与第二层相关的最流行的技术和协议是以太网、令牌环、FDDI（加上CDDI）、HomePNA、IEEE 802.11、ATM，以及TCP/IP的串行链路接口协议（SLIP）和点对点协议（PPP）。

**关键概念:** OSI参考模型的第二层是数据链路层。这是定义大多数LAN和无线LAN技术的地方。第二层负责逻辑链路控制、媒体访问控制、硬件寻址、错误检测和处理，并定义物理层标准。它通常被分为逻辑链路控制（LLC）和媒体访问控制（MAC）子层，基于使用该架构的IEEE 802项目。

**补充:**

逻辑链路控制（英语：Logical Link Control，简称LLC）是局域网中数据链路层的上层部分，IEEE 802.2中定义了逻辑链路控制协议。用户的数据链路服务透过LLC子层为网络层提供统一的接口。在LLC子层下面是MAC（介质访问控制）子层。

IEEE标准中增加了这个子层，该子层透过在IP包上加了8位元的目的地址服务接入点和源地址服务接入点来保证在不同网络类型中传输。另外，有一个8或16位的控制字段用于象流控制的辅助功能。

<u>**操作方式**</u>
LLC提供了两种无连接和一种面向连接的三种操作方式：

- 方式一：无回复的非连接导向方式，它允许发送帧时：
  
  给单一的目的地址（点到点协议或单点传输）；
  给相同网络中的多个目的地址（多点传输）；
  给网络中的所有地址（广播传输）。
  多点和广播传输在同一信息需要发送到整个网络的情况下可以减少网络流量。单点传输不能保证接收端收到帧的次序和发送时的次序相同。发送端甚至无法确定接收端是否收到了帧。

- 方式二：面向连接的操作方式。给每个帧进行编号，接收端就能保证它们按发送的次序接收，并且没有帧丢失。利用滑动窗口流控制协议可以让快的发送端也能流到慢的接收端。

- 方式三：有回复的无连接方式。它仅限于点到点通信。

<u>**LLC的头控制字节和帧格式**</u>
LLC的头部包含：
                    DSAP（Destination Service Access Point，目标服务接入点）字节，8bits
                    SSAP（Source Service Access Point，来源服务接入点）字节，8bits
                    Control（控制）字段，8或16bits
                    为了便于区分，有三种LLC PDU控制字段，分别叫做U，I，S帧。

​                    U（Unnumbered）帧，8位的控制字段，特别用于无连接的应用
​                    I（Information）帧，16位的控制和帧编号字段，用于面向连接的应用
​                    S（Supervisory）帧，16位的控制字段，用于在LLC层中进行管理监督。
​                    在这三种格式中，只有U帧在广泛使用。用第一个字节的最后两位来区分这三种PDU帧格式。

##### 3.5.3 网络层（第3层）

OSI参考模型的第三个最底层是网络层。如果说数据链路层是基本定义了什么是网络的边界，那么网络层则是定义了国际网络（互连网络）的功能。网络层是OSI模型中最低的一层，它关注的是将数据从一台计算机实际传送到另一台计算机，即使是在一个远程网络上；相比之下，数据链路层只处理彼此之间的本地设备。

虽然OSI参考模型中的第2至第6层都是作为下面各层和上面各层之间的 "栅栏"，但网络层在这方面尤其重要。正是在这一层，真正开始从更高层次的抽象功能--这些功能并不太关心数据的传递--**过渡到将数据送到目的地所需的具体任务**。传输层与网络层有很多联系，在OSI协议栈中继续这种 "抽象化过渡"。

<u>**网络层功能**</u>
通常由网络层执行的一些具体工作包括。

- **逻辑寻址:** 每个通过网络进行通信的设备都有一个逻辑地址，有时被称为第三层地址。例如，在互联网上，互联网协议（IP）是网络层协议，每个机器都有一个IP地址。请注意，寻址也是在数据链路层进行的，但这些地址指的是本地物理设备。相比之下，逻辑地址独立于特定的硬件，并且在整个网络中必须是唯一的。
- **路由:**在一系列互连的网络中移动数据可能是网络层的决定性功能。在网络层发挥作用的设备和软件程序的工作是处理来自不同来源的传入数据包，确定它们的最终目的地，然后找出它们需要被发送到哪里，以达到它们应该去的地方。我在这个关于间接设备连接的专题中更完整地讨论了OSI模型中的路由，并通过OSI模型的类比来说明它是如何工作的。
- **数据报封装**:网络层通常将从高层收到的信息封装成带有网络层头的数据报（也叫数据包）。
- **分片和重新组合**:网络层必须将消息下发到数据链路层进行传输。一些数据链路层技术对可以发送的任何消息的长度有限制。如果网络层要发送的数据包过大，网络层必须把数据包分割开来，把每一块送到数据链路层，然后在到达目的机上的网络层后再进行重新组装。一个很好的例子是互联网协议是如何做到这一点的。
- **错误处理和诊断:**在网络层使用特殊的协议，允许逻辑连接的设备或试图路由流量的设备交换有关网络上主机或设备本身状态的信息。

<u>**网络层面向连接和无连接的服务**</u>

网络层协议可以提供面向连接或无连接的服务，用于在网络上传递数据包。到目前为止，无连接的在网络层更常见。在许多协议套件中，网络层协议是无连接的，而面向连接的服务则由传输层提供。例如，在TCP/IP中，互联网协议（IP）是无连接的，而第四层传输控制协议（TCP）是面向连接的。

最常见的网络层协议当然是互联网协议（IP），这就是为什么我已经提到过几次了。IP是互联网的主干，也是整个TCP/IP协议套件的基础。还有几个与IP直接相关的协议，在网络层与它一起工作，如IPsec、IP NAT和移动IP。ICMP是主要的错误处理和控制协议，与IP一起使用。在TCP/IP世界之外另一个值得注意的网络层协议是Novell IPX协议。

**关键概念:** OSI参考模型的第三层被称为网络层。这是模型中最重要的层之一；它负责将各个网络连接成国际网络的任务。网络层的功能包括网络级寻址、路由、数据报封装、分片和重组，以及某些类型的错误处理和诊断。网络层和传输层相互之间密切相关。

在网络层操作的网络互连设备通常被称为路由器，在这一点上，希望你不会感到惊讶。它们负责我所提到的路由功能，当数据包沿着路由的每一 "跳 "发送时，将其送入下一段旅程。它们使用路由协议相互通信，以确定有效发送流量的最佳路线。所谓的 "桥接器 "也至少有一部分位于网络层，就像相当明显的 "第三层交换机 "那样。

##### 3.5.4 传输层（第4层）

OSI参考模型协议栈的第四层和 "中间 "层是传输层。我认为传输层在某种程度上是OSI模型中低层和高层 "组 "的一部分。它更多地与下层联系在一起，因为它关注的是数据的传输，但它的功能也有些高层次，导致该层与第5至第7层有相当多的共同点。

回顾一下，第1、2和3层涉及数据的实际包装、寻址、路由和交付；物理层处理比特；数据链路层处理本地网络，网络层处理网络间的路由。相比之下，传输层的概念性很强，它不再关注这些 "螺母和螺栓 "事项。它依靠低层来处理设备间的数据移动过程。

传输层实际上是在高层应用的抽象世界和第一至第三层的具体功能之间充当某种 "联络人"。由于这一作用，传输层的总体工作是提供必要的功能，使不同计算机上的软件应用进程之间能够进行通信。这包括了一些不同但相关的职责

现代计算机是多任务的，在任何时候都可能有许多不同的软件应用程序都试图发送和接收数据。传输层负责提供一种方法，使这些应用程序都能使用相同的下层协议实现来发送和接收数据。因此，传输层有时被称为负责端到端或主机到主机的传输（事实上，TCP/IP模型中的对应层被称为 "主机到主机传输层"）。

<u>**传输层服务和传输质量**</u>
完成进程间的这种通信需要传输层执行几个不同但相关的工作。对于传输来说，传输层协议必须跟踪来自每个应用程序的数据，然后将这些数据合并成一个数据流，发送到低层。接收信息的设备必须反转这些操作，分割数据并将其输送到适当的接收进程中。传输层还负责定义潜在的大量应用数据被分割成较小的块进行传输的方法。

传输层的另一个关键功能是为运行在其上层的协议和应用程序提供连接服务。这些可以分为面向连接的服务和无连接的服务。两者都不比对方好，也不比对方差；它们都有各自的用途。虽然面向连接的服务也可以在网络层处理，但在 "现实世界 "中，它们更经常出现在传输层。一些协议套件，如TCP/IP，同时提供面向连接和无连接的传输层协议，以适应不同应用的需要。

传输层也是层栈中通常包括功能的地方，以增加端到端数据传输的功能。网络层协议通常只关注 "尽力而为 "的通信，其中的交付是没有保证的。传输层协议以算法的形式被赋予智能，以确保设备之间的可靠和有效的通信发生。这包括几个相关的工作，包括传输丢失的检测和处理，以及管理数据发送的速度，以确保接收设备不被淹没。

传输质量，也就是确保接收到的传输和发送的一样，是如此重要，以至于一些网络参考文献根据可靠性和流量控制功能来定义传输层。然而，并非所有的传输层协议都提供这些服务。正如一个协议套件可能有一个面向连接的和一个无连接的传输层协议一样，它也可能有一个提供可靠性和数据管理服务的协议，而另一个则不提供。同样，TCP/IP也是这种情况：有一个主要的传输层协议，即TCP，包括可靠性和流量控制功能，而另一个，即UDP，则没有。

<u>**传输层的功能**</u>

让我们更详细地看一下经常在传输层执行的具体功能。

- **进程级寻址：**第二层的寻址处理本地网络上的硬件设备，第三层的寻址识别逻辑互联网上的设备。寻址也是在传输层进行的，它被用来区分软件程序。如上所述，这是使许多不同的软件程序同时使用一个网络层协议的部分原因。传输层进程级寻址的最好例子是TCP/IP中使用的TCP和UDP端口机制，它允许应用程序在任何TCP/IP设备上被单独引用。
- **多路复用和解除多路复用:**使用我刚才提到的地址，发送设备上的传输层协议对从许多应用程序收到的数据进行多路传输，将它们合并成单一的数据流进行发送。同样的协议接收数据，然后从传入的数据报流中解除多路复用，并将每个数据包引导到适当的接收方应用程序。
- **分段、包装和重新组装**：传输层将其在网络上发送的大量数据在源机器上分割成小块，然后在目的机器上重新组装。这一功能在概念上类似于网络层的分割功能；正如网络层分割消息以适应数据链路层的限制一样，传输层分割消息以适应基础网络层的要求。
- **连接的建立、管理和终止:**传输层面向连接的协议负责建立连接所需的一系列通信，随着数据的发送而维持连接，然后在不再需要时终止连接。
- **确认和重传：**如上所述，传输层是实现许多协议的地方，以保证数据的可靠传递。这是用各种技术实现的，最常见的是确认和重传计时器的组合。每次发送数据时，都会启动一个定时器；如果收到了数据，收件人就会向发送方发回一个确认函，以表示传输成功。如果在计时器过期前没有回执，数据将被重新传输。通常需要其他算法和技术来支持这一基本过程。
- **流量控制:** 提供可靠传输的传输层协议也经常实现流量控制功能。这些功能允许通信中的一个设备向另一个设备说明它必须 "缩减 "其发送数据的速度，以避免用数据拖累接收方。这些功能允许检测和处理发送方和接收方之间的速度不匹配问题。

<u>**传输层和网络层之间的关系**</u>

在理论上，传输层和网络层是不同的，但在实践中，它们往往是非常密切相关的。只要看看常见的协议栈的名称就可以很容易地看出这一点--它们通常是以套件中的第三层和第四层协议来命名的，暗示着它们的密切关系。例如，"TCP/IP "这一名称来自于该套件最常用的传输层协议（TCP）和网络层协议（IP）。同样，Novell NetWare套件因其第三层（IPX）和第四层（SPX）协议而经常被称为 "IPX/SPX"。通常情况下，特定的传输层协议使用同一家族中的网络层。你不会经常发现一个网络使用一个套件的传输层协议和另一个套件的网络层协议。

最常用的传输层协议是TCP/IP套件中的传输控制协议（TCP）和用户数据报协议（UDP），NetWare协议套件中的顺序包交换（SPX）协议，以及NetBIOS/NetBEUI/NBF套件中的NetBEUI协议（尽管NetBEUI更难归类。）

**关键概念：**OSI参考模型的第四层和中间层是传输层。这是模型中另一个非常重要的概念层；它代表了处理数据传输问题的低层和处理应用软件的高层之间的过渡点。传输层负责实现应用进程之间的端到端通信，它部分地通过使用进程级寻址和多路复用/解除多路复用来完成。传输层协议负责将应用数据分成块进行传输，可以是面向连接的，也可以是无连接的。这一层的协议也经常提供数据传输管理服务，如可靠性和流量控制。

##### 3.5.5 会话层（第5层）

OSI参考模型中的第五层是会话层。当我们从底层往上走时，会话层是第一个几乎所有与数据的寻址、包装和交付有关的实际问题都被抛在后面的层，它们是第四层和更低层的功能。它是上面三层中最低的一层，它们共同关注的主要是软件应用问题，而不是网络和互联网的实施细节。

**这个层的名字告诉你它的设计目的：**允许设备建立和管理会话。一般来说，会话是两个软件应用程序的持久的逻辑联系，以允许它们在一个较长的时间内交换数据。在一些讨论中，这些会话被称为对话；它们大致上类似于两个人之间的电话通话。

<u>**应用程序接口（API）**</u>
会话层协议的主要工作是为建立、管理和结束会话提供必要的手段。事实上，在某些方面，会话层软件产品更像是一套工具，而不是具体的协议。这些会话层工具通常通过通常称为应用程序接口或API的命令集提供给高层协议。

常见的API包括NetBIOS、TCP/IP套接字和远程程序调用（RPCs）。它们允许应用程序通过使用一套标准化的服务，在网络上轻松完成某些高级别的通信。这些会话层工具中的大多数都是应用软件开发者的主要兴趣所在。程序员使用这些API编写的软件能够使用TCP/IP进行通信，而不需要了解TCP/IP工作的实现细节。

例如，Sockets接口在概念上位于第五层，被TCP/IP应用程序员用来在UNIX操作系统的互联网上的软件程序之间建立会话。Windows Sockets同样让程序员创建的Windows软件具有互联网功能，并能与其他使用该接口的软件轻松互动。(严格地说，Sockets不是一种协议，而是一种编程方法）。或者说调用网络通信的库函数接口

正如我在本指南的一些地方提到的，一旦你进入会话层，层与层之间的界限就开始变得非常模糊，这使得我们很难对究竟什么属于第5层进行分类。有些技术确实跨越了第5层到第7层，特别是在TCP/IP的世界里，识别OSI会话层的特定协议并不常见。

术语 "会话 "有些模糊，这意味着有时对属于会话层的具体功能存在分歧，甚至某些协议是否属于会话层也有分歧。为了增加这种潜在的混乱，还有一个区分 "连接 "和 "会话 "的问题。连接通常是第四层和第三层的范畴，但是，例如，传输控制协议（TCP）连接可以持续很长时间。TCP连接的持久性使得它们很难与 "会话 "区分开来（事实上，有些人认为TCP/IP主机到主机的传输层确实跨越了OSI第四和第五层）。

**关键概念**: OSI参考模型层中的第五层是会话层。顾名思义，它是旨在为软件进程之间建立和管理会话提供功能的层。会话层技术通常作为被称为应用程序接口（API）的软件工具集来实现，它提供了一套一致的服务，使程序员能够开发网络应用，而不需要担心传输、寻址和交付等较低层次的细节问题。

##### 3.5.6 表示层

表示层是OSI参考模型协议栈的第六层，也是倒数第二层。它在两个关键方面与其他层不同。首先，与其他层相比，它的功能更加有限和具体；这其实有点容易描述，万岁！其次，与其他层相比，它的使用频率要低得多；在许多类型的连接中，这是不需要的

这个层的名字也暗示了它的主要功能：它处理数据的呈现。更具体地说，表现层负责处理任何可能出现的问题，即从一个系统发送的数据需要被另一个系统以不同方式查看。它还负责处理从应用程序试图发送数据时到数据通过网络发送时必须进行的任何特殊处理。

<u>**表示层功能**</u>
以下是表现层处理的一些特定类型的数据处理问题。

- 翻译: 网络可以将非常不同类型的计算机连接在一起。PC、Macintoshes、UNIX系统、AS/400服务器和大型机都可以存在于同一个网络中。这些系统有许多不同的特点，并以不同的方式表示数据；例如，它们可能使用不同的字符集。演示层负责隐藏机器之间的这些差异。

- 压缩： 压缩（和解压）可以在表现层进行，以提高数据的吞吐量。(有一些人认为，严格地说，这不是表现层的功能）。

- 加密: 一些类型的加密（和解密）是在表现层进行的。这确保了数据在协议栈中传输时的安全性。例如，通常与表现层相关的最流行的加密方案之一是安全套接字层（SSL）协议。然而，并非所有的加密都是在第6层完成的；一些加密通常是在协议栈的较低层完成的，如IPSec技术。

**<u>表现层在OSI模型中的作用**</u>
在网络通信中不总是使用表现层的原因是，上面提到的工作根本不总是需要。压缩和加密通常被认为是 "可有可无 "的，而翻译功能也只在某些情况下需要。表现层有时不被提及的另一个原因是，它的功能可以作为应用层的一部分来执行。

由表现层完成的翻译工作并不总是需要的，这意味着它被实际的协议栈实现所 "跳过 "的情况很常见。这意味着第七层的协议可以直接与第五层的协议对话。再次，这也是为什么第五层到第七层的所有功能可以一起包含在同一个软件包中的部分原因，如层和层分组概述中所述。

**关键概念**：OSI模型的第六层被称为表现层。这一层的协议负责处理将数据从一种表现形式转化为另一种表现形式的操作任务，如翻译、压缩和加密。在许多情况下，在特定的网络堆栈中不需要这些功能；如果是这样，第六层可能没有任何协议在活动。

##### 3.5.7 应用程序层

在OSI参考模型层栈的最顶端，我们发现了第7层，即应用层。延续我们在第5层和第6层看到的趋势，这一层的名称也非常恰当：应用层是由网络应用程序使用的层。这些程序是实际实现用户在网络上完成各种任务的功能。

重要的是要明白，OSI模型所说的 "应用 "与我们通常认为的 "应用 "并不完全相同。在OSI模型中，应用层为用户的应用提供服务。例如，当你使用你的网络浏览器时，这个实际的软件是在你的电脑上运行的一个应用程序。它并不真正 "驻扎 "在应用层。相反，它利用了一个在应用层运行的协议所提供的服务，这个协议被称为超文本传输协议（HTTP）。浏览器和HTTP之间的区别是微妙的，但很重要。

之所以指出这一点，是因为并非所有的用户应用程序都以同样的方式使用网络的应用层。当然，你的网络浏览器是这样，你的电子邮件客户端和你的Usenet新闻阅读器也是这样。但是，如果你用一个文本编辑器在网络上的另一台机器上打开一个文件，该编辑器就没有使用应用层。事实上，它不知道你正在使用的文件是在网络上的：它只是看到一个文件，其名称已经被映射到其他地方的网络。操作系统负责重定向编辑器所做的事情，通过网络。

同样地，并非所有对应用层的使用都是由应用程序进行的。操作系统本身可以（而且确实）在应用层直接使用服务。

除此以外，在正常情况下，只要你与你的计算机上专门为网络使用而设计的程序进行交互，你就直接与应用层打交道。例如，发送电子邮件，启动网络浏览器，或使用IRC聊天程序--所有这些都涉及到位于应用层的协议。

有几十种不同的应用层协议，在这一层实现各种功能。一些最流行的协议包括HTTP、FTP、SMTP、DHCP、NFS、Telnet、SNMP、POP3、NNTP和IRC。很多的字母汤，对不起。J 我在关于高层协议和应用的章节中描述了所有这些以及更多的内容。

作为 "堆栈的顶层"，应用层是唯一一个不向堆栈中的上层提供任何服务的层--没有任何服务！相反，它向那些为它提供服务的程序提供服务。相反，它为想要使用网络的程序和用户提供服务。因此，这一层的职责只是实现网络用户所需要的功能。当然，还要发布适当的命令来利用下层提供的服务。

**关键概念:** OSI参考模型中的第七层也是最高层是应用层。应用协议是在这一层定义的，它实现了特定的用户应用和其他高级功能。由于它们处于堆栈的顶端，应用协议是唯一不向高层提供服务的协议；它们利用下面各层提供的服务。

正如我们在其他地方讨论的那样，顶层之间的区别不是很清楚，这主要是因为在重要的TCP/IP协议套件中，决定不把会话层、表现层和应用层的功能分开。上面提到的所有协议都来自TCP/IP协议家族，有些协议可能涵盖OSI前三层中的所有三层，也可能是其中的两层，或者是一层；在TCP/IP模型中，它们都是应用。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-04_21-29-29.jpg)

#### 3.6 OSI参考模型层记忆法

如果你花了任何时间来处理网络设计或实施问题，或学习各种协议的运作方式，各层的名称和编号最终会成为 "第二天性"。相信我，我从经验中知道这一点

然而，许多人，特别是那些刚刚学习网络的人，发现很难回忆起所有层的名称，特别是它们的确切顺序是什么。为了帮助这些人，一些记忆法（发音为 "neh-mon-iks"--英语语言的另一个奇迹）已经被创造出来作为记忆的辅助工具。这些是可爱的短语，每个词都以OSI模型层的第一个字母开头，并按正确顺序排列。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\osimnemonics (1).png)

​                                                                            **图18：OSI参考模型记忆法**

这些记忆法可以帮助你记住OSI参考模型层的顺序。

我见过一些这样的记忆法，其中有些是按层数升序排列的，有些则是按另一个方向排列的。这两个是从物理层到应用层。

- Please Do Not Throw Sausage Pizza Away
- Please Do Not Touch Steve's Pet Alligator

而这些则是另一个方向（应用层到物理层）。

- All People Seem To Need Data Processing (this is a popular one)

- All People Standing Totally Naked Don't Perspire (hmm, that's interesting…)

为了您的方便，我在图18中说明了所有这四种情况。

哦，这里还有一个我刚编出来的。所有的人都应该每天教网络，请。

#### 3.7 OSI参考模型层总结

为了帮助你快速比较OSI参考模型的各层，了解它们的不同之处以及它们之间的关系，我制作了表18所示的汇总表。它显示了每一层的名称和编号，描述了它的主要职责，谈到了每一层一般处理什么类型的数据，以及每一层的范围大致是什么。我还展示了一些与每层相关的更常见的协议。

我在这里要说，"标准免责声明适用"。我不想重复我在其他地方讨论OSI模型时提到的所有注意事项，但我知道这些注意事项在这里也适用。即：各层并不总是硬性规定的，我没有在这里列出每一个协议，有些协议可能真的适合于一个以上的层，等等。特别要注意的是，许多被列为数据链路层的技术之所以在那里，是因为那是它们主要功能所在的层。实际上，这些技术中的大多数都包括其他层的组件，特别是物理层。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\Snipaste_2022-10-04_21-37-14.jpg)

### 第四章、TCP/IP协议簇和体系结构

正如以太网在局域网技术方面的统治地位和IEEE 802.11在无线局域网世界的老大地位一样，现代网络技术也被称为TCP/IP的套件所主导。TCP/IP因其众多协议中的两个关键协议而得名，大约三十年来一直在持续发展和使用。在这段时间里，它已经从一个用于连接少数研究用计算机的实验性技术，发展成为历史上最大和最复杂的计算机网络的动力源：全球互联网，将数以百万计的网络和终端设备连接起来。

在这一节中，我开始了我们对TCP/IP这个神秘世界的神奇之旅。J 我首先介绍了TCP/IP的概况，并简要介绍了它非常有趣的历史。我讨论了TCP/IP网络中提供的服务，然后解释了TCP/IP下使用的架构模型。然后，我对本指南中讨论的每个最重要的TCP/IP协议进行了简要描述。

你可能已经注意到，这一节的内容相对较少，尽管它的标题似乎包含了本TCP/IP指南的全部内容。原因是这一节只提供了TCP/IP的高级概述。本指南的大部分内容都是关于解释构成TCP/IP的几十个单独协议；这些内容可以在本指南的其他章节和子章节中找到。为方便起见，你也可以在本节的TCP/IP协议主题中找到这些协议描述的直接链接。

#### 4.1 TCP/IP概述和历史、

开始研究TCP/IP的最好地方可能是其名称本身。TCP/IP实际上由几十个不同的协议组成，但只有几个是 "主要 "协议，它们定义了该套件的核心操作。在这些主要协议中，有两个通常被认为是最重要的。互联网协议（IP）是主要的OSI网络层（第三层）协议，提供寻址、数据报路由和互联网中的其他功能。传输控制协议（TCP）是主要的传输层（第四层）协议，负责设备上软件进程之间的连接建立和管理以及可靠的数据传输。

由于这两个协议的重要性，它们的缩写已经开始代表整个套件。"TCP/IP"。(一会儿我们会发现这个名字的确切历史。）IP和TCP很重要，因为TCP/IP的许多最关键的功能是在第三和第四层实现的。然而，TCP/IP的内容远不止TCP和IP。协议套件作为一个整体需要许多不同的协议和技术的工作，以使一个功能性的网络能够正确地为用户提供他们所需要的应用程序。

TCP/IP使用自己的四层结构，大致与OSI参考模型相对应，并为构成该套协议的各种协议提供了一个框架。它还包括许多高级应用，其中一些是互联网用户所熟知的，他们可能没有意识到它们是TCP/IP的一部分，如HTTP（运行万维网）和FTP。在关于TCP/IP体系结构和协议的专题中，我对大多数重要的TCP/IP协议以及它们是如何结合在一起的进行了概述。

<u>**早期的TCP/IP历史**</u>
正如我前面所说，互联网是TCP/IP发展到今天的一个主要原因。事实上，互联网和TCP/IP的历史是如此密切相关，以至于在讨论一个问题时很难不谈另一个问题。它们是一起发展起来的，TCP/IP提供了实现互联网的机制。多年来，TCP/IP不断发展，以满足互联网和使用该技术的小型私人网络的需要。我将在这里对TCP/IP的历史做一个简要的总结；当然，关于TCP/IP和互联网历史的书已经写了一整本，这是一本技术指南，而不是一本历史书，所以请记住，这只是为了兴趣而快速浏览。

TCP/IP协议最初是作为美国国防高级研究计划局（DARPA或ARPA）开发的研究网络的一部分。最初，这个刚起步的网络被称为ARPA网络，被设计为使用一些从现有技术改编的协议。然而，这些协议在ARPA网络上使用时，无论是在概念上还是在容量等实际问题上，都存在缺陷或限制。新网络的开发者们认识到，随着ARPA网络规模的扩大，以及为更新的用途和应用所做的调整，试图使用这些现有的协议可能最终会导致问题。

1973年，为ARPA网络开发一个成熟的网络协议系统的工作开始了。许多人不知道的是，在这项技术的早期版本中，只有一个核心协议。TCP。事实上，这些字母甚至不代表它们今天的含义；它们是传输控制程序的意思。这个现代TCP的前身的第一个版本写于1973年，然后在RFC 675，互联网传输控制程序规范中进行了修订和正式记录，1974年12月。

**注**：互联网标准是在称为 "征求意见"（RFC）的文件中定义的。这些文件，以及用于创建它们的过程，将在网络基础知识部分的自己的主题中描述。

TCP的测试和开发持续了数年。1977年3月，TCP的第二版被记录下来。1977年8月，TCP/IP的发展出现了一个重要的转折点。Jon Postel，互联网和TCP/IP的最重要的先驱之一，发表了一组关于TCP状态的评论。在那份文件中（被称为互联网工程说明第2号，或IEN 2），他提供了我认为是极好的证据，证明参考模型和层不仅仅是为了教科书，而且真的很重要，需要理解。

​                我们在设计互联网协议时违反了分层原则，把事情搞砸了。具体来说，我们试图用TCP来做两件事：作为一个主机级的端到端协议，并作为一个互联网打包和路由协议。这两件事应该以分层和模块化的方式提供。我建议需要一个新的独特的网络协议，并将TCP严格地作为主机级的端到端协议使用。

​                                        -- Jon Postel, IEN 2, 1977年

Postel的意思是，1970年代中期创建的TCP版本试图做得太多。具体来说，它包含了第三层和第四层的活动（就OSI参考模型的层数而言）。他的观点是有预见性的，因为我们现在知道，让TCP处理所有这些活动确实会导致未来的问题。

Postel的观察导致了TCP/IP架构的建立，并将TCP拆分为传输层的TCP和网络层的IP；因此被称为 "TCP/IP"。(作为一个旁观者，考虑到这段历史，有趣的是，有时整个TCP/IP套件只被称为 "IP"，尽管TCP是第一个出现的）。将TCP分为两部分的过程开始于1978年编写的TCP第三版。现代网络中使用的IP和TCP版本的第一个正式标准（版本4）是在1980年制定的。这就是为什么第一个 "真正 "的IP版本是版本4而不是版本1。TCP/IP很快成为运行ARPA网络的标准协议集。在20世纪80年代，越来越多的机器和网络使用TCP/IP协议连接到不断发展的ARPAnet，TCP/IP互联网由此诞生。

**关键概念：**TCP/IP最初是在20世纪70年代开发的，作为定义一套技术以运行新生的互联网的努力的一部分。当最初的传输控制程序（TCP）被拆分为传输控制协议（TCP）和互联网协议（IP）时，"TCP/IP "这个名称就出现了。这两个关键协议的第一个现代版本在1980年被记录为TCP版本4和IP版本4。

**<u>TCP/IP成功的重要因素</u>**

TCP/IP曾一度只是可用于提供网络层和传输层功能的 "众多 "不同协议集中的一个。今天，仍然有其他的网络协议套件可供选择，但TCP/IP是普遍接受的世界性标准。它的普及是由于一些重要的因素造成的。其中一些是历史性的，例如它与上述的互联网联系在一起，而其他一些则与协议套件本身的特点有关。这些因素中最主要的是以下几点。

- 集成寻址系统：TCP/IP包括（主要是作为互联网协议的一部分）一个用于识别和寻址小型和大型网络设备的系统。寻址系统被设计成允许设备被寻址，而不考虑每个组成网络的低级细节如何构建。随着时间的推移，TCP/IP的寻址机制得到了改进，以满足不断增长的网络，特别是互联网的需要。寻址系统还包括互联网的集中管理能力，以确保每个设备有一个唯一的地址。

- 设计用于路由:与一些网络层协议不同，TCP/IP是专门为方便在任意复杂的网络上进行信息路由而设计的。事实上，TCP/IP在概念上更关注网络的连接，而不是设备的连接。TCP/IP路由器使数据能够在不同网络的设备之间传递，方法是将数据从一个网络一步步转移到下一个网络。TCP/IP中还包括一些支持协议，使路由器能够交换关键信息，并管理信息从一个网络到另一个网络的有效流动。

- 底层网络的独立性：TCP/IP主要在第三层及以上运行，并包括允许它在几乎任何下层技术上运行的规定，包括局域网、无线局域网和各种类型的广域网。这种灵活性意味着人们可以混合和匹配各种不同的底层网络，并使用TCP/IP连接它们。

- 可扩展性: TCP/IP最令人惊讶的特点之一是它的协议被证明是可扩展的。几十年来，随着互联网从一个只有几台机器的小网络发展到拥有数百万台主机的巨大网络，它已经证明了自己的能力。虽然需要定期进行一些改变以支持这种增长，但这些改变是作为TCP/IP发展过程的一部分进行的，而且TCP/IP的核心与25年前基本相同。

- 开放的标准和开发过程：TCP/IP标准不是专有的，而是向公众免费提供的开放标准。此外，用于开发TCP/IP标准的过程也是完全开放的。TCP/IP标准和协议的制定和修改采用独特的、民主的 "RFC "程序，邀请所有感兴趣的人参与。这确保了任何对TCP/IP协议感兴趣的人都有机会为其发展提供意见，同时也确保了世界范围内对该协议套件的接受。

- 普遍性: 每个人都在使用TCP/IP，因为每个人都在使用它。

这最后一点也许具有讽刺意味，但可以说是最重要的一点。TCP/IP不仅是 "互联网的底层语言"，它也被用于今天的大多数私人网络。即使是TCP/IP以前的 "竞争对手"，如NetWare，现在也使用TCP/IP来传输流量。互联网在继续发展，而TCP/IP的能力和功能也在继续发展。对未来的准备工作仍在继续，向新的IP第6版协议的转移处于早期阶段。在可预见的未来，TCP/IP可能仍将是互联网的重要组成部分。

**关键概念**：虽然TCP/IP不是唯一的网络协议套件，但它绝对是最重要的。它无与伦比的成功是由于各种各样的因素造成的。这些因素包括它的技术特点，如它的路由友好设计和可扩展性，它作为互联网协议套件的历史作用，以及它的开放标准和开发过程，这减少了接受TCP/IP协议的障碍。

#### 4.2 TCP/IP服务和客户端/服务器操作

TCP/IP最常被研究的是它基于层的结构和它在这些不同层提供的协议。我们当然也会这样做，不用担心。然而，这些协议代表了TCP/IP工作方式的技术细节。作为技术专业的学生，我们对这些细节很感兴趣，但通常对那些不需要看到TCP/IP工作原理的 "内脏 "就知道它是如何工作的用户来说是隐藏的。在讨论这些细节之前，我想先看看TCP/IP的 "全貌 "可能会有帮助。

- <u>**TCP/IP服务**</u>
  在描述OSI参考模型的章节中，我提到该模型的理论操作是基于一层向其上层提供服务的概念。TCP/IP覆盖了OSI模型的许多层，因此它也以许多方式共同提供这类服务。从概念上讲，我们可以将TCP/IP服务分为两组：提供给其他协议的服务和直接提供给最终用户的服务。
- <u>**提供给其他协议的服务**</u>
  第一组服务包括由IP、TCP和UDP等主要TCP/IP协议实现的核心功能。这些服务被设计用来实际完成协议套件的内联网功能。例如，在网络层，IP提供的功能包括寻址、传送和数据报打包、分片和重新组合。在传输层，TCP和UDP负责封装用户数据和管理设备之间的连接。其他协议提供路由和管理功能。更高层的协议使用这些服务，使它们能够集中精力完成它们所要完成的任务。
- <u>**终端用户服务**</u>
  TCP/IP提供的其他一般类型的服务是终端用户服务。这些服务有利于用户运行的应用程序的运行，以利用互联网和其他TCP/IP网络的力量。例如，万维网（WWW）可以说是最重要的互联网应用。WWW的服务是通过超文本传输协议（HTTP）提供的，这是一个TCP/IP应用层协议。而HTTP又使用较低级别的协议所提供的服务。当然，所有这些细节都是向最终用户隐藏的，这完全是故意的

<u>**TCP/IP客户机/服务器结构模型**</u>

TCP/IP服务的一个重要定义特征是，它们主要在客户机/服务器结构模型中运行。这个术语指的是一个系统，其中相对较少的（通常是强大的）服务器机器专门为数量更多的客户主机提供服务；我在网络基础一章的网络结构模型专题中更多地描述了这个概念。正如客户/服务器网络适用于硬件一样，这个概念也可以适用于软件和协议，这正是在设计TCP/IP协议和应用时所做的。

TCP/IP协议的设置并不是为了让两台要通信的机器使用相同的软件。相反，一个有意识的决定是使通信功能使用匹配的、互补的客户和服务器软件对。客户端通过向服务器发送数据或其他信息的请求来启动通信。然后，服务器回复客户，给客户它所要求的东西，或其他响应，如错误信息或关于它可能找到数据的其他地方的信息。大多数（但不是全部）TCP/IP功能以这种方式工作，如图19所示。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\tcpipclientserver.png)

​                                                                                        <u>**图19：TCP/IP客户/服务器操作**</u>

大多数TCP/IP协议涉及两个设备之间的通信，但这两个设备在通信中很少充当对等体；一个充当客户，另一个充当服务器。这个简化图显示了一个常见的例子--使用超文本传输协议（HTTP）的万维网交易。网络浏览器是一个HTTP客户端，通过互联网向作为HTTP服务器的网站发送文件或其他资源的请求，从而启动通信。然后服务器将请求的信息回复给客户端。服务器一般会同时响应许多客户。

在TCP/IP中，客户端/服务器的操作有许多优点。就像客户机硬件和服务器硬件可以为其非常不同的工作量身定做一样，客户机软件和服务器软件也可以被优化，以尽可能有效地完成其工作。让我们再拿WWW作为另一个例子。为了从网络上获取信息，网络客户端软件（通常称为浏览器）向网络服务器发送请求。然后，网络服务器对所请求的内容进行响应。(当然，还有更多的内容，但对用户来说是这样的）。创建网络浏览器是为了向用户提供界面，并与网络服务器对话；网络服务器软件则非常不同，一般只由接收和响应请求的高能软件组成。

**关键概念:** TCP/IP协议套件强烈地围绕客户/服务器网络通信的概念。与其说所有的设备和协议软件元素被设计成对等的，不如说它们被构造成匹配的集合。客户端通常通过发送请求来启动通信，而服务器则对这些请求作出响应，向客户提供所需的数据或信息性的答复。

**<u>了解TCP/IP的客户和服务器角色</u>**

在TCP/IP中，"客户 "和 "服务器 "这两个术语可能会引起混淆，因为它们被用于几种不同的方式，有时是同时使用。

- **硬件角色：**术语 "客户 "和 "服务器 "通常指的是联网硬件所扮演的主要角色。一个 "客户 "计算机通常是个人使用的PC或Macintosh计算机，主要通过发送请求来发起对话。一个 "服务器 "通常是一个非常高功率的机器，专门用于响应客户的请求，坐在计算机房的某个地方，除了管理员之外没有人看到。
- **软件角色:**如前所述，TCP/IP在许多协议中使用不同的软件来实现 "客户 "和 "服务器 "角色。网络浏览器是一种客户端软件，而网络服务器软件则完全不同。客户端软件通常在客户端硬件上，而服务器软件在服务器硬件上，但并非总是如此。有些设备可能同时运行客户端和服务器软件。
- **事务性角色：**在任何信息交流中，客户端通常是发起通信或发送查询的设备；服务器作出回应，通常提供信息。同样，通常客户端设备上的客户端软件发起交易，但这并不总是如此。

因此，在一个典型的组织中，会有许多较小的个人计算机被指定为 "客户"，而一些较大的计算机则是 "服务器"。服务器通常运行服务器软件，而客户则运行客户软件。但是，服务器也可以用客户机软件设置，客户机也可以用服务器软件设置。

例如，假设你是一名管理员，在1号服务器的计算机房工作，需要将一个文件传输到2号服务器。你启动了FTP，与2号服务器启动了一个文件传输会话。在这个交易中，服务器#1扮演着客户的角色，因为它是用一个FTP客户程序来启动通信。理论上，你甚至可以从服务器#1开始向某个特定的客户进行FTP传输，如果该客户有FTP服务器软件来响应服务器的请求。(这种情况不太常见，因为服务器软件通常不安装在客户机上）。

当某些协议的服务器之间发生通信时，事务性角色就会发挥作用。例如，当两个SMTP服务器通信以交换电子邮件时，即使它们都是在服务器硬件上运行的服务器程序，在任何交易期间，一个设备作为客户，而另一个作为服务器。在某些情况下，设备甚至可以在一个会话的中间交换客户和服务器的角色。

最后，我应该明确指出，我在上面讨论的客户和服务器角色是传统的。功能强大的个人电脑和广泛的互联网接入（尤其是 "永远在线 "的宽带连接）的兴起，导致了客户端和服务器硬件和软件的明显模糊化。许多客户机现在包括服务器软件，以使它们能够，例如，对来自其他客户的万维网查询作出反应。还有许多文件共享程序，允许客户使用点对点结构模型进行通信。然而，大多数TCP/IP通信仍然是客户机/服务器性质的，所以记住这些角色很重要。

**关键概念:** 由于术语 "客户 "和 "服务器 "在不同的语境中具有非常不同的含义，理解TCP/IP中的客户/服务器计算概念就变得更加复杂。这两个术语可以指硬件角色--根据硬件设备通常是作为客户还是作为服务器来指定的。这两个术语也可以指软件角色，即协议软件组件是否作为客户或服务器发挥作用。最后，它们可以指交易角色，即在任何特定的数据交换中，设备和程序是否作为客户或服务器发挥作用。

#### 4.3 TCP/IP体系结构和TCP/IP模型

OSI参考模型由七层组成，代表了实现网络所需任务的功能划分。它是一个概念性工具，我经常用它来展示各种协议和技术是如何结合起来实现网络的。然而，它并不是唯一一个试图将任务划分为层和组件的网络模型。事实上，TCP/IP协议套件是在OSI参考模型之前创建的；因此，它的发明者并没有使用OSI模型来解释TCP/IP架构（尽管今天在讨论TCP/IP时经常使用OSI模型，你会在本指南中看到，相信我）。

**<u>TCP/IP模型</u>**
TCP/IP协议套件的开发者创建了他们自己的架构模型，以帮助描述其组件和功能。这个模型有不同的名字，包括TCP/IP模型、DARPA模型（以主要负责开发TCP/IP的机构命名）和DOD模型（以美国国防部命名，DARPA的 "D"）。我只是把它称为TCP/IP模型，因为这似乎是现代最简单的称呼。

不管你用什么模型来表示网络的功能--也不管你怎么称呼这个模型！--这个模型所表示的功能都是差不多的。这意味着TCP/IP模型和OSI模型在本质上是非常相似的，即使它们并没有以精确的方式分割网络功能的蛋糕。在TCP/IP和OSI层之间存在着相当自然的对应关系，只是并不总是 "一对一 "的关系。由于OSI模型被广泛使用，所以通常用TCP/IP层和相应的OSI层来解释TCP/IP结构，这也是我现在要做的。

**<u>TCP/IP模型的层数</u>**

TCP/IP模型使用四个层，在逻辑上相当于OSI参考模型的前六层，如图20所示。(物理层不包括在TCP/IP模型中，因为数据链路层被认为是TCP/IP栈和底层网络硬件之间的接口点）。以下是TCP/IP模型的各层，从底部开始。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\tcpiplayers.png)

​                                                                          **图20：OSI参考模型和TCP/IP模型的层数**

TCP/IP结构模型有四层，与OSI参考模型中的七层中的六层大致相符。TCP/IP模型不涉及物理层，也就是硬件设备所在的位置。接下来的三层--网络接口、互联网和（主机到主机）传输--对应于OSI模型的第2、3和4层。TCP/IP应用层在概念上 "模糊 "了OSI的前三层。还值得注意的是，有些人认为OSI会话层的某些方面可以说是TCP/IP主机到主机传输层的一部分。

<u>**网络接口层**</u>
顾名思义，这一层代表了实际运行在高层的TCP/IP协议与本地网络接口的地方。这一层有些 "争议"，因为有些人甚至不认为它是TCP/IP的 "合法 "部分。这通常是因为没有一个核心IP协议在这一层运行。尽管如此，网络接口层是架构的一部分。它相当于OSI参考模型中的数据链路层（第二层），有时也被称为链路层。你也可能看到网络接入层这个名字。

在许多TCP/IP网络中，这一层根本没有运行TCP/IP协议，因为根本不需要它。例如，如果你在以太网上运行TCP/IP，那么以太网处理第二层（和第一层）的功能。然而，TCP/IP标准确实为没有自己的第二层实现的TCP/IP网络定义了协议。这些协议，即串行线互联网协议（SLIP）和点对点协议（PPP），用于填补网络层和物理层之间的空白。它们通常被用来促进TCP/IP在直接的串行线连接（如拨号电话网络）和其他直接在物理层操作的技术。

<u>**互联网层**</u>

这一层对应于OSI参考模型中的网络层（由于这个原因，即使在TCP/IP模型的讨论中有时也被称为网络层）。它负责典型的第三层工作，如逻辑设备寻址、数据打包、操作和交付，以及最后但并非最不重要的路由。在这一层，我们可以找到互联网协议（IP），可以说是TCP/IP的核心，以及支持协议，如ICMP和路由协议（RIP、OSFP、BGP等）。新版本的IP，称为IP版本6，将用于未来的互联网，当然也是在这一层。

<u>**(主机到主机)传输层**</u>
该层的主要工作是促进互联网上的端到端通信。它负责允许设备之间建立逻辑连接，以允许数据不可靠地发送（不能保证数据到达）或可靠地发送（协议跟踪发送和接收的数据以确保数据到达，并在必要时重新发送）。也是在这里完成了对特定源和目的地应用程序的识别

这一层的正式名称通常简称为传输层；这一层的关键TCP/IP协议是传输控制协议（TCP）和用户数据报协议（UDP）。TCP/IP传输层对应于OSI模型中的同名层（第四层），但包括可以说是OSI会话层的某些元素。例如，TCP建立的连接可以持续很长时间，有些人说这使得TCP连接更像一个会话。

<u>**应用层**</u>
这是TCP/IP模型中最高的一层。它是一个相当广泛的层，包括OSI模型中的第五到第七层。虽然与OSI模型相比，这似乎代表了一种细节的损失，但我认为这可能是一件好事 TCP/IP模型更好地反映了OSI模型中高层功能划分的 "模糊性"，在实际应用中，这种划分往往显得相当随意。真的很难根据它们所包含的第五、第六或第七层来区分一些协议。(我甚至懒得在本指南中尝试，这就是为什么高层协议都在同一章中，而第一至第四层的协议则单独列出的原因）。

众多的协议位于应用层。这些协议包括用于提供最终用户服务的HTTP、FTP和SMTP等应用协议，以及SNMP、DHCP和DNS等管理协议。

**<u>注意：</u>**互联网和主机到主机的传输层通常被认为是TCP/IP架构的 "核心"，因为它们包含了实现TCP/IP网络的大多数关键协议。

在接下来的主题中，我将简要介绍本指南中所涉及的每个TCP/IP协议，并更详细地介绍它们在TCP/IP架构中的位置。我还将介绍一些根本不适合TCP/IP层模型的协议。

**关键概念：**TCP/IP协议套件的体系结构经常被描述为一个分层参考模型，称为TCP/IP模型、DARPA模型或DOD模型。TCP/IP模型包括四层：网络接口层（负责将协议套件与运行的物理硬件对接）、互联网层（设备寻址、基本数据报通信和路由发生的地方）、主机到主机传输层（管理连接和确保可靠通信的地方）和应用层（终端用户应用和服务所在的地方）。 前三层分别对应OSI参考模型的第二至第四层；应用层相当于OSI第五至第七层。

#### 4.4 TCP/IP协议

由于TCP/IP是一个协议套件，它最常被讨论的是组成它的协议。每个协议都 "驻扎 "在我们在本节前面看到的TCP/IP结构模型的一个特定层。每个TCP/IP协议都负责执行实现TCP/IP网络或应用所需的全部功能中的某个子集。它们一起工作，使TCP/IP作为一个整体得以运行。

首先，简单说一下 "协议 "这个词。你有时会听到TCP/IP被称为 "协议 "而不是 "协议套件"。这是一种简化，虽然在技术上不正确，但被广泛使用。我相信这在很大程度上是由于微软在他们的操作系统中将协议套件称为 "协议 "而产生的。我在网络基础一章中专门讨论协议的专题中更详细地讨论了这个问题。

正如我在本节前面提到的，有几个TCP/IP协议通常被称为套件的 "核心"，因为它们负责其基本操作。哪些协议应包括在这一类别中是一个有些猜测的问题，但大多数人肯定会在这里包括互联网和传输层的主要协议：互联网协议（IP）、传输控制协议（TCP）和用户数据报协议（UDP）。这些核心协议支持许多其他协议，以便在TCP/IP模型的每一层执行各种功能。还有一些协议使用户应用程序能够发挥作用。

总的来说，有数百种TCP/IP协议和应用，我不可能在本指南中逐一介绍。我确实包括了讨论几十个协议的章节，我认为这些协议由于某种原因而很重要。这些协议的全部内容（不同程度的细节）可以在本指南的其他章节中找到。

下面我列出了一些表格，提供了本指南中讨论的每个TCP/IP协议的摘要。每张表都涵盖了TCP/IP模型的一个层，从低到高，我还提供了链接到讨论每个层的章节或主题。在图21中也可以看到TCP/IP套件中协议的组织结构，一目了然。

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\tcpipprotocols.png)

​                                                                                                        <u>**图21：TCP/IP协议**</u>

这张图显示了本指南所涉及的所有TCP/IP协议，按TCP/IP和OSI参考模型层排列（管理实用程序除外；有这么多，我没有空间了！）。J）我还在网络接口层显示了TCP/IP硬件驱动程序的概念所在；当TCP/IP在局域网或广域网技术上实现时，而不是使用SLIP或PPP时，这些驱动程序在第二层被使用。

<u>**网络接口层（OSI第2层）协议**</u>

TCP/IP包括网络接口层的两个协议，SLIP和PPP，如表19所示。

​                                                            **表19:TCP/IP协议：网络接口层（OSI层2）**

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\tcp-ip-1.jpg)

**网络接口/网络层（“OSI 第 2/3 层”）协议**

表 20 描述了 ARP 和 RARP，它们是 TCP/IP 套件的“奇怪的东西”。在某些方面，它们同时属于第二层和第三层，而在其他方面则不属于。它们确实用于将网络接口层和互联网层链接在一起。出于这个原因，我真的相信它们属于这两者之间，并称它们为“层连接”协议。有关此问题的更多信息，请参阅专门讨论这些协议及其独特层的部分。

​                                            **表 20：TCP/IP 协议：网络接口/网络层（“OSI 层 2/3”）**

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\tcp-ip-2.jpg)

<u>**网络层（OSI 第 3 层）协议**</u>

非常重要的网络层包含 Internet 协议和几个相关和支持的协议，如表 21 所示。

​                                                        **表 21：TCP/IP 协议：网络层（OSI 第 3 层）**

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\tcp-ip-3.jpg)

<u>**主机到主机传输层（OSI 第 4 层）协议**</u>

传输层包含基本协议 TCP 和 UDP，如表 22 所示。

​                                                    **表 22：TCP/IP 协议：主机到主机传输层（OSI 第 4 层）**

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\tcp-ip-4.jpg)

**应用层（OSI 第 5/6/7 层）协议**

正如关于 TCP/IP 模型的主题中所讨论的，在 TCP/IP 中，单个应用层覆盖了相当于 OSI 层 5、6 和 7 的内容。本指南中涵盖的应用协议如表 23 所示。
                                                                        **表 23：TCP/IP 协议：应用层（OSI 第 5/6/7 层）**

![](D:\网络\网络相关文章\网络分析架构与设计\The-TCP-IP-Guide-master\TCP-IP 指南整理文档\image\TCP-IP-5.jpg)
